{"version":3,"sources":["../../node_modules/core-js/internals/global.js","../../node_modules/core-js/internals/fails.js","../../node_modules/core-js/internals/descriptors.js","../../node_modules/core-js/internals/object-property-is-enumerable.js","../../node_modules/core-js/internals/create-property-descriptor.js","../../node_modules/core-js/internals/classof-raw.js","../../node_modules/core-js/internals/indexed-object.js","../../node_modules/core-js/internals/require-object-coercible.js","../../node_modules/core-js/internals/to-indexed-object.js","../../node_modules/core-js/internals/is-object.js","../../node_modules/core-js/internals/to-primitive.js","../../node_modules/core-js/internals/has.js","../../node_modules/core-js/internals/document-create-element.js","../../node_modules/core-js/internals/ie8-dom-define.js","../../node_modules/core-js/internals/object-get-own-property-descriptor.js","../../node_modules/core-js/internals/an-object.js","../../node_modules/core-js/internals/object-define-property.js","../../node_modules/core-js/internals/create-non-enumerable-property.js","../../node_modules/core-js/internals/set-global.js","../../node_modules/core-js/internals/shared-store.js","../../node_modules/core-js/internals/inspect-source.js","../../node_modules/core-js/internals/internal-state.js","../../node_modules/core-js/internals/native-weak-map.js","../../node_modules/core-js/internals/shared.js","../../node_modules/core-js/internals/uid.js","../../node_modules/core-js/internals/shared-key.js","../../node_modules/core-js/internals/hidden-keys.js","../../node_modules/core-js/internals/object-create.js","../../node_modules/core-js/internals/redefine.js","../../node_modules/core-js/internals/path.js","../../node_modules/core-js/internals/get-built-in.js","../../node_modules/core-js/internals/to-integer.js","../../node_modules/core-js/internals/to-length.js","../../node_modules/core-js/internals/to-absolute-index.js","../../node_modules/core-js/internals/array-includes.js","../../node_modules/core-js/internals/object-keys-internal.js","../../node_modules/core-js/internals/enum-bug-keys.js","../../node_modules/core-js/internals/object-get-own-property-names.js","../../node_modules/core-js/internals/object-get-own-property-symbols.js","../../node_modules/core-js/internals/own-keys.js","../../node_modules/core-js/internals/copy-constructor-properties.js","../../node_modules/core-js/internals/is-forced.js","../../node_modules/core-js/internals/export.js","../../node_modules/core-js/internals/function-bind-context.js","../../node_modules/core-js/internals/a-function.js","../../node_modules/core-js/internals/to-object.js","../../node_modules/core-js/internals/is-array.js","../../node_modules/core-js/internals/native-symbol.js","../../node_modules/core-js/internals/use-symbol-as-uid.js","../../node_modules/core-js/internals/well-known-symbol.js","../../node_modules/core-js/internals/array-species-create.js","../../node_modules/core-js/internals/array-iteration.js","../../node_modules/core-js/internals/object-keys.js","../../node_modules/core-js/internals/object-define-properties.js","../../node_modules/core-js/internals/html.js","../../node_modules/core-js/internals/add-to-unscopables.js","../../node_modules/core-js/internals/array-method-uses-to-length.js","../../node_modules/core-js/modules/es.array.find-index.js","../../node_modules/core-js/modules/es.array.includes.js","../../node_modules/core-js/internals/object-assign.js","../../node_modules/core-js/modules/es.object.assign.js","../../node_modules/core-js/internals/object-to-array.js","../../node_modules/core-js/modules/es.object.entries.js","../../node_modules/core-js/modules/es.object.values.js","../../node_modules/core-js/internals/is-regexp.js","../../node_modules/core-js/modules/es.string.ends-with.js","../../node_modules/core-js/internals/not-a-regexp.js","../../node_modules/core-js/internals/correct-is-regexp-logic.js","../../node_modules/core-js/modules/es.string.includes.js","../../node_modules/core-js/modules/es.string.starts-with.js","../../build/js/FormData.js","../../build/js/Validators.js","../../build/js/FormBase.js","../../build/js/Field.js","../../build/js/Form.js","../../build/js/AjaxLookup.js","../../build/js/SelectionListOption.js","../../build/js/AutoSuggest.js","../../build/js/Forms.js","../../build/js/functions.js","../../build/js/Select2CustomOption.js","../../build/js/main.js","../../build/js/multipage.js","../../build/js/jquery.js","../../build/js/fields.js","../../build/js/adminlte.js"],"names":["check","it","Math","global_1","globalThis","window","self","global","Function","fails","exec","error","descriptors","Object","defineProperty","get","nativePropertyIsEnumerable","propertyIsEnumerable","getOwnPropertyDescriptor","call","1","V","descriptor","this","enumerable","createPropertyDescriptor","bitmap","value","configurable","writable","toString","classofRaw","slice","split","indexedObject","classof","requireObjectCoercible","undefined","TypeError","toIndexedObject","IndexedObject","isObject","toPrimitive","input","PREFERRED_STRING","fn","val","valueOf","hasOwnProperty","has","key","document","EXISTS","createElement","documentCreateElement","ie8DomDefine","DESCRIPTORS","a","nativeGetOwnPropertyDescriptor","O","P","IE8_DOM_DEFINE","propertyIsEnumerableModule","f","anObject","String","nativeDefineProperty","Attributes","createNonEnumerableProperty","object","definePropertyModule","setGlobal","sharedStore","functionToString","store","inspectSource","set","WeakMap","nativeWeakMap","test","module","exports","push","version","mode","copyright","id","postfix","random","uid","keys","shared","sharedKey","hiddenKeys","NATIVE_WEAK_MAP","wmget","wmhas","wmset","metadata","STATE","objectHas","activeXDocument","internalState","enforce","getterFor","TYPE","state","type","getInternalState","InternalStateModule","enforceInternalState","TEMPLATE","options","unsafe","simple","noTargetGet","source","join","prototype","path","aFunction","variable","getBuiltIn","namespace","method","arguments","length","ceil","floor","toInteger","argument","isNaN","min","toLength","max","createMethod","IS_INCLUDES","$this","el","fromIndex","index","integer","toAbsoluteIndex","arrayIncludes","includes","indexOf","require$$0","objectKeysInternal","names","i","result","enumBugKeys","concat","getOwnPropertyNames","internalObjectKeys","getOwnPropertySymbols","ownKeys","getOwnPropertyNamesModule","getOwnPropertySymbolsModule","copyConstructorProperties","target","getOwnPropertyDescriptorModule","replacement","isForced","feature","detection","data","normalize","POLYFILL","NATIVE","string","replace","toLowerCase","isForced_1","_export","targetProperty","sourceProperty","TARGET","GLOBAL","STATIC","stat","forced","sham","redefine","functionBindContext","that","b","c","apply","toObject","isArray","Array","arg","nativeSymbol","Symbol","useSymbolAsUid","NATIVE_SYMBOL","iterator","WellKnownSymbolsStore","createWellKnownSymbol","USE_SYMBOL_AS_UID","withoutSetter","wellKnownSymbol","name","SPECIES","arraySpeciesCreate","originalArray","C","constructor","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","NO_HOLES","callbackfn","specificCreate","boundFunction","bind","create","arrayIteration","forEach","map","filter","some","every","find","findIndex","objectKeys","objectDefineProperties","defineProperties","Properties","html","IE_PROTO","EmptyConstructor","scriptTag","content","LT","NullProtoObject","domain","ActiveXObject","iframeDocument","iframe","write","close","temp","parentWindow","NullProtoObjectViaActiveX","style","display","appendChild","src","contentWindow","open","F","objectCreate","UNSCOPABLES","ArrayPrototype","addToUnscopables","cache","thrower","arrayMethodUsesToLength","METHOD_NAME","ACCESSORS","argument0","argument1","$findIndex","SKIPS_HOLES","USES_TO_LENGTH","$","proto","$includes","nativeAssign","assign","objectAssign","A","B","symbol","chr","T","argumentsLength","S","j","TO_ENTRIES","objectToArray","entries","values","$entries","$values","MATCH","notARegexp","isRegExp","correctIsRegexpLogic","regexp","e","nativeEndsWith","endsWith","CORRECT_IS_REGEXP_LOGIC","correctIsRegExpLogic","searchString","notARegExp","endPosition","len","end","search","nativeStartsWith","startsWith","Blob","FormData","normalizeValue","_ref","filename","File","lastModified","ensureArgs","args","expected","normalizeArgs","each","arr","cb","_FormData","_send","XMLHttpRequest","send","_fetch","Request","fetch","_sendBeacon","navigator","sendBeacon","stringTag","toStringTag","d","blob","t","Date","lastModifiedDate","FormDataPolyfill","form","_data","elements","elm","disabled","files","file","append","opt","selected","checked","normalizeLinefeeds","_proto","_normalizeArgs$apply","delete","regeneratorRuntime","mark","_iterator","_step","wrap","_context","prev","next","t0","t1","done","_createForOfIteratorHelperLoose","stop","callback","thisArg","_step2","_iterator2","_step2$value","getAll","_iterator3","_step3","_step3$value","_context2","_iterator4","_step4","_step4$value","_context3","_step5","fd","_iterator5","_step5$value","_step6","boundary","chunks","_iterator6","_step6$value","setRequestHeader","_hasContentType","init","body","url","ew","checkInteger","userLevelId","language","phrase","parseInt","elId","getElementById","trim","level","sameText","userLevelName","fieldName","hasValue","required","elFn","fileRequired","elPwd","mismatchPassword","x","z","between","$el","hasClass","passwordStrength","raw","match","RegExp","escapeRegExChars","INVALID_USERNAME_CHARACTERS","username","ENCRYPTED_PASSWORD","INVALID_PASSWORD_CHARACTERS","password","getValue","checkEmail","email","cnt","err","checkEmails","dateFormat","phraseId","newSubStr","DATE_SEPARATOR","checkShortDate","checkDate","checkShortEuroDate","checkEuroDate","checkShortUSDate","checkUSDate","checkDateDef","DATE_FORMAT","datetime","checkTime","time","checkNumber","checkRange","range","checkPhone","phone","checkZip","zip","checkCreditCard","creditCard","checkSsn","ssn","checkGuid","guid","pattern","checkByRegEx","regex","_len","_key","custom","captcha","_grecaptcha","grecaptcha","getResponse","dataset","recaptcha","FormBase","pageId","_initiated","$element","htmlForm","initSearchPanel","modified","validateRequired","validate","emptyRow","multiPage","autoSuggests","lists","disableForm","getForm","prop","addClass","enableForm","$form","removeClass","appendHidden","$dp","closest","attr","ar","serializeArray","o","appendTo","canSubmit","updateTextArea","$dps","dp","$els","not","submit","action","getList","compileTemplates","_i","_lists","list","template","isString","templates","is","getElement","getElements","selector","updateLists","rowindex","isNumber","confirm","querySelector","removeSpinner","fixId","multiple","prefix","actions","promises","_i2","_Object$entries","_Object$entries$_i","parents","parentFields","parent","ajax","isBoolean","pvalues","getOptionValues","updateOptions","Promise","resolve","reject","setTimeout","shift","AJAX_DELAY","all","then","trigger","catch","console","log","createAutoSuggest","settings","limit","AUTO_SUGGEST_MAX_ENTRIES","autoSuggestSettings","AutoSuggest","initEditors","ed","active","save","destroyEditor","destroy","onError","msg","initUpload","later","upload","setupFilters","filters","filterList","$sf","toggleClass","$df","$delete","$save","saveFilters","SEARCH_FILTER_OPTION","localStorage","setItem","JSON","stringify","$body","css","currentPage","dataType","success","always","off","on","prompt","prevAll","remove","$submenu","splice","insertBefore","TOKEN_NAME_KEY","TOKEN_NAME","ANTIFORGERY_TOKEN_KEY","ANTIFORGERY_TOKEN","IS_LOGGEDIN","IS_SYS_ADMIN","CURRENT_USER_NAME","item","getItem","parseJson","grep","show","hide","isSearch","hasFormData","collapse","text","change","substr","render","loadjs","ready","$tab","getAttribute","$panel","$container","width","CONFIRM_CANCEL","click","href","location","forms","add","Field","fldvar","validators","invalid","_defineProperty","validator","addValidator","addError","_this$_error","_error","_objectSpread2","clearErrors","clearValidators","_element","shouldValidate","updateFeedback","errorMessage","jQuery","setInvalid","focus","setFocus","from","_checkbox","_this$_element","_this$_element$id","Form","_this","_assertThisInitialized","_FormBase","addField","fields","getField","addFields","field","addCustomError","makeVisible","element","gotoPageByElement","$pane","validateFields","rowIndex","row","_Object$values","_i3","_Object$values2","AjaxLookup","elementId","formElement","m","pf","debounce","recordCount","formatResult","isAutoSuggest","jsRenderHelpers","displayValue","generateRequest","page","LANGUAGE_ID","getUserParams","arp","MULTIPLE_OPTION_SEPARATOR","getUrl","query","start","params","URLSearchParams","q","n","rnd","getApiUrl","API_LOOKUP_ACTION","prepare","transform","results","totalRecordCount","records","_isAutoSuggest","SelectionListOption","emptyObj","typeahead","timer","$input","minWidth","maxHeight","highlight","hint","minLength","delay","forceSelection","forceSelect","setValue","v","option","syncResults","asyncResults","cancel","count","menu","$node","more","ta","datasets","_append","scrollTop","$lastSuggestion","outerHeight","isOpen","empty","$item","getActiveSelectable","blur","tpl","async","$more","one","preventDefault","stopPropagation","$menu","$dataset","max-height","overflow-y","Forms","_forms","ids","_fixLayoutHeightTimer","currentUrl","URL","$document","_removeSpinner","initIcons","tooltip","container","IS_MOBILE","placement","sanitizeFn","initPasswordOptions","pStrength","MIN_PASSWORD_STRENGTH","changeBackground","backgrounds","passwordValidFrom","onPasswordStrengthChanged","strength","percentage","$pst","$pb","outerWidth","pct","pGenerator","passwordLength","GENERATE_PASSWORD_LENGTH","uppercase","GENERATE_PASSWORD_UPPERCASE","lowercase","GENERATE_PASSWORD_LOWERCASE","numbers","GENERATE_PASSWORD_NUMBER","specialChars","GENERATE_PASSWORD_SPECIALCHARS","onPasswordGenerated","pwd","triggerHandler","PATH_BASE","API_URL","USE_URL_REWRITE","route","encodeURIComponent","API_ACTION_NAME","qs","initExportLinks","fileDownload","initMultiSelectCheckboxes","$cbs","_update","win","jq","swal","Swal","doc","$doc","isHtml","fire","sweetAlertSettings","allowOutsideClick","allowEscapeKey","onBeforeOpen","showLoading","xhrFields","responseType","textStatus","jqXHR","createObjectURL","getResponseHeader","download","objectUrl","revokeObjectURL","fail","showValidationMessage","response","lazyLoad","LAZY_LOAD","initLightboxes","USE_COLORBOX","lightboxSettings","title","current","previous","xhrError","imgError","colorbox","rel","initPdfObjects","EMBED_PDF","PDFObjectOptions","PDFObject","embed","fallbackLink","initTooltips","popover","parse","_prompt","confirmButtonText","showCancelButton","isFunction","cancelButtonText","inputValidator","toast","toastOptions","Toasts","position","toUpperCase","substring","children","first","showToast","class","autohide","autoHideSuccessMessage","autoHideSuccessMessageDelay","$f","obj","parentId","isUndefined","childFields","promise","els","getId","$elf","typ","elf","_updateOptions","autoFillTargetFields","autoFill","fo","frmo","$obj","clearOptions","addOpt","valid","newOption","selectOption","_updateSibling","lookupOptions","ds","isModalLookup","root","convertToBool","sel","fobj","keySelected","_alert","serialize","isHiddenTextArea","isHidden","selectAll","setColor","$row","$tbl","ROWTYPE_ADD","ROWTYPE_EDIT","clearSelected","tbl","rows","r","$r","clearDelete","$tr","siblings","addBack","clickDelete","setupTable","force","$rows","tBodies","mouseOver","mouseOut","$target","cells","last","div","parentsUntil","RESPONSIVE_TABLE_CLASS","rowSpan","clientHeight","offsetHeight","attach","edit","sw","setupGrid","grid","$grid","USE_OVERLAY_SCROLLBARS","overlayScrollbars","overlayScrollbarsOptions","table","getAncestorBy","node","parentNode","nodeType","classList","contains","o1","o2","lookup","getOptionTexts","lo","hasAttribute","removeAll","valueSeparator","sep","df","isValue","optionHtml","OPTION_HTML_TEMPLATE","optionsHtml","MAX_OPTION_COUNT","frm","lf","df1","df2","df3","df4","innerHTML","selectedIndex","vals","opts","isAutoSelect","_ajaxStop","lastPageSubmit","executeScript","matches","matchAll","addScript","stripScript","scr","removeScript","getContent","getOptions","modalDialogHide","$dlg","removeData","$bd","ewjtable","unbind","className","reload","dest_array","destEl","v0","pid","post","$tt","trig","dir","CSS_FLIP","wd","$tip","getTipElement","object_value","checkDateEx","format","arDT","re","sYear","sMonth","sDay","wrksep","arD","unformatYear","checkDay","yr","UNFORMAT_YEAR","checkYear","checkMonth","maxDay","ts","THOUSANDS_SEP","DECIMAL_POINT","stringToFloat","parseFloat","str","min_value","max_value","isNull","TIME_SEPARATOR","showMessage","_arg$target","p","$div","$alert","$heading","detach","$content","w","$toast","redirect","sanitize","ajaxSend","event","jqxhr","apiUrl","isApi","allowed","hostname","API_JWT_TOKEN","IS_WINDOWS_AUTHENTICATION","API_JWT_AUTHORIZATION_HEADER","ajaxStart","addSpinner","ajaxStop","ajaxError","selectId","select2","amd","require","Utils","ResultsList","InfiniteScroll","HidePlaceholder","SelectOnClose","selectOptions","resultsAdapter","dropdown","columns","customOption","Decorate","Select2CustomOption","decorated","$results","displayMessage","escapeMarkup","clear","hideLoading","$message","message","sort","cols","$option","attrs","role","aria-selected","Element","msMatchesSelector","webkitMatchesSelector","_resultId","setAttribute","StoreData","getSelect2CustomOptionClass","iconClass","templateResult","placeholder","selectOnClose","term","processResults","pagination","minimumResultsForSearch","Infinity","timeoutTime","keepAliveTimer","counter","useKeepAlive","SESSION_KEEP_ALIVE_INTERVAL","IS_AUTOLOGIN","keepAlive","API_SESSION_ACTION","token","resetTimer","SESSION_TIMEOUT_COUNTDOWN","SESSION_TIMEOUT","timeout","timerInterval","showConfirmButton","timerProgressBar","setInterval","textContent","round","getTimerLeft","onClose","clearInterval","setTimer","dismiss","DismissReason","TIMEOUT_URL","keepAliveInterval","select","_positionDropdown","_resizeDropdown","$p","parm","$fld","$fld2","hasY","$cond","hasCond","$and","opr","$opr2","opr2","isBetween","isNullOpr","isNullOpr2","hideOpr2","hideX","hideY","divId","tmplId","classId","exportType","export","enabled","querySelectorAll","subtmpl","rowspan","childNodes","replaceWith","views","scripts","tmpl","$meta","PDF_STYLESHEET_FILENAME","PROJECT_STYLESHEET_FILENAME","responseText","customexport","searchParams","param","idx","infix","fld","bool","nelm","oelm","fnelm","srcElement","currentForm","isPost","isMultiple","_success","_submit","k","jquery","shiftKey","ctrlKey","$cb","$tpl","$lastrow","clone","suffix","$elkeycnt","keycnt","data-rowindex","attributes","after","scrollHeight","rowidx","keycntname","_delete","$keyact","addOptionDialog","_submitSuccess","_results","lnk","objName","API_OBJECT_NAME","modal","linkField","dfs","displayFields","ffs","filterFields","pfs","lfv","ff","txt","$lu","nv","arOpt","obj2","ar2","_results2","_results$error","description","_results3","failureMessage","_fail","status","statusText","btn","$btn","API_ADD_ACTION","filterFieldVars","keypress","which","nodeName","modalDialog","showing","size","_caption","$lnk","caption","_button","_always","_result$error","pathname","_current","view","footer","cf","ct","modalLookupDialog","_timer","$search","oid","_format","setAutoSuggest","txts","useText","srch","record","arLinkValue","linkValue","paging","pageSize","pageSizes","pageSizeChangeArea","pageList","selecting","selectingCheckboxes","multiselect","listAction","postData","jtParams","recperpage","messages","serverCommunicationError","loadingMessage","spinnerClass","noDataAvailable","pagingInfo","pageSizeChangeLabel","gotoPageLabel","recordsLoaded","selectedRows","selectionChanged","toggle","LOOKUP_DELAY","sv","importDialog","$data","$progress","classname","$msg","hideMessage","showProgress","pc","updateProgress","tcnt","totalCount","importProgress","API_PROGRESS_ACTION","API_FILE_TOKEN_NAME","importComplete","fileResults","fileResult","scnt","successCount","fcnt","failCount","showLog","failList","ecnt","importFail","formData","session","SESSION_ID","importUploadOptions","acceptFileTypes","IMPORT_FILE_ALLOWED_EXT","fileupload","API_UPLOAD_ACTION","autoUpload","singleFileUploads","maxFileSize","maxNumberOfFiles","minFileSize","importfiles","ok","filetoken","beforeSend","xhr","importFiles","processfail","errorThrown","progressall","loaded","total","uploadProgress","hdr","emailDialog","Validators","emails","MAX_EMAIL_RECIPIENT","exportid","exportWithCharts","arUrl","pos","height","ypos","offset","top","pageY","xpos","left","pageX","drillDownCharts","cht","dispose","_convert","responseJSON","creditcard_string","tempdigit","doubledigit","checkdigit","charAt","email_cnt","arEmails","nid","readonly","$ft","$fn","$fa","$fs","$exts","$maxsize","$maxfilecount","$label","label","_confirmDelete","_downloadTemplate","_uploadTemplate","uploadUrl","API_JQUERY_UPLOAD_ACTION","exts","maxsize","maxfilecount","multipart","loadImageFileTypes","loadVideoFileTypes","loadAudioFileTypes","filesContainer","uploadTemplateId","downloadTemplateId","uploadTemplate","downloadTemplate","previewMaxWidth","UPLOAD_THUMBNAIL_WIDTH","previewMaxHeight","UPLOAD_THUMBNAIL_HEIGHT","dropZone","pasteZone","readOnly","MULTIPLE_UPLOAD_SEPARATOR","originalEvent","fid","_data$files","l","_data$files2","_data$result","_data$result$files","_data$files3","context","updateDropdownPosition","Event","config","regexBits","separator","thousandsSeparator","decimalSeparator","decimal","isFinite","decIndex","newOutput","isNeg","output","decPlaces","decimalPlaces","decSep","thouSep","toFixed","lastIndexOf","makeArray","def","timesep","moment","$tables","initGridPanel","renderJsTemplates","initForms","adminlte","Treeview","_jQueryInterface","$window","IS_SCREEN_SM_MIN","$rpt","mh","toggleGroup","USE_JAVASCRIPT_MESSAGE","currentTarget","$i","exportId","exportUrl","now","exp","exportCharts","charts","toBase64Image","chart_engine","stream_type","stream","parameters","API_EXPORT_CHART_ACTION","alert","layout","fixLayoutHeight","tblVar","events","fldVar","matchMedia","MOBILE_DETECT","MobileDetect","userAgent","mobile","IS_IE","MultiPage","formid","formID","pageIndex","maxPageIndex","minPageIndex","pageIndexes","$pages","$collapses","isTab","isCollapse","hideDisabledButton","hideInactivePages","lockTabs","hideTabs","showPagerTop","showPagerBottom","pagerTemplate","_show","_properties","before","pageShow","gotoPage","$page","eq","gotoPageByIndex","gotoPageByElementId","togglePage","$tabs","googleMaps","google","maps","setCenter","$bodies","functions","debugMode","DEBUG","setSessionTimer","initPage","hash","animate","zIndex","extend","isDate","when","periodic","interval","clearTimeout","rec","visible","toNumber","parseNumber","toDate","parseDate","toJsDate","_toggle","$relativeTarget","treeviewMenu","$text"],"mappings":"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","sourcesContent":["var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line no-undef\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func\n  Function('return this')();\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","var fails = require('../internals/fails');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !fails(function () {\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n","'use strict';\nvar nativePropertyIsEnumerable = {}.propertyIsEnumerable;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !nativePropertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.github.io/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : nativePropertyIsEnumerable;\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","var fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar split = ''.split;\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins\n  return !Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split.call(it, '') : Object(it);\n} : Object;\n","// `RequireObjectCoercible` abstract operation\n// https://tc39.github.io/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","var isObject = require('../internals/is-object');\n\n// `ToPrimitive` abstract operation\n// https://tc39.github.io/ecma262/#sec-toprimitive\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (input, PREFERRED_STRING) {\n  if (!isObject(input)) return input;\n  var fn, val;\n  if (PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (typeof (fn = input.valueOf) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (!PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var hasOwnProperty = {}.hasOwnProperty;\n\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPrimitive = require('../internals/to-primitive');\nvar has = require('../internals/has');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\nvar nativeGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? nativeGetOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return nativeGetOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (has(O, P)) return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O, P), O[P]);\n};\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it)) {\n    throw TypeError(String(it) + ' is not an object');\n  } return it;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar anObject = require('../internals/an-object');\nvar toPrimitive = require('../internals/to-primitive');\n\nvar nativeDefineProperty = Object.defineProperty;\n\n// `Object.defineProperty` method\n// https://tc39.github.io/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? nativeDefineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return nativeDefineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nmodule.exports = function (key, value) {\n  try {\n    createNonEnumerableProperty(global, key, value);\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","var global = require('../internals/global');\nvar setGlobal = require('../internals/set-global');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || setGlobal(SHARED, {});\n\nmodule.exports = store;\n","var store = require('../internals/shared-store');\n\nvar functionToString = Function.toString;\n\n// this helper broken in `3.4.1-3.4.4`, so we can't use `shared` helper\nif (typeof store.inspectSource != 'function') {\n  store.inspectSource = function (it) {\n    return functionToString.call(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","var NATIVE_WEAK_MAP = require('../internals/native-weak-map');\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar objectHas = require('../internals/has');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP) {\n  var store = new WeakMap();\n  var wmget = store.get;\n  var wmhas = store.has;\n  var wmset = store.set;\n  set = function (it, metadata) {\n    wmset.call(store, it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return wmget.call(store, it) || {};\n  };\n  has = function (it) {\n    return wmhas.call(store, it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return objectHas(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return objectHas(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","var global = require('../internals/global');\nvar inspectSource = require('../internals/inspect-source');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = typeof WeakMap === 'function' && /native code/.test(inspectSource(WeakMap));\n","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.6.5',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2020 Denis Pushkarev (zloirock.ru)'\n});\n","var id = 0;\nvar postfix = Math.random();\n\nmodule.exports = function (key) {\n  return 'Symbol(' + String(key === undefined ? '' : key) + ')_' + (++id + postfix).toString(36);\n};\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","module.exports = {};\n","var anObject = require('../internals/an-object');\nvar defineProperties = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    /* global ActiveXObject */\n    activeXDocument = document.domain && new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = activeXDocument ? NullProtoObjectViaActiveX(activeXDocument) : NullProtoObjectViaIFrame();\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.github.io/ecma262/#sec-object.create\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : defineProperties(result, Properties);\n};\n","var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\nvar setGlobal = require('../internals/set-global');\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar getInternalState = InternalStateModule.get;\nvar enforceInternalState = InternalStateModule.enforce;\nvar TEMPLATE = String(String).split('String');\n\n(module.exports = function (O, key, value, options) {\n  var unsafe = options ? !!options.unsafe : false;\n  var simple = options ? !!options.enumerable : false;\n  var noTargetGet = options ? !!options.noTargetGet : false;\n  if (typeof value == 'function') {\n    if (typeof key == 'string' && !has(value, 'name')) createNonEnumerableProperty(value, 'name', key);\n    enforceInternalState(value).source = TEMPLATE.join(typeof key == 'string' ? key : '');\n  }\n  if (O === global) {\n    if (simple) O[key] = value;\n    else setGlobal(key, value);\n    return;\n  } else if (!unsafe) {\n    delete O[key];\n  } else if (!noTargetGet && O[key]) {\n    simple = true;\n  }\n  if (simple) O[key] = value;\n  else createNonEnumerableProperty(O, key, value);\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, 'toString', function toString() {\n  return typeof this == 'function' && getInternalState(this).source || inspectSource(this);\n});\n","var global = require('../internals/global');\n\nmodule.exports = global;\n","var path = require('../internals/path');\nvar global = require('../internals/global');\n\nvar aFunction = function (variable) {\n  return typeof variable == 'function' ? variable : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(path[namespace]) || aFunction(global[namespace])\n    : path[namespace] && path[namespace][method] || global[namespace] && global[namespace][method];\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `ToInteger` abstract operation\n// https://tc39.github.io/ecma262/#sec-tointeger\nmodule.exports = function (argument) {\n  return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil)(argument);\n};\n","var toInteger = require('../internals/to-integer');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.github.io/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toInteger(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","var toInteger = require('../internals/to-integer');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toInteger(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toLength = require('../internals/to-length');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","var has = require('../internals/has');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !has(hiddenKeys, key) && has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~indexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertynames\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","exports.f = Object.getOwnPropertySymbols;\n","var getBuiltIn = require('../internals/get-built-in');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? keys.concat(getOwnPropertySymbols(it)) : keys;\n};\n","var has = require('../internals/has');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!has(target, key)) defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n  }\n};\n","var fails = require('../internals/fails');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : typeof detection == 'function' ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar setGlobal = require('../internals/set-global');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target      - name of the target object\n  options.global      - target is the global object\n  options.stat        - export as static methods of target\n  options.proto       - export as prototype methods of target\n  options.real        - real prototype method for the `pure` version\n  options.forced      - export even if the native feature is available\n  options.bind        - bind methods to the target, required for the `pure` version\n  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n  options.sham        - add a flag to not completely full polyfills\n  options.enumerable  - export as enumerable property\n  options.noTargetGet - prevent calling a getter on target\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || setGlobal(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.noTargetGet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty === typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    // extend global\n    redefine(target, key, sourceProperty, options);\n  }\n};\n","var aFunction = require('../internals/a-function');\n\n// optional / simple context binding\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 0: return function () {\n      return fn.call(that);\n    };\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","module.exports = function (it) {\n  if (typeof it != 'function') {\n    throw TypeError(String(it) + ' is not a function');\n  } return it;\n};\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `ToObject` abstract operation\n// https://tc39.github.io/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return Object(requireObjectCoercible(argument));\n};\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.github.io/ecma262/#sec-isarray\nmodule.exports = Array.isArray || function isArray(arg) {\n  return classof(arg) == 'Array';\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  // Chrome 38 Symbol has incorrect toString conversion\n  // eslint-disable-next-line no-undef\n  return !String(Symbol());\n});\n","var NATIVE_SYMBOL = require('../internals/native-symbol');\n\nmodule.exports = NATIVE_SYMBOL\n  // eslint-disable-next-line no-undef\n  && !Symbol.sham\n  // eslint-disable-next-line no-undef\n  && typeof Symbol.iterator == 'symbol';\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar has = require('../internals/has');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!has(WellKnownSymbolsStore, name)) {\n    if (NATIVE_SYMBOL && has(Symbol, name)) WellKnownSymbolsStore[name] = Symbol[name];\n    else WellKnownSymbolsStore[name] = createWellKnownSymbol('Symbol.' + name);\n  } return WellKnownSymbolsStore[name];\n};\n","var isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.github.io/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return new (C === undefined ? Array : C)(length === 0 ? 0 : length);\n};\n","var bind = require('../internals/function-bind-context');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar push = [].push;\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push.call(target, value); // filter\n        } else if (IS_EVERY) return false;  // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6)\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.github.io/ecma262/#sec-object.keys\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.github.io/ecma262/#sec-object.defineproperties\nmodule.exports = DESCRIPTORS ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], Properties[key]);\n  return O;\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar definePropertyModule = require('../internals/object-define-property');\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  definePropertyModule.f(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar has = require('../internals/has');\n\nvar defineProperty = Object.defineProperty;\nvar cache = {};\n\nvar thrower = function (it) { throw it; };\n\nmodule.exports = function (METHOD_NAME, options) {\n  if (has(cache, METHOD_NAME)) return cache[METHOD_NAME];\n  if (!options) options = {};\n  var method = [][METHOD_NAME];\n  var ACCESSORS = has(options, 'ACCESSORS') ? options.ACCESSORS : false;\n  var argument0 = has(options, 0) ? options[0] : thrower;\n  var argument1 = has(options, 1) ? options[1] : undefined;\n\n  return cache[METHOD_NAME] = !!method && !fails(function () {\n    if (ACCESSORS && !DESCRIPTORS) return true;\n    var O = { length: -1 };\n\n    if (ACCESSORS) defineProperty(O, 1, { enumerable: true, get: thrower });\n    else O[1] = 1;\n\n    method.call(O, argument0, argument1);\n  });\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength(FIND_INDEX);\n\n// Shouldn't skip holes\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES || !USES_TO_LENGTH }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n","'use strict';\nvar $ = require('../internals/export');\nvar $includes = require('../internals/array-includes').includes;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.includes` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true, forced: !USES_TO_LENGTH }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar objectKeys = require('../internals/object-keys');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\n\nvar nativeAssign = Object.assign;\nvar defineProperty = Object.defineProperty;\n\n// `Object.assign` method\n// https://tc39.github.io/ecma262/#sec-object.assign\nmodule.exports = !nativeAssign || fails(function () {\n  // should have correct order of operations (Edge bug)\n  if (DESCRIPTORS && nativeAssign({ b: 1 }, nativeAssign(defineProperty({}, 'a', {\n    enumerable: true,\n    get: function () {\n      defineProperty(this, 'b', {\n        value: 3,\n        enumerable: false\n      });\n    }\n  }), { b: 2 })).b !== 1) return true;\n  // should work with symbols and should have deterministic property order (V8 bug)\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var symbol = Symbol();\n  var alphabet = 'abcdefghijklmnopqrst';\n  A[symbol] = 7;\n  alphabet.split('').forEach(function (chr) { B[chr] = chr; });\n  return nativeAssign({}, A)[symbol] != 7 || objectKeys(nativeAssign({}, B)).join('') != alphabet;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var argumentsLength = arguments.length;\n  var index = 1;\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  var propertyIsEnumerable = propertyIsEnumerableModule.f;\n  while (argumentsLength > index) {\n    var S = IndexedObject(arguments[index++]);\n    var keys = getOwnPropertySymbols ? objectKeys(S).concat(getOwnPropertySymbols(S)) : objectKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS || propertyIsEnumerable.call(S, key)) T[key] = S[key];\n    }\n  } return T;\n} : nativeAssign;\n","var $ = require('../internals/export');\nvar assign = require('../internals/object-assign');\n\n// `Object.assign` method\n// https://tc39.github.io/ecma262/#sec-object.assign\n$({ target: 'Object', stat: true, forced: Object.assign !== assign }, {\n  assign: assign\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar objectKeys = require('../internals/object-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar propertyIsEnumerable = require('../internals/object-property-is-enumerable').f;\n\n// `Object.{ entries, values }` methods implementation\nvar createMethod = function (TO_ENTRIES) {\n  return function (it) {\n    var O = toIndexedObject(it);\n    var keys = objectKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || propertyIsEnumerable.call(O, key)) {\n        result.push(TO_ENTRIES ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n\nmodule.exports = {\n  // `Object.entries` method\n  // https://tc39.github.io/ecma262/#sec-object.entries\n  entries: createMethod(true),\n  // `Object.values` method\n  // https://tc39.github.io/ecma262/#sec-object.values\n  values: createMethod(false)\n};\n","var $ = require('../internals/export');\nvar $entries = require('../internals/object-to-array').entries;\n\n// `Object.entries` method\n// https://tc39.github.io/ecma262/#sec-object.entries\n$({ target: 'Object', stat: true }, {\n  entries: function entries(O) {\n    return $entries(O);\n  }\n});\n","var $ = require('../internals/export');\nvar $values = require('../internals/object-to-array').values;\n\n// `Object.values` method\n// https://tc39.github.io/ecma262/#sec-object.values\n$({ target: 'Object', stat: true }, {\n  values: function values(O) {\n    return $values(O);\n  }\n});\n","var isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\n// `IsRegExp` abstract operation\n// https://tc39.github.io/ecma262/#sec-isregexp\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) == 'RegExp');\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar toLength = require('../internals/to-length');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\nvar IS_PURE = require('../internals/is-pure');\n\nvar nativeEndsWith = ''.endsWith;\nvar min = Math.min;\n\nvar CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic('endsWith');\n// https://github.com/zloirock/core-js/pull/702\nvar MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!function () {\n  var descriptor = getOwnPropertyDescriptor(String.prototype, 'endsWith');\n  return descriptor && !descriptor.writable;\n}();\n\n// `String.prototype.endsWith` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.endswith\n$({ target: 'String', proto: true, forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC }, {\n  endsWith: function endsWith(searchString /* , endPosition = @length */) {\n    var that = String(requireObjectCoercible(this));\n    notARegExp(searchString);\n    var endPosition = arguments.length > 1 ? arguments[1] : undefined;\n    var len = toLength(that.length);\n    var end = endPosition === undefined ? len : min(toLength(endPosition), len);\n    var search = String(searchString);\n    return nativeEndsWith\n      ? nativeEndsWith.call(that, search, end)\n      : that.slice(end - search.length, end) === search;\n  }\n});\n","var isRegExp = require('../internals/is-regexp');\n\nmodule.exports = function (it) {\n  if (isRegExp(it)) {\n    throw TypeError(\"The method doesn't accept regular expressions\");\n  } return it;\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\nmodule.exports = function (METHOD_NAME) {\n  var regexp = /./;\n  try {\n    '/./'[METHOD_NAME](regexp);\n  } catch (e) {\n    try {\n      regexp[MATCH] = false;\n      return '/./'[METHOD_NAME](regexp);\n    } catch (f) { /* empty */ }\n  } return false;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\n\n// `String.prototype.includes` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.includes\n$({ target: 'String', proto: true, forced: !correctIsRegExpLogic('includes') }, {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~String(requireObjectCoercible(this))\n      .indexOf(notARegExp(searchString), arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar toLength = require('../internals/to-length');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\nvar IS_PURE = require('../internals/is-pure');\n\nvar nativeStartsWith = ''.startsWith;\nvar min = Math.min;\n\nvar CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic('startsWith');\n// https://github.com/zloirock/core-js/pull/702\nvar MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!function () {\n  var descriptor = getOwnPropertyDescriptor(String.prototype, 'startsWith');\n  return descriptor && !descriptor.writable;\n}();\n\n// `String.prototype.startsWith` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.startswith\n$({ target: 'String', proto: true, forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC }, {\n  startsWith: function startsWith(searchString /* , position = 0 */) {\n    var that = String(requireObjectCoercible(this));\n    notARegExp(searchString);\n    var index = toLength(min(arguments.length > 1 ? arguments[1] : undefined, that.length));\n    var search = String(searchString);\n    return nativeStartsWith\n      ? nativeStartsWith.call(that, search, index)\n      : that.slice(index, index + search.length) === search;\n  }\n});\n","/* global FormData self Blob File */\r\n/* eslint-disable no-inner-declarations */\r\n\r\nif (typeof Blob !== 'undefined' && (typeof FormData === 'undefined' || !FormData.prototype.keys)) {\r\n  const global = typeof window === 'object'\r\n    ? window\r\n    : typeof self === 'object' ? self : this\r\n\r\n  // keep a reference to native implementation\r\n  const _FormData = global.FormData\r\n\r\n  // To be monkey patched\r\n  const _send = global.XMLHttpRequest && global.XMLHttpRequest.prototype.send\r\n  const _fetch = global.Request && global.fetch\r\n  const _sendBeacon = global.navigator && global.navigator.sendBeacon\r\n\r\n  // Unable to patch Request constructor correctly\r\n  // const _Request = global.Request\r\n  // only way is to use ES6 class extend\r\n  // https://github.com/babel/babel/issues/1966\r\n\r\n  const stringTag = global.Symbol && Symbol.toStringTag\r\n\r\n  // Add missing stringTags to blob and files\r\n  if (stringTag) {\r\n    if (!Blob.prototype[stringTag]) {\r\n      Blob.prototype[stringTag] = 'Blob'\r\n    }\r\n\r\n    if ('File' in global && !File.prototype[stringTag]) {\r\n      File.prototype[stringTag] = 'File'\r\n    }\r\n  }\r\n\r\n  // Fix so you can construct your own File\r\n  try {\r\n    new File([], '') // eslint-disable-line\r\n  } catch (a) {\r\n    global.File = function File (b, d, c) {\r\n      const blob = new Blob(b, c)\r\n      const t = c && void 0 !== c.lastModified ? new Date(c.lastModified) : new Date()\r\n\r\n      Object.defineProperties(blob, {\r\n        name: {\r\n          value: d\r\n        },\r\n        lastModifiedDate: {\r\n          value: t\r\n        },\r\n        lastModified: {\r\n          value: +t\r\n        },\r\n        toString: {\r\n          value () {\r\n            return '[object File]'\r\n          }\r\n        }\r\n      })\r\n\r\n      if (stringTag) {\r\n        Object.defineProperty(blob, stringTag, {\r\n          value: 'File'\r\n        })\r\n      }\r\n\r\n      return blob\r\n    }\r\n  }\r\n\r\n  function normalizeValue ([value, filename]) {\r\n    if (value instanceof Blob) {\r\n      // Should always returns a new File instance\r\n      // console.assert(fd.get(x) !== fd.get(x))\r\n      value = new File([value], filename, {\r\n        type: value.type,\r\n        lastModified: value.lastModified\r\n      })\r\n    }\r\n\r\n    return value\r\n  }\r\n\r\n  function ensureArgs (args, expected) {\r\n    if (args.length < expected) {\r\n      throw new TypeError(`${expected} argument required, but only ${args.length} present.`)\r\n    }\r\n  }\r\n\r\n  function normalizeArgs (name, value, filename) {\r\n    return value instanceof Blob\r\n      // normalize name and filename if adding an attachment\r\n      ? [String(name), value, filename !== undefined\r\n        ? filename + '' // Cast filename to string if 3th arg isn't undefined\r\n        : typeof value.name === 'string' // if name prop exist\r\n          ? value.name // Use File.name\r\n          : 'blob'] // otherwise fallback to Blob\r\n\r\n      // If no attachment, just cast the args to strings\r\n      : [String(name), String(value)]\r\n  }\r\n\r\n  // normalize linefeeds for textareas\r\n  // https://html.spec.whatwg.org/multipage/form-elements.html#textarea-line-break-normalisation-transformation\r\n  function normalizeLinefeeds (value) {\r\n    return value.replace(/\\r\\n/g, '\\n').replace(/\\n/g, '\\r\\n')\r\n  }\r\n\r\n  function each (arr, cb) {\r\n    for (let i = 0; i < arr.length; i++) {\r\n      cb(arr[i])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @implements {Iterable}\r\n   */\r\n  class FormDataPolyfill {\r\n    /**\r\n     * FormData class\r\n     *\r\n     * @param {HTMLElement=} form\r\n     */\r\n    constructor (form) {\r\n      this._data = Object.create(null)\r\n\r\n      if (!form) return this\r\n\r\n      const self = this\r\n\r\n      each(form.elements, elm => {\r\n        if (!elm.name || elm.disabled || elm.type === 'submit' || elm.type === 'button') return\r\n\r\n        if (elm.type === 'file') {\r\n          const files = elm.files && elm.files.length\r\n            ? elm.files\r\n            : [new File([], '', { type: 'application/octet-stream' })] // #78\r\n\r\n          each(files, file => {\r\n            self.append(elm.name, file)\r\n          })\r\n        } else if (elm.type === 'select-multiple' || elm.type === 'select-one') {\r\n          each(elm.options, opt => {\r\n            !opt.disabled && opt.selected && self.append(elm.name, opt.value)\r\n          })\r\n        } else if (elm.type === 'checkbox' || elm.type === 'radio') {\r\n          if (elm.checked) self.append(elm.name, elm.value)\r\n        } else {\r\n          const value = elm.type === 'textarea' ? normalizeLinefeeds(elm.value) : elm.value\r\n          self.append(elm.name, value)\r\n        }\r\n      })\r\n    }\r\n\r\n    /**\r\n     * Append a field\r\n     *\r\n     * @param   {string}           name      field name\r\n     * @param   {string|Blob|File} value     string / blob / file\r\n     * @param   {string=}          filename  filename to use with blob\r\n     * @return  {undefined}\r\n     */\r\n    append (name, value, filename) {\r\n      ensureArgs(arguments, 2)\r\n      ;[name, value, filename] = normalizeArgs.apply(null, arguments)\r\n      const map = this._data\r\n\r\n      if (!map[name]) map[name] = []\r\n\r\n      map[name].push([value, filename])\r\n    }\r\n\r\n    /**\r\n     * Delete all fields values given name\r\n     *\r\n     * @param   {string}  name  Field name\r\n     * @return  {undefined}\r\n     */\r\n    delete (name) {\r\n      ensureArgs(arguments, 1)\r\n      delete this._data[String(name)]\r\n    }\r\n\r\n    /**\r\n     * Iterate over all fields as [name, value]\r\n     *\r\n     * @return {Iterator}\r\n     */\r\n    * entries () {\r\n      const map = this._data\r\n\r\n      for (const name in map) {\r\n        for (const value of map[name]) {\r\n          yield [name, normalizeValue(value)]\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Iterate over all fields\r\n     *\r\n     * @param   {Function}  callback  Executed for each item with parameters (value, name, thisArg)\r\n     * @param   {Object=}   thisArg   `this` context for callback function\r\n     * @return  {undefined}\r\n     */\r\n    forEach (callback, thisArg) {\r\n      ensureArgs(arguments, 1)\r\n      for (const [name, value] of this) {\r\n        callback.call(thisArg, value, name, this)\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Return first field value given name\r\n     * or null if non existen\r\n     *\r\n     * @param   {string}  name      Field name\r\n     * @return  {string|File|null}  value Fields value\r\n     */\r\n    get (name) {\r\n      ensureArgs(arguments, 1)\r\n      const map = this._data\r\n      name = String(name)\r\n      return map[name] ? normalizeValue(map[name][0]) : null\r\n    }\r\n\r\n    /**\r\n     * Return all fields values given name\r\n     *\r\n     * @param   {string}  name  Fields name\r\n     * @return  {Array}         [{String|File}]\r\n     */\r\n    getAll (name) {\r\n      ensureArgs(arguments, 1)\r\n      return (this._data[String(name)] || []).map(normalizeValue)\r\n    }\r\n\r\n    /**\r\n     * Check for field name existence\r\n     *\r\n     * @param   {string}   name  Field name\r\n     * @return  {boolean}\r\n     */\r\n    has (name) {\r\n      ensureArgs(arguments, 1)\r\n      return String(name) in this._data\r\n    }\r\n\r\n    /**\r\n     * Iterate over all fields name\r\n     *\r\n     * @return {Iterator}\r\n     */\r\n    * keys () {\r\n      for (const [name] of this) {\r\n        yield name\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Overwrite all values given name\r\n     *\r\n     * @param   {string}    name      Filed name\r\n     * @param   {string}    value     Field value\r\n     * @param   {string=}   filename  Filename (optional)\r\n     * @return  {undefined}\r\n     */\r\n    set (name, value, filename) {\r\n      ensureArgs(arguments, 2)\r\n      const args = normalizeArgs.apply(null, arguments)\r\n      this._data[args[0]] = [[args[1], args[2]]]\r\n    }\r\n\r\n    /**\r\n     * Iterate over all fields\r\n     *\r\n     * @return {Iterator}\r\n     */\r\n    * values () {\r\n      for (const [, value] of this) {\r\n        yield value\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Return a native (perhaps degraded) FormData with only a `append` method\r\n     * Can throw if it's not supported\r\n     *\r\n     * @return {FormData}\r\n     */\r\n    ['_asNative'] () {\r\n      const fd = new _FormData()\r\n\r\n      for (const [name, value] of this) {\r\n        fd.append(name, value)\r\n      }\r\n\r\n      return fd\r\n    }\r\n\r\n    /**\r\n     * [_blob description]\r\n     *\r\n     * @return {Blob} [description]\r\n     */\r\n    ['_blob'] () {\r\n      const boundary = '----formdata-polyfill-' + Math.random()\r\n      const chunks = []\r\n\r\n      for (const [name, value] of this) {\r\n        chunks.push(`--${boundary}\\r\\n`)\r\n\r\n        if (value instanceof Blob) {\r\n          chunks.push(\r\n            `Content-Disposition: form-data; name=\"${name}\"; filename=\"${value.name}\"\\r\\n`,\r\n            `Content-Type: ${value.type || 'application/octet-stream'}\\r\\n\\r\\n`,\r\n            value,\r\n            '\\r\\n'\r\n          )\r\n        } else {\r\n          chunks.push(\r\n            `Content-Disposition: form-data; name=\"${name}\"\\r\\n\\r\\n${value}\\r\\n`\r\n          )\r\n        }\r\n      }\r\n\r\n      chunks.push(`--${boundary}--`)\r\n\r\n      return new Blob(chunks, {\r\n        type: 'multipart/form-data; boundary=' + boundary\r\n      })\r\n    }\r\n\r\n    /**\r\n     * The class itself is iterable\r\n     * alias for formdata.entries()\r\n     *\r\n     * @return  {Iterator}\r\n     */\r\n    [Symbol.iterator] () {\r\n      return this.entries()\r\n    }\r\n\r\n    /**\r\n     * Create the default string description.\r\n     *\r\n     * @return  {string} [object FormData]\r\n     */\r\n    toString () {\r\n      return '[object FormData]'\r\n    }\r\n  }\r\n\r\n  if (stringTag) {\r\n    /**\r\n     * Create the default string description.\r\n     * It is accessed internally by the Object.prototype.toString().\r\n     */\r\n    FormDataPolyfill.prototype[stringTag] = 'FormData'\r\n  }\r\n\r\n  // Patch xhr's send method to call _blob transparently\r\n  if (_send) {\r\n    const setRequestHeader = global.XMLHttpRequest.prototype.setRequestHeader\r\n\r\n    /**\r\n     * @param {string} name\r\n     * @param {string} value\r\n     * @returns {undefined}\r\n     * @see https://xhr.spec.whatwg.org/#dom-xmlhttprequest-setrequestheader\r\n     */\r\n    global.XMLHttpRequest.prototype.setRequestHeader = function (name, value) {\r\n      setRequestHeader.call(this, name, value)\r\n      if (name.toLowerCase() === 'content-type') this._hasContentType = true\r\n    }\r\n\r\n    /**\r\n     * @param {ArrayBuffer|ArrayBufferView|Blob|Document|FormData|string=} data\r\n     * @return {undefined}\r\n     * @see https://xhr.spec.whatwg.org/#the-send()-method\r\n     */\r\n    global.XMLHttpRequest.prototype.send = function (data) {\r\n      // need to patch send b/c old IE don't send blob's type (#44)\r\n      if (data instanceof FormDataPolyfill) {\r\n        const blob = data['_blob']()\r\n        if (!this._hasContentType) this.setRequestHeader('Content-Type', blob.type)\r\n        _send.call(this, blob)\r\n      } else {\r\n        _send.call(this, data)\r\n      }\r\n    }\r\n  }\r\n\r\n  // Patch fetch's function to call _blob transparently\r\n  if (_fetch) {\r\n    const _fetch = global.fetch\r\n\r\n    global.fetch = function (input, init) {\r\n      if (init && init.body && init.body instanceof FormDataPolyfill) {\r\n        init.body = init.body['_blob']()\r\n      }\r\n\r\n      return _fetch.call(this, input, init)\r\n    }\r\n  }\r\n\r\n  // Patch navigator.sendBeacon to use native FormData\r\n  if (_sendBeacon) {\r\n    global.navigator.sendBeacon = function (url, data) {\r\n      if (data instanceof FormDataPolyfill) {\r\n        data = data['_asNative']()\r\n      }\r\n      return _sendBeacon.call(this, url, data)\r\n    }\r\n  }\r\n\r\n  global['FormData'] = FormDataPolyfill\r\n}\r\n","import $ from 'jquery';\r\n\r\n/**\r\n * User level ID validator\r\n */\r\nexport function userLevelId(el) {\r\n    if (el && !ew.checkInteger(el.value))\r\n        return { userLevelId: ew.language.phrase(\"UserLevelIDInteger\") };\r\n    var level = parseInt(el.value, 10);\r\n    if (level < 1)\r\n        return { userLevelId: ew.language.phrase(\"UserLevelIDIncorrect\") };\r\n    return false;\r\n}\r\n\r\n/**\r\n * User level name validator\r\n * @param {string} id User ID Field input element ID\r\n */\r\nexport function userLevelName(id) {\r\n    return function(el) {\r\n        let elId = document.getElementById(\"x_\" + id);\r\n        if (elId && el) {\r\n            let name = el.value.trim(),\r\n                level = parseInt(elId.value.trim(), 10);\r\n            if (level === 0 && !ew.sameText(name, \"Default\")) {\r\n                return { userLevelName: ew.language.phrase(\"UserLevelDefaultName\") };\r\n            } else if (level === -1 && !ew.sameText(name, \"Administrator\")) {\r\n                return { userLevelName: ew.language.phrase(\"UserLevelAdministratorName\") };\r\n            } else if (level === -2 && !ew.sameText(name, \"Anonymous\")) {\r\n                return { userLevelName: ew.language.phrase(\"UserLevelAnonymousName\") };\r\n            } else if (level > 0 && [\"anonymous\", \"administrator\", \"default\"].includes(name.toLowerCase())) {\r\n                return { userLevelName: ew.language.phrase(\"UserLevelNameIncorrect\") };\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n}\r\n\r\n/**\r\n * Required validator\r\n */\r\nexport function required(fieldName) {\r\n    return function(el) {\r\n        if (el && !ew.hasValue(el)) {\r\n            return { required: ew.language.phrase(\"EnterRequiredField\").replace(\"%s\", fieldName) };\r\n        }\r\n        return false;\r\n    }\r\n}\r\n\r\n/**\r\n * File required validator\r\n */\r\nexport function fileRequired(fieldName) {\r\n    return function(el) {\r\n        let elFn = document.getElementById(\"fn_\" + el.id);\r\n        if (elFn && !ew.hasValue(elFn)) {\r\n            return { fileRequired: ew.language.phrase(\"EnterRequiredField\").replace(\"%s\", fieldName) };\r\n        }\r\n        return false;\r\n    }\r\n}\r\n\r\n/**\r\n * Mismatch password validator\r\n */\r\nexport function mismatchPassword(el) {\r\n    let id;\r\n    if (el.id.startsWith(\"c_\")) // Confirm Password field in Register page\r\n        id = el.id.replace(/^c_/, \"x_\");\r\n    else if (el.id == \"cpwd\") // Change Password page\r\n        id = \"npwd\";\r\n    let elPwd = document.getElementById(id);\r\n    if (el.value !== elPwd.value) {\r\n        return { mismatchPassword: ew.language.phrase(\"MismatchPassword\") };\r\n    }\r\n    return false;\r\n}\r\n\r\n/**\r\n * Between validator\r\n */\r\nexport function between(el) {\r\n    let x, z;\r\n    if (el.id.startsWith(\"y_\")) {\r\n        x = document.getElementById(el.id.replace(/^y_/, \"x_\"));\r\n        z = document.getElementById(el.id.replace(/^y_/, \"z_\"));\r\n    }\r\n    if (ew.hasValue(x) && $(z).val() == \"BETWEEN\" && !ew.hasValue(el)) {\r\n        return { between: ew.language.phrase(\"EnterValue2\") };\r\n    }\r\n    return false;\r\n}\r\n\r\n/**\r\n * Password strength validator\r\n */\r\nexport function passwordStrength(el) {\r\n    let $el = $(el);\r\n    if ($el.hasClass(\"ew-password-strength\") && !$el.data(\"validated\")) {\r\n        return { passwordStrength: ew.language.phrase(\"PasswordTooSimple\") };\r\n    }\r\n    return false;\r\n}\r\n\r\n/**\r\n * User name validator\r\n */\r\nexport function username(raw) {\r\n    return function(el) {\r\n        if (!raw && el.value.match(new RegExp('[' + ew.escapeRegExChars(ew.INVALID_USERNAME_CHARACTERS) + ']')))\r\n            return { username: ew.language.phrase(\"InvalidUsernameChars\") };\r\n        return false;\r\n    }\r\n}\r\n\r\n/**\r\n * Password validator\r\n */\r\nexport function password(raw) {\r\n    return function(el) {\r\n        if (!raw && !ew.ENCRYPTED_PASSWORD && el.value.match(new RegExp('[' + ew.escapeRegExChars(ew.INVALID_PASSWORD_CHARACTERS) + ']')))\r\n            return { password: ew.language.phrase(\"InvalidPasswordChars\") };\r\n        return false;\r\n    }\r\n}\r\n\r\n/**\r\n * Email validator\r\n */\r\nexport function email(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkEmail(value)) {\r\n        return { email: ew.language.phrase(\"IncorrectEmail\") };\r\n    }\r\n    return false;\r\n}\r\n\r\n/**\r\n * Emails validator\r\n */\r\nexport function emails(cnt, err) {\r\n    return function(el) {\r\n        let value = ew.getValue(el);\r\n        if (!ew.checkEmails(value, cnt)) {\r\n            return { email: err };\r\n        }\r\n        return false;\r\n    }\r\n}\r\n\r\n/**\r\n * DateTime validator\r\n * @param {number} dateFormat DateTime format ID\r\n */\r\nexport function datetime(dateFormat) {\r\n    return function(el) {\r\n        let fn,\r\n            phraseId,\r\n            value = ew.getValue(el),\r\n            newSubStr = ew.DATE_SEPARATOR;\r\n        if ([12, 15, 115].includes(dateFormat)) {\r\n            fn = ew.checkShortDate;\r\n            phraseId = \"IncorrectShortDateYMD\";\r\n        } else if ([5, 9, 109].includes(dateFormat)) {\r\n            fn = ew.checkDate;\r\n            phraseId = \"IncorrectDateYMD\";\r\n        } else if ([14, 17, 117].includes(dateFormat)) {\r\n            fn = ew.checkShortEuroDate;\r\n            phraseId = \"IncorrectShortDateDMY\";\r\n        } else if ([7, 11, 111].includes(dateFormat)) {\r\n            fn = ew.checkEuroDate;\r\n            phraseId = \"IncorrectDateDMY\";\r\n        } else if ([13, 16, 116].includes(dateFormat)) {\r\n            fn = ew.checkShortUSDate;\r\n            phraseId = \"IncorrectShortDateMDY\";\r\n        } else if ([6, 10, 110].includes(dateFormat)) {\r\n            fn = ew.checkUSDate;\r\n            phraseId = \"IncorrectDateMDY\";\r\n        } else { // Default date format\r\n            fn = ew.checkDateDef;\r\n            phraseId = \"IncorrectDate\";\r\n            newSubStr = ew.DATE_FORMAT;\r\n        }\r\n        if (fn && !fn(value)) {\r\n            return { datetime: ew.language.phrase(phraseId).replace(\"%s\", newSubStr) };\r\n        }\r\n       return false;\r\n    };\r\n}\r\n\r\n/**\r\n * Time validator\r\n */\r\nexport function time(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkTime(value)) {\r\n        return { time: ew.language.phrase(\"IncorrectTime\") };\r\n    }\r\n    return false;\r\n}\r\n\r\n/**\r\n * Float validator\r\n */\r\nexport function float(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkNumber(value)) {\r\n        return { time: ew.language.phrase(\"IncorrectFloat\") };\r\n    }\r\n    return false;\r\n}\r\n\r\n/**\r\n * Range validator\r\n * @param {number} min Min value\r\n * @param {number} max Max value\r\n */\r\nexport function range(min, max) {\r\n    return function(el) {\r\n        let value = ew.getValue(el);\r\n        if (!ew.checkRange(value, min, max)) {\r\n            return { range: ew.language.phrase(\"IncorrectRange\").replace(\"%1\", min).replace(\"%2\", max) };\r\n        }\r\n       return false;\r\n    };\r\n}\r\n\r\n/**\r\n * Integer validator\r\n */\r\nexport function integer(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkInteger(value)) {\r\n        return { integer: ew.language.phrase(\"IncorrectInteger\") };\r\n    }\r\n    return false;\r\n}\r\n\r\n/**\r\n * US phone validator\r\n */\r\nexport function phone(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkPhone(value)) {\r\n        return { phone: ew.language.phrase(\"IncorrectPhone\") };\r\n    }\r\n    return false;\r\n}\r\n\r\n/**\r\n * US ZIP validator\r\n */\r\nexport function zip(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkZip(value)) {\r\n        return { zip: ew.language.phrase(\"IncorrectZip\") };\r\n    }\r\n    return false;\r\n}\r\n\r\n/**\r\n * Credit card validator\r\n */\r\nexport function creditCard(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkCreditCard(value)) {\r\n        return { creditCard: ew.language.phrase(\"IncorrectCreditCard\") };\r\n    }\r\n    return false;\r\n}\r\n\r\n/**\r\n * US SSN validator\r\n */\r\nexport function ssn(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkSsn(value)) {\r\n        return { ssn: ew.language.phrase(\"IncorrectSSN\") };\r\n    }\r\n    return false;\r\n}\r\n\r\n/**\r\n * GUID validator\r\n */\r\nexport function guid(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkGuid(value)) {\r\n        return { guid: ew.language.phrase(\"IncorrectGUID\") };\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Regular expression validator\r\n * @param {string} pattern Regular expression pattern\r\n */\r\nexport function regex(pattern) {\r\n    return function(el) {\r\n        let value = ew.getValue(el);\r\n        if (!ew.checkByRegEx(value, pattern)) {\r\n            return { regex: ew.language.phrase(\"IncorrectField\") };\r\n        }\r\n       return false;\r\n    };\r\n}\r\n\r\n/**\r\n  * Custom validator\r\n  * @param {*} fn Function(value, ...args)\r\n  * @param  {...any} args Additional arguments for the function \r\n  */\r\nexport function custom(fn, ...args) {\r\n    return function(el) {\r\n        if (typeof fn == \"function\") {\r\n            let value = ew.getValue(el);\r\n            if (fn(value, ...args))\r\n                return { custom: ew.language.phrase(\"IncorrectField\") };\r\n        }\r\n        return false;\r\n    };\r\n}\r\n\r\n/**\r\n * Captcha validator\r\n */\r\nexport function captcha(el) {\r\n    if (el && !ew.hasValue(el)) {\r\n        return { captcha: ew.language.phrase(\"EnterValidateCode\") };\r\n    }\r\n    return false;\r\n}\r\n\r\n/**\r\n * reCaptcha validator\r\n * @param {number} id reCaptcha ID\r\n */\r\nexport function recaptcha(el) {\r\n    if (el && !ew.hasValue(el) && grecaptcha?.getResponse(el.dataset.id) === \"\") {\r\n        return { recaptcha: ew.language.phrase(\"ClickReCaptcha\") };\r\n    }\r\n    return false;\r\n}","import $ from 'jquery';\r\n\r\n// Form class\r\nexport default function FormBase(id, pageId) {\r\n    var self = this;\r\n\r\n    this._initiated = false;\r\n    this.id = id; // Same ID as the form\r\n    this.pageId = pageId;\r\n    this.$element = null; // jQuery object of the form or div\r\n    this.htmlForm = null; // HTML form element\r\n    this.initSearchPanel = false; // Expanded by default\r\n    this.modified = false;\r\n    this.validateRequired = true;\r\n    this.validate = null;\r\n    this.emptyRow = null; // Check empty row\r\n    this.multiPage = null; // Multi-page\r\n    this.autoSuggests = {}; // AutoSuggests\r\n    this.lists = {}; // Dynamic selection lists\r\n\r\n    // Disable form\r\n    this.disableForm = function() {\r\n        var form = this.getForm();\r\n        $(form).find(\":submit:not(.dropdown-toggle)\").prop(\"disabled\", true).addClass(\"disabled\");\r\n    }\r\n\r\n    // Enable form\r\n    this.enableForm = function() {\r\n        var form = this.getForm(),\r\n            $form = $(form);\r\n        $form.find(\".ew-disabled-element\").removeClass(\"ew-disabled-element\").prop(\"disabled\", false);\r\n        $form.find(\".ew-enabled-element\").removeClass(\"ew-enabled-element\").prop(\"disabled\", true);\r\n        $form.find(\":submit:not(.dropdown-toggle)\").prop(\"disabled\", false).removeClass(\"disabled\");\r\n    }\r\n\r\n    // Append hidden element with form name\r\n    this.appendHidden = function(el) {\r\n        var form = this.getForm(), $form = $(form), $dp = $(el).closest(\".ew-form\"), name = $dp.attr(\"id\") + \"$\" + el.name;\r\n        if ($form.find(\"input:hidden[name='\" + name + \"']\")[0]) // Already appended\r\n            return;\r\n        var ar = $dp.find('[name=\"' + el.name + '\"]').serializeArray();\r\n        if (ar.length) {\r\n            ar.forEach(function(o, i) {\r\n                $('<input type=\"hidden\" name=\"' + name + '\">').val(o.value).appendTo($form);\r\n            });\r\n        } else {\r\n            $('<input type=\"hidden\" name=\"' + name + '\">').val(\"\").appendTo($form);\r\n        }\r\n    }\r\n\r\n    // Can submit\r\n    this.canSubmit = function() {\r\n        var form = this.getForm(),\r\n            $form = $(form);\r\n        this.disableForm();\r\n        this.updateTextArea();\r\n        if (!this.validate || this.validate() && !$form.find(\".is-invalid\")[0]) {\r\n            $form.find(\"input[name^=sv_], input[name^=p_], .ew-template input\") // Do not submit these values\r\n                .prop(\"disabled\", true)\r\n                .addClass(\"ew-disabled-element\");\r\n            $form.find(\"[data-readonly=1][disabled]\")\r\n                .prop(\"disabled\", false)\r\n                .addClass(\"ew-enabled-element\"); // Submit readonly values\r\n            var $dps = $($form.find(\"input[name='detailpage']\").map(function(i, el) {\r\n                return $form.find(\"#\" + el.value).get();\r\n            }));\r\n            if ($dps.length > 1) { // Multiple Master/Detail, check element names\r\n                $dps.each(function(i, dp) {\r\n                    $(dp).find(\":input\").each(function(j, el) {\r\n                        if (/^(fn_)?(x|o)\\d*_/.test(el.name)) {\r\n                            var $els = $dps.not(dp).find(\":input[name='\" + el.name + \"']\");\r\n                            if ($els.length) { // Elements with same name found\r\n                                self.appendHidden(el); // Append element with form name\r\n                                $els.each(function() {\r\n                                    self.appendHidden(this); // Append elements with same name and form name\r\n                                });\r\n                            }\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n            return true;\r\n        } else {\r\n            this.enableForm();\r\n        }\r\n        return false;\r\n    }\r\n\r\n    // Submit\r\n    this.submit = function(action) {\r\n        var form = this.getForm();\r\n        if (this.canSubmit()) {\r\n            if (action)\r\n                form.action = action;\r\n            form.submit();\r\n        }\r\n        return false;\r\n    }\r\n\r\n    // Get dynamic selection list by element name or id\r\n    this.getList = function(name) {\r\n        name = name.replace(/^(sv_)?[xy](\\d*|\\$rowindex\\$)_|\\[\\]$/g, \"\"); // Remove element name prefix/suffix\r\n        return this.lists[name];\r\n    }\r\n\r\n    // Compile templates\r\n    this.compileTemplates = function() {\r\n        let lists = Object.values(this.lists);\r\n        for (let list of lists) {\r\n            if (list.template && $.isString(list.template))\r\n                list.template = $.templates(list.template);\r\n        }\r\n    }\r\n\r\n    // Get the HTML form element\r\n    this.getForm = function() {\r\n        if (!this.htmlForm) {\r\n            this.$element = $(\"#\" + this.id);\r\n            if (this.$element.is(\"form\")) { // HTML form\r\n                this.htmlForm = this.$element[0];\r\n            } else if (this.$element.is(\"div\")) { // HTML div => Grid page\r\n                this.htmlForm = this.$element.closest(\"form\")[0];\r\n            }\r\n        }\r\n        return this.htmlForm;\r\n    }\r\n\r\n    // Get form element as single element\r\n    this.getElement = function(name) {\r\n        if (!this.$element)\r\n            this.$element = $(\"#\" + this.id);\r\n        return (name) ? ew.getElement(name, this.$element) : this.$element[0];\r\n    }\r\n\r\n    // Get form element(s) as single element or array of radio/checkbox\r\n    this.getElements = function(name) {\r\n        if (!this.$element)\r\n            this.$element = $(\"#\" + this.id);\r\n        var selector = \"[name='\" + name + \"']\";\r\n        selector = \"input\" + selector + \",select\" + selector + \",textarea\" + selector + \",button\" + selector;\r\n        var $els = this.$element.find(selector);\r\n        return ($els.length == 0) ? null : ($els.length == 1 && $els.is(\":not([type=checkbox]):not([type=radio])\")) ? $els[0] : $els.get();\r\n    }\r\n\r\n    // Update selection lists\r\n    // @param {(null|undefined|number)*} rowindex Row index\r\n    this.updateLists = function(rowindex) {\r\n        if (rowindex === null) // rowindex == $rowindex$ == null\r\n            return;\r\n        if (!$.isNumber(rowindex) && this.pageId == \"grid\")\r\n            return;\r\n        var form = this.getForm(), // Set up $element and htmlForm\r\n            confirm = form.querySelector(\"input#confirm\");\r\n        if (confirm && confirm.value == \"confirm\") { // Confirm page\r\n            ew.removeSpinner();\r\n            return;\r\n        }\r\n        var fixId = (id, multiple) => {\r\n            var t = \"\",\r\n                i = rowindex,\r\n                ar = id.split(\" \");\r\n            if (ar.length > 1) {\r\n                t = ar[0];\r\n                i = \"\";\r\n                id = ar[1];\r\n            }\r\n            let prefix = $.isNumber(i) ? \"x\" + i + \"_\" : \"x_\"; // Add row index\r\n            if (id.startsWith(\"x_\")) // Field element name\r\n                id = id.replace(/^x_/, prefix);\r\n            else // Field var\r\n                id = prefix + id;\r\n            if (multiple && !id.endsWith(\"[]\")) // Add [] if select-multiple\r\n                id += \"[]\";\r\n            return t ? t + \" \" + id : id;\r\n        };\r\n        var selector = Object.entries(this.lists).map(([id, list]) => {\r\n            return \"[name='\" + fixId(id, list.multiple) + \"']\";\r\n        }).join();\r\n        if (!selector || !form.querySelector(selector)) { // Lists not found\r\n            ew.removeSpinner();\r\n            return;\r\n        }\r\n        var actions = [],\r\n            promises = [];\r\n        this.compileTemplates(); // For grid where updateList() called before init()\r\n        for (let [id, list] of Object.entries(this.lists)) {\r\n            let parents = list.parentFields.slice().map(parent => fixId(parent)), // Clone and fix index\r\n                ajax = list.ajax;\r\n            id = fixId(id, list.multiple);\r\n            if ($.isBoolean(ajax)) { // Ajax\r\n                let pvalues = parents.map(parent => ew.getOptionValues(parent, form)); // Save the initial values of the parent lists\r\n                actions.push([id, pvalues, ajax, false]);\r\n            } else { // Non-Ajax\r\n                ew.updateOptions.call(this, id, parents, null, false);\r\n            }\r\n        }\r\n        // Update the Ajax lists\r\n        for (var i = 0; i < actions.length; i++) {\r\n            promises.push(new Promise(function(resolve, reject) {\r\n                setTimeout(function() {\r\n                    resolve(ew.updateOptions.apply(self, actions.shift()));\r\n                }, ew.AJAX_DELAY * i); // Delay a little in case of large number of lists\r\n            }));\r\n        }\r\n        Promise.all(promises).then(function() {\r\n            $(document).trigger(\"updatedone\", [{source: self, target: form}]);\r\n        }).catch(function(error) {\r\n            console.log(error);\r\n        });\r\n    }\r\n\r\n    // Create AutoSuggest\r\n    this.createAutoSuggest = function(settings) {\r\n        var options = Object.assign({\r\n            limit: ew.AUTO_SUGGEST_MAX_ENTRIES,\r\n            form: this\r\n        }, ew.autoSuggestSettings, settings); // Global settings + field specific settings\r\n        self.autoSuggests[settings.id] = new ew.AutoSuggest(options);\r\n    }\r\n\r\n    // Init editors\r\n    this.initEditors = function() {\r\n        var form = this.getForm();\r\n        $(form.elements).filter(\"textarea.editor\").each(function(i, el) {\r\n            var ed = $(el).data(\"editor\");\r\n            if (ed && !ed.active && !ed.name.includes(\"$rowindex$\"))\r\n                ed.create();\r\n        });\r\n    }\r\n\r\n    // Update textareas\r\n    this.updateTextArea = function(name) {\r\n        var form = this.getForm();\r\n        $(form.elements).filter(\"textarea.editor\").each(function(i, el) {\r\n            var ed = $(el).data(\"editor\");\r\n            if (!ed || name && ed.name != name)\r\n                return true; // Continue\r\n            ed.save();\r\n            if (name)\r\n                return false; // Break\r\n        });\r\n    }\r\n\r\n    // Destroy editor(s)\r\n    this.destroyEditor = function(name) {\r\n        var form = this.getForm();\r\n        $(form.elements).filter(\"textarea.editor\").each(function(i, el) {\r\n            var ed = $(el).data(\"editor\");\r\n            if (!ed || name && ed.name != name)\r\n                return true; // Continue\r\n            ed.destroy();\r\n            if (name)\r\n                return false; // Break\r\n        });\r\n    }\r\n\r\n    // Show error message\r\n    this.onError = function(el, msg) {\r\n        return ew.onError(this, el, msg);\r\n    }\r\n\r\n    // Init file upload\r\n    this.initUpload = function() {\r\n        var form = this.getForm();\r\n        $(form.elements).filter(\"input:file:not([name*='$rowindex$'],[id='importfiles'])\").each(function(index) {\r\n            $.later(ew.AJAX_DELAY * index, null, ew.upload, this); // Delay a little in case of large number of upload fields\r\n        });\r\n    }\r\n\r\n    // Set up filters\r\n    this.setupFilters = function(e, filters) {\r\n        var id = this.id, data = this.filterList ? this.filterList.data : null, $sf = $(\".ew-save-filter[data-form=\" + id + \"]\").toggleClass(\"disabled\", !data),\r\n            $df = $(\".ew-delete-filter[data-form=\" + id + \"]\").toggleClass(\"disabled\", !filters.length).toggleClass(\"dropdown-toggle\", !!filters.length),\r\n            $delete = $df.parent(\"li\").toggleClass(\"dropdown-submenu dropdown-hover\", !!filters.length).toggleClass(\"disabled\", !filters.length),\r\n            $save = $sf.parent(\"li\").toggleClass(\"disabled\", !data),\r\n            $btn = $(e.target);\r\n        var saveFilters = function(id, filters) {\r\n            if (ew.SEARCH_FILTER_OPTION == \"Client\") {\r\n                window.localStorage.setItem(id + \"_filters\", JSON.stringify(filters));\r\n            } else if (ew.SEARCH_FILTER_OPTION == \"Server\") {\r\n                var $body = $(\"body\");\r\n                $body.css(\"cursor\", \"wait\");\r\n                $.ajax(ew.currentPage(), {\r\n                    type: \"POST\",\r\n                    dataType: \"json\",\r\n                    data: { \"ajax\": \"savefilters\", \"filters\": JSON.stringify(filters) }\r\n                }).done(function(result) {\r\n                    if (result[0] && result[0].success)\r\n                        self.filterList.filters = filters; // Save filters\r\n                }).always(function() {\r\n                    $body.css(\"cursor\", \"default\");\r\n                });\r\n            }\r\n        }\r\n        $save.off(\"click.ew\").on(\"click.ew\", function(e) { // Save filter\r\n            if ($save.hasClass(\"disabled\"))\r\n                return false;\r\n            ew.prompt(ew.language.phrase(\"EnterFilterName\"), (name) => {\r\n                if (name) {\r\n                    filters.push([name, data]);\r\n                    saveFilters(id, filters);\r\n                }\r\n            }, true);\r\n        }).prevAll().remove();\r\n        $df.next(\"ul.dropdown-menu\").remove();\r\n        if (filters.length) {\r\n            var $submenu = $(\"<ul class='dropdown-menu'></ul>\");\r\n            for (var i in filters) {\r\n                if (!Array.isArray(filters[i]))\r\n                    continue;\r\n                $('<li><a class=\"dropdown-item\" data-index=\"' + i + '\" href=\"#\" onclick=\"return false;\">' + filters[i][0] + '</a></li>').on(\"click\", function(e) { // Delete\r\n                    var i = $(this).find(\"a[data-index]\").data(\"index\");\r\n                    ew.prompt(ew.language.phrase(\"DeleteFilterConfirm\").replace(\"%s\", filters[i][0]), (result) => {\r\n                        if (result) {\r\n                            filters.splice(i, 1);\r\n                            saveFilters(id, filters);\r\n                        }\r\n                    });\r\n                }).appendTo($submenu);\r\n                $('<li><a class=\"dropdown-item ew-filter-list\" data-index=\"' + i + '\" href=\"#\" onclick=\"return false;\">' + filters[i][0] + '</a></li>').insertBefore($save).on(\"click\", function(e) {\r\n                    var i = $(this).find(\"a[data-index]\").data(\"index\");\r\n                    $(\"<form>\").attr({method: \"post\", action: ew.currentPage()})\r\n                        .append($(\"<input type='hidden'>\").attr({name: \"cmd\", value: \"resetfilter\"}),\r\n                            $(\"<input type='hidden'>\").attr({name: ew.TOKEN_NAME_KEY, value: ew.TOKEN_NAME}), // PHP\r\n                            $(\"<input type='hidden'>\").attr({name: ew.ANTIFORGERY_TOKEN_KEY, value: ew.ANTIFORGERY_TOKEN}), // PHP\r\n                            $(\"<input type='hidden'>\").attr({name: \"filter\", value: JSON.stringify(filters[i][1])}))\r\n                        .appendTo(\"body\").submit();\r\n                });\r\n            }\r\n            $(\"<li class='dropdown-divider'></li>\").insertBefore($save);\r\n            $delete.append($submenu);\r\n        }\r\n    }\r\n\r\n    // Init form\r\n    this.init = function() {\r\n        if (this._initiated)\r\n            return;\r\n\r\n        // Filters button\r\n        if (ew.SEARCH_FILTER_OPTION == \"Client\" && window.localStorage || ew.SEARCH_FILTER_OPTION == \"Server\" && ew.IS_LOGGEDIN && !ew.IS_SYS_ADMIN && ew.CURRENT_USER_NAME != \"\") {\r\n            $(\".ew-filter-option.\" + this.id + \" .ew-btn-dropdown\").on(\"show.bs.dropdown\", function(e) {\r\n                var filters = [];\r\n                if (ew.SEARCH_FILTER_OPTION == \"Client\") {\r\n                    var item = window.localStorage.getItem(self.id + \"_filters\");\r\n                    if (item)\r\n                        filters = ew.parseJson(item) || [];\r\n                } else if (ew.SEARCH_FILTER_OPTION == \"Server\")\r\n                    filters = self.filterList && self.filterList.filters ? self.filterList.filters : [];\r\n                var ar = $.grep(filters, function(val) {\r\n                    if (Array.isArray(val) && val.length == 2)\r\n                        return val;\r\n                });\r\n                self.setupFilters(e, ar);\r\n            });\r\n            $(\".ew-filter-option\").show();\r\n        } else {\r\n            $(\".ew-filter-option\").hide();\r\n        }\r\n\r\n        // Check form\r\n        var form = this.getForm(),\r\n            $form = $(form);\r\n        if (!form)\r\n            return;\r\n\r\n        // Compile templates\r\n        this.compileTemplates();\r\n\r\n        // Check if Search panel\r\n        var isSearch = /s(ea)?rch$/.test(this.id);\r\n\r\n        // Search panel\r\n        if (isSearch && this.initSearchPanel && !ew.hasFormData(form))\r\n            $(\"#\" + this.id + \"-search-panel\").removeClass(\"show\");\r\n\r\n        // Search panel toggle\r\n        $(\".ew-search-toggle[data-form=\" + this.id + \"]\").on(\"click.bs.button\", function() {\r\n            $(\"#\" + $(this).data(\"form\") + \"-search-panel\").collapse(\"toggle\");\r\n        });\r\n\r\n        // Hide search operator column\r\n        if (!$(\".ew-table .ew-search-operator\").text().trim())\r\n            $(\".ew-table .ew-search-operator\").parent(\"td\").hide();\r\n\r\n        // Highlight button\r\n        if (isSearch) {\r\n            $(\".ew-highlight[data-form=\" + this.id + \"]\").on(\"click.bs.button\", function() {\r\n                $(\"span.\" + $(this).data(\"name\")).toggleClass(\"ew-highlight-search\");\r\n            });\r\n        }\r\n\r\n        // Search operators\r\n        if (isSearch) { // Search form\r\n            $form.find(\"select[id^=z_]\").each(function() {\r\n                var $this = $(this).change();\r\n                if ($this.val() != \"BETWEEN\")\r\n                    $form.find(\"#w_\" + this.id.substr(2)).change();\r\n            });\r\n        }\r\n\r\n        // Multi-page\r\n        if (this.multiPage)\r\n            this.multiPage.render();\r\n\r\n        // HTML editors\r\n        loadjs.ready([\"editor\"], this.initEditors.bind(this));\r\n\r\n        // Dynamic selection lists\r\n        this.updateLists();\r\n\r\n        // Init file upload\r\n        this.initUpload();\r\n\r\n        // Submit/Cancel\r\n        if (this.$element.is(\"form\")) { // Not Grid page\r\n            // Detail pages\r\n            this.$element.find(\".ew-detail-pages .ew-nav-tabs a[data-toggle=tab]\").on(\"shown.bs.tab\", function(e) {\r\n                var $tab = $(e.target.getAttribute(\"href\")),\r\n                    $panel = $tab.find(\".table-responsive.ew-grid-middle-panel\"),\r\n                    $container = $tab.closest(\".container-fluid\");\r\n                if ($panel.width() >= $container.width())\r\n                    $panel.width($container.width() + \"px\");\r\n                else\r\n                    $panel.width(\"auto\");\r\n            });\r\n            $form.submit(function(e) { // Bind submit event\r\n                return self.submit();\r\n            });\r\n            $form.find(\"[data-field], .ew-priv\").change(function() {\r\n                if (ew.CONFIRM_CANCEL)\r\n                    self.modified = true;\r\n            });\r\n            $form.find(\"#btn-cancel[data-href]\").click(function() { // Cancel\r\n                self.updateTextArea();\r\n                var href = $(this).data(\"href\");\r\n                if (self.modified && ew.hasFormData(form)) {\r\n                    ew.prompt(ew.language.phrase(\"ConfirmCancel\"), (result) => {\r\n                        if (result)\r\n                            window.location = href;\r\n                    });\r\n                } else {\r\n                    window.location = href;\r\n                }\r\n            });\r\n        }\r\n\r\n        this._initiated = true;\r\n\r\n        // Store form object as data\r\n        this.$element.data(\"form\", this);\r\n    }\r\n\r\n    // Add to the global forms object\r\n    ew.forms.add(this);\r\n}","/**\r\n * Class Field\r\n */\r\nexport default class Field {\r\n    name = \"\";\r\n    validators = [];\r\n    _error;\r\n    _element;\r\n    _checkbox;\r\n    _validate = true;\r\n    list;\r\n    invalid;\r\n\r\n    /**\r\n     * Constructor\r\n     * @param {string} fldvar Field variable name\r\n     * @param {Function[]|Function} validators Validators\r\n     * @param {bool} invalid Initial valid status (e.g. server side)\r\n     */\r\n    constructor(fldvar, validators, invalid) {\r\n        this.name = fldvar;\r\n        if (Array.isArray(validators)) {\r\n            for (let validator of validators)\r\n                this.addValidator(validator);\r\n        } else if (typeof validators === \"function\") {\r\n            this.addValidator(validators);\r\n        }\r\n        this.invalid = invalid;\r\n    }\r\n\r\n    /**\r\n     * Add validator\r\n     * @param {Function} validator Validator function\r\n     */\r\n    addValidator(validator) {\r\n        if (typeof validator === \"function\")\r\n            this.validators.push(validator);\r\n    }\r\n\r\n    /**\r\n     * Get error\r\n     * @returns {Object}\r\n     */\r\n    get error() {\r\n        return this._error;\r\n    }\r\n\r\n    /**\r\n     * Add error\r\n     * @param {Object} err Error\r\n     */\r\n    addError(err) {\r\n        if (err) {\r\n            let error = this._error ?? {};\r\n            this._error = { ...error, ...err };\r\n            this.invalid = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Clear all errors\r\n     */\r\n    clearErrors() {\r\n        this._error = null;\r\n        this.invalid = false;\r\n    }\r\n\r\n    /**\r\n     * Clear all validators\r\n     */\r\n    clearValidators() {\r\n        this.validators = [];\r\n    }\r\n\r\n    /**\r\n     * Get error message\r\n     * @returns {string} HTML\r\n     */\r\n    get errorMessage() {\r\n        if (this._error) {\r\n            return Array.from(Object.values(this._error)).join(\"<br>\");\r\n        }\r\n        return \"\";\r\n    }\r\n\r\n    /**\r\n     * Check if the field should be validated\r\n     */\r\n    get shouldValidate() {\r\n        return !this._checkbox || this._checkbox.checked;\r\n    }\r\n\r\n    /**\r\n     * Set form element\r\n     */\r\n    set element(el) {\r\n        this._element = el;\r\n        this._checkbox = this._element?.id?.match(/^[xy]_/) ? document.getElementById(this._element.id.replace(/^[xy]_/, \"u_\")) : null; // Find the checkbox for the field in Update page\r\n    }\r\n\r\n    /**\r\n     * Get form element\r\n     * @returns {HTMLElement|HTMLElement[]}\r\n     */\r\n    get element() {\r\n        return this._element;\r\n    }\r\n\r\n    /**\r\n     * Get field value from form element\r\n     * @returns {string|Array}\r\n     */\r\n    get value() {\r\n        return this._element ? ew.getValue(this._element) : \"\";\r\n    }\r\n\r\n    /**\r\n     * Validate field value\r\n     * @returns {boolean}\r\n     */\r\n    validate() {\r\n        let result = true;\r\n        this.clearErrors(); // Reset error\r\n        if (this._element && this.shouldValidate) {\r\n            if (Array.isArray(this.validators)) {\r\n                for (let validator of this.validators) {\r\n                    let err = validator(this._element);\r\n                    if (err !== false) {\r\n                        this.addError(err);\r\n                        result = false;\r\n                    }\r\n                }\r\n                this.updateFeedback();\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Update the error message to feedback element\r\n     */\r\n    updateFeedback() {\r\n        let err = this.errorMessage;\r\n        if (this._element && err) {\r\n            jQuery(this._element).closest(\"[id^=el_], .form-group\").find(\".invalid-feedback\").html(err);\r\n            ew.setInvalid(this._element);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Set focus\r\n     */\r\n    focus() {\r\n        if (this._element)\r\n            ew.setFocus(this._element);\r\n    }\r\n}","import FormBase from \"./FormBase\";\r\nimport Field from \"./Field\";\r\n\r\n/**\r\n * Class Form\r\n */\r\nexport default class Form extends FormBase {\r\n    row = {};\r\n    fields = {};\r\n    rowIndex;\r\n    value;\r\n    _error;\r\n\r\n    /**\r\n     * Constructor\r\n     * @param {string} id Form ID\r\n     * @param {string} pageId Page ID\r\n     */\r\n    constructor(id, pageId) {\r\n        super(id, pageId);\r\n    }\r\n\r\n    /**\r\n     * Add field\r\n     * @param {string} fldvar Field variable name\r\n     * @param {Function[]} validators Validators\r\n     * @param {bool} invalid Invalid\r\n     */\r\n    addField(fldvar, validators, invalid) {\r\n        if (!(fldvar in this.fields))\r\n            this.fields[fldvar] = new Field(fldvar, validators, invalid);\r\n    }\r\n\r\n    /**\r\n     * Get field\r\n     * @param {string} fldvar Field variable name\r\n     * @returns Field\r\n     */\r\n    getField(fldvar) {\r\n        return this.fields[fldvar];\r\n    }\r\n\r\n    /**\r\n     * Add fields by field definitions\r\n     * @param {Array} fields\r\n     */\r\n    addFields(fields) {\r\n        if (Array.isArray(fields)) {\r\n            for (let field of fields) {\r\n                if (Array.isArray(field)) {\r\n                    this.addField.apply(this, field);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Add error\r\n     * @param {string} fldvar Field variable name\r\n     * @param {Object} err Error\r\n     */\r\n    addError(fldvar, err) {\r\n        if (err) {\r\n            this._error = this._error ?? {};\r\n            this._error[fldvar] = err;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Add custom error\r\n     * @param {string} fldvar Field variable name \r\n     * @param {string} msg Error message \r\n     */\r\n    addCustomError(fldvar, msg) {\r\n        if (fldvar in this.fields) {\r\n            let field = this.fields[fldvar],\r\n                err = { custom: msg };\r\n            field.addError(err);\r\n            field.updateFeedback();\r\n            this.addError(fldvar, err);\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Get error\r\n     */\r\n    get error() {\r\n        return this._error;\r\n    }\r\n\r\n    /**\r\n     * Set focus to the first field with error\r\n     */\r\n    focus() {\r\n        for (let [fldvar, field] of Object.entries(this.fields)) {\r\n            if (field.invalid || this._error && this._error[fldvar]) {\r\n                field.focus();\r\n                this.makeVisible(field.element);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Make the form visible\r\n     * @param {HTMLElement} el Focused element \r\n     */\r\n    makeVisible(el) {\r\n        if (this.multiPage) { // Multi-page\r\n            this.multiPage.gotoPageByElement(el);\r\n        } else if (this.$element.is(\"div\")) { // Multiple Master/Detail\r\n            let $pane = this.$element.closest(\".tab-pane\");\r\n            if ($pane[0] && !$pane.hasClass(\"active\"))\r\n                $pane.closest(\".tabbable, .ew-nav-tabs\").find(\"a[data-toggle=tab][href='#\" + $pane.attr(\"id\") + \"']\").click();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Validate all fields of the specified row\r\n     * @param {number} rowIndex Row index\r\n     */\r\n    validateFields(rowIndex) {\r\n        this.rowIndex = rowIndex ?? \"\";\r\n        this.row = {};\r\n        this._error = null; // Reset\r\n        let result = true;\r\n        for (let field of Object.values(this.fields)) {\r\n            field.element = this.getElements(`x${this.rowIndex}_${field.name}`); // Set element\r\n            if (!field.element)\r\n                field.element = this.getElements(`x${this.rowIndex}_${field.name}[]`); // Field with []\r\n            if (!field.element)\r\n                field.element = this.getElements(field.name); // Field by name directly (e.g. email form)\r\n            this.row[field.name] = field.value; // Get field value\r\n            if (!field.validate()) { // Invalid field value\r\n                this.addError(field.name, field.error);\r\n                result = false;\r\n            }\r\n        }\r\n        // Save the field values of the row\r\n        if (!this.value) {\r\n            this.value = { ...this.row };\r\n        } else {\r\n            if (!Array.isArray(this.value))\r\n                this.value = [this.value];\r\n            let index = parseInt(rowIndex, 10) || 0;\r\n            index = (index > 1) ? index - 1 : 0;\r\n            this.value[index] = { ...this.row };\r\n        }\r\n        this.focus();\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Set invalid fields of the specified row\r\n     * @param {number} rowIndex Row index\r\n     */\r\n    setInvalid(rowIndex) {\r\n        this.rowIndex = rowIndex ?? \"\";\r\n        for (let field of Object.values(this.fields)) {\r\n            if (!field.invalid)\r\n                continue;\r\n            field.element = this.getElements(`x${this.rowIndex}_${field.name}`); // Set element\r\n            if (!field.element)\r\n                field.element = this.getElements(`x${this.rowIndex}_${field.name}[]`); // Fields with []\r\n            if (!field.element)\r\n                field.element = this.getElements(field.name); // Fields without prefix (e.g. email form)\r\n            ew.setInvalid(field.element);\r\n        }\r\n    }\r\n}","import $ from 'jquery';\r\n\r\n// AjaxLookup class\r\nexport default class AjaxLookup {\r\n    _isAutoSuggest = null;\r\n\r\n    /**\r\n     * Constructor\r\n     * @param {Object} settings Settings\r\n     * @param {string} settings.id - Input element ID\r\n     * @param {string|Form} settings.form - Form of the input element\r\n     * @param {Number} settings.limit - Options per page\r\n     * @param {Object} settings.data - Data submitted by Ajax\r\n     */\r\n    constructor(settings) {\r\n        this.elementId = settings.id; // Id\r\n        this.form = settings.form; // Form\r\n        if ($.isString(this.form)) // Form is string => Form id\r\n            this.form = ew.forms.get(this.form);\r\n        this.element = this.form.getElement(this.elementId); // Actual HTML element\r\n        this.formElement = this.form.getElement(); // HTML form or DIV\r\n        this.list = this.form.getList(this.elementId);\r\n        let m = this.elementId.match(/^[xy](\\d*|\\$rowindex\\$)_/),\r\n            rowindex = m ? m[1] : \"\";\r\n        this.parentFields = this.list.parentFields.slice() // Clone\r\n            .map(pf => (pf.split(\" \").length == 1) ? pf.replace(/^x_/, \"x\" + rowindex + \"_\") : pf); // Parent field in the same table, add row index\r\n        this.limit = settings.limit;\r\n        this.debounce = settings.debounce;\r\n        this.data = settings.data;\r\n        this.recordCount = 0;\r\n    }\r\n\r\n    /**\r\n     * Is AutoSuggest\r\n     */\r\n    get isAutoSuggest() {\r\n        if (this._isAutoSuggest === null)\r\n            this._isAutoSuggest = ew.isAutoSuggest(this.element);\r\n        return this._isAutoSuggest;\r\n    }\r\n\r\n    /**\r\n     * Format display value\r\n     * @param {Array} opt Option\r\n     */\r\n    formatResult(opt) {\r\n        if (this.list.template && !this.isAutoSuggest) {\r\n            return this.list.template.render(opt, ew.jsRenderHelpers);\r\n        } else {\r\n            return ew.displayValue(opt, this.element) || opt[0];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Generate request\r\n     */\r\n    generateRequest() {\r\n        var data = Object.assign({}, this.data, {\r\n            name: this.element.name,\r\n            page: this.list.page,\r\n            field: this.list.field,\r\n            ajax: \"autosuggest\",\r\n            language: ew.LANGUAGE_ID\r\n        }, ew.getUserParams(\"#p_\" + this.elementId, this.formElement));\r\n        if (this.parentFields.length > 0) {\r\n            this.parentFields.forEach((pf, i) => {\r\n                let arp = ew.getOptionValues(pf, this.formElement);\r\n                data[\"v\" + (i + 1)] = arp.join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n            });\r\n        }\r\n        return data;\r\n    }\r\n\r\n    /**\r\n     * Get URL\r\n     */\r\n    getUrl(query, start) {\r\n        let params = new URLSearchParams({\r\n            q: query,\r\n            n: this.limit,\r\n            rnd: ew.random(),\r\n            start: $.isNumber(start) ? start : -1\r\n        });\r\n        return ew.getApiUrl(ew.API_LOOKUP_ACTION, params.toString());\r\n    }\r\n\r\n    /**\r\n     * Prepare URL and data for sending request\r\n     * @param {string} query Search term\r\n     * @param {Number} start Start page\r\n     */\r\n    prepare(query, start) {\r\n        return {\r\n            url: this.getUrl(query, start),\r\n            type: \"POST\",\r\n            dataType: \"json\",\r\n            data: this.generateRequest()\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Transform options (virtual)\r\n     * @param {Object[]} data Data from server\r\n     */\r\n    transform(data) {\r\n        let results = [];\r\n        if (data && data.result == \"OK\") {\r\n            this.recordCount = data.totalRecordCount;\r\n            results = data.records;\r\n        }\r\n        return results;\r\n    }\r\n\r\n}\r\n","/**\r\n * Class selection list option\r\n */\r\nexport default class SelectionListOption {\r\n\r\n    /**\r\n     * Constructor\r\n     */\r\n    constructor(value, text, selected) {\r\n        this.value = String(value || \"\");\r\n        this.text = String(text || \"\");\r\n        this.selected = !!selected;\r\n    }\r\n\r\n}","import $ from 'jquery';\r\nimport SelectionListOption from './SelectionListOption';\r\nimport AjaxLookup from './AjaxLookup';\r\n\r\n// AutoSuggest class\r\nfunction AutoSuggest(settings) {\r\n    AjaxLookup.call(this, settings); // Extends AjaxLookup\r\n\r\n    var emptyObj = { typeahead: {} }; // Empty Auto-Suggest object\r\n\r\n    if (this.elementId.includes(\"$rowindex$\"))\r\n        return emptyObj;\r\n\r\n    this.input = this.form.getElement(\"sv_\" + this.elementId); // User input\r\n    if (!this.input)\r\n        return emptyObj;\r\n\r\n    var self = this,\r\n        $input = $(this.input),\r\n        $element = $(this.element),\r\n        timer;\r\n\r\n    // Properties\r\n    this.minWidth = settings.minWidth;\r\n    this.maxHeight = settings.maxHeight;\r\n    this.highlight = settings.highlight;\r\n    this.hint = settings.hint;\r\n    this.minLength = settings.minLength;\r\n    this.templates = Object.assign({}, settings.templates); // Clone\r\n    this.trigger = settings.trigger; // For loading more results\r\n    this.delay = settings.delay; // For loading more results\r\n    this.debounce = settings.debounce;\r\n    this.display = settings.display || \"text\";\r\n    this.forceSelection = settings.forceSelect;\r\n    this.$input = $input;\r\n    this.$element = $element;\r\n\r\n    // Save initial option\r\n    if ($input.val() && $element.val())\r\n        this.element.add($element.val(), $input.val(), true);\r\n\r\n    // Set the selected item to the actual field\r\n    this.setValue = function(v) {\r\n        v = v || $input.val();\r\n        let index = this.element.options.findIndex(option => option.text == v);\r\n        if (index < 0) { // Not found in results\r\n            if (this.forceSelection && v) { // Force selection and query not empty => error\r\n                $input.typeahead(\"val\", \"\").attr(\"placeholder\", ew.language.phrase(\"ValueNotExist\")).addClass(\"is-invalid\");\r\n                $element.val(\"\").change();\r\n                return;\r\n            }\r\n        } else { // Found in results\r\n            this.element.options[index].selected = true;\r\n            if (!/s(ea)?rch$/.test(this.formElement.id) || this.forceSelection) // Force selection or not search form\r\n                v = this.element.options[index].value; // Replace the display value by Link Field value\r\n        }\r\n        if (v !== $element.attr(\"value\"))\r\n            $element.attr(\"value\", v).change(); // Set value to the actual field\r\n    };\r\n\r\n    // Transform suggestion\r\n    this.transform = function(data) {\r\n        let results = AjaxLookup.prototype.transform.call(this, data);\r\n        this.element.options = results.map(item => new SelectionListOption(item[0], self.formatResult(item)));\r\n        return this.element.options;\r\n    };\r\n\r\n    // Get suggestions by Ajax\r\n    this.source = function(query, syncResults, asyncResults) {\r\n        if (timer)\r\n            timer.cancel();\r\n        timer = $.later(self.debounce, null, function() {\r\n            self.recordCount = 0; // Reset\r\n            var settings = self.prepare(query);\r\n            $.ajax(settings).done(function(data) {\r\n                asyncResults(self.transform(data));\r\n            });\r\n        });\r\n    };\r\n\r\n    // Get current suggestion count\r\n    this.count = function() {\r\n        return self.typeahead.menu.$node.find(\".tt-suggestion.tt-selectable\").length;\r\n    };\r\n\r\n    // Get more suggestions by Ajax\r\n    this.more = function() {\r\n        var $body = $(\"body\");\r\n        $body.css(\"cursor\", \"wait\");\r\n        var ta = self.typeahead, query = ta.menu.query, dataset = ta.menu.datasets[0];\r\n        var start = self.count();\r\n        var settings = self.prepare(query, start);\r\n        $.ajax(settings).done(function(data) {\r\n            data = self.transform(data);\r\n            dataset._append(query, data);\r\n            ta.menu.$node.find(\".tt-dataset\").scrollTop(dataset.$lastSuggestion.outerHeight() * start);\r\n        }).always(function() {\r\n            $body.css(\"cursor\", \"default\");\r\n        });\r\n    };\r\n\r\n    // Add events\r\n    $input.on(\"typeahead:select\", function(e, d) {\r\n        self.setValue(d[self.display]);\r\n    }).change(function(e) {\r\n        var ta = $input.data(\"tt-typeahead\");\r\n        if (ta && ta.isOpen() && !ta.menu.empty()) {\r\n            var $item = ta.menu.getActiveSelectable();\r\n            if ($item) { // A suggestion is highlighted\r\n                let i = $item.index(),\r\n                    val = self.element.options[i].text;\r\n                $input.typeahead(\"val\", val);\r\n            }\r\n        }\r\n        self.setValue();\r\n    }).blur(function(e) { // \"change\" fires before blur\r\n        var ta = $input.data(\"tt-typeahead\");\r\n        if (ta && ta.isOpen())\r\n            ta.menu.close();\r\n    }).focus(function(e) {\r\n        $input.attr(\"placeholder\", $input.data(\"placeholder\")).removeClass(\"is-invalid\");\r\n    });\r\n\r\n    // Option template (\"suggestion\" template)\r\n    var tpl = self.list.template || self.templates[\"suggestion\"];\r\n    if (tpl && $.isString(tpl))\r\n        tpl = $.templates(tpl);\r\n    if (tpl)\r\n        self.templates[\"suggestion\"] = tpl.render.bind(tpl);\r\n\r\n    // Save\r\n    $element.data(\"autosuggest\", this);\r\n\r\n    // Create Typeahead\r\n    $(function() {\r\n        // Typeahead options and dataset\r\n        var options = {\r\n            highlight: self.highlight,\r\n            minLength: self.minLength,\r\n            hint: self.hint,\r\n            trigger: self.trigger,\r\n            delay: self.delay\r\n        };\r\n        var dataset = {\r\n            name: self.form.id + \"-\" + self.elementId,\r\n            source: self.source,\r\n            templates: self.templates,\r\n            display: self.display,\r\n            limit: self.limit,\r\n            async: true\r\n        };\r\n        var args = [options, dataset];\r\n        // Trigger \"typeahead\" event\r\n        $element.trigger(\"typeahead\", [args]);\r\n        self.limit = dataset.limit;\r\n        // Create Typeahead\r\n        $input.typeahead.apply($input, args);\r\n        $input.on(\"typeahead:rendered\", function() {\r\n            var $node = self.typeahead.menu.$node;\r\n            var $more = $node.find(\".tt-more\").html(ew.language.phrase(\"More\"));\r\n            if (arguments.length > 1 && // Arguments: event, suggestion, suggestion, ...\r\n                self.recordCount > self.count()) {\r\n                $more.one(options.trigger, function(e) {\r\n                    setTimeout(function() {\r\n                        self.more();\r\n                    }, options.delay);\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                });\r\n            } else {\r\n                $more.hide();\r\n            }\r\n        });\r\n        $input.off(\"blur.tt\");\r\n        self.typeahead = $input.data(\"tt-typeahead\");\r\n        var $menu = self.typeahead.menu.$node.css(\"z-index\", 1000);\r\n        if (self.minWidth)\r\n            $menu.css(\"min-width\", self.minWidth);\r\n        var $dataset = $menu.find(\".tt-dataset\");\r\n        var maxHeight = self.maxHeight ||\r\n            (parseInt($dataset.css(\"line-height\"), 10) + 6) * (dataset.limit + 1); // Match .tt-suggestion padding\r\n        $dataset.css({ \"max-height\": maxHeight, \"overflow-y\": \"auto\" });\r\n    });\r\n}\r\n\r\nAutoSuggest.prototype = Object.create(AjaxLookup.prototype);\r\n\r\nexport default AutoSuggest;","import $ from 'jquery';\r\n\r\n/**\r\n * Class Forms\r\n */\r\nexport default class Forms {\r\n    _forms = {};\r\n\r\n    /**\r\n     * Get form by element or id\r\n     * @param {HTMLElement|string} el Element or id\r\n     */\r\n    get(el) {\r\n        let id = ($.isString(el)) ? el : ew.getForm(el).id;\r\n        return this._forms[id];\r\n    }\r\n\r\n    /**\r\n     * Add form\r\n     * @param {Form} f Form\r\n     */\r\n    add(f) {\r\n        this._forms[f.id] = f;\r\n    }\r\n\r\n    /**\r\n     * Get all ids\r\n     * @returns {string[]}\r\n     */\r\n    ids() {\r\n        return Object.keys(this._forms);\r\n    }\r\n\r\n}","import $ from 'jquery';\r\nimport AjaxLookup from './AjaxLookup';\r\nimport AutoSuggest from './AutoSuggest';\r\nimport Form from './Form';\r\nimport Forms from './Forms';\r\nimport Field from './Field';\r\nimport SelectionListOption from './SelectionListOption';\r\nimport getSelect2CustomOptionClass from './Select2CustomOption';\r\n\r\nexport let currentUrl = new URL(window.location);\r\nexport let forms = new Forms();\r\nexport { AjaxLookup, AutoSuggest, Form, SelectionListOption };\r\n\r\nlet $document = $(document),\r\n    $body = $(\"body\");\r\n\r\n// Remove spinner (immediately)\r\nlet _removeSpinner = ew.removeSpinner;\r\n\r\n// Remove spinner\r\nexport function removeSpinner() {\r\n    var timer = $body.data(\"_spinner\");\r\n    if (timer)\r\n        timer.cancel();\r\n    timer = $.later(500, null, function() {\r\n        if ($document.data(\"_ajax\") !== true) { // Ajax not running\r\n            _removeSpinner();\r\n            $(\"form.ew-form\").each(function() {\r\n                var frm = forms.get(this.id);\r\n                if (frm) {\r\n                    frm.focus();\r\n                    return false;\r\n                }\r\n            });\r\n        }\r\n    });\r\n    $body.data(\"_spinner\", timer);\r\n}\r\n\r\n// Create select2\r\nexport function createSelect(options) {\r\n    if (options.selectId.includes(\"$rowindex$\"))\r\n        return;\r\n    $.fn.select2.amd.require(\r\n        [\"select2/utils\", \"select2/results\", \"select2/dropdown/infiniteScroll\", \"select2/dropdown/hidePlaceholder\", \"select2/dropdown/selectOnClose\"],\r\n        (function(opts) {\r\n            return function (Utils, ResultsList, InfiniteScroll, HidePlaceholder, SelectOnClose) {\r\n                let options = Object.assign({}, ew.selectOptions, opts);\r\n                if (options.resultsAdapter == null) {\r\n                    options.resultsAdapter = ResultsList;\r\n                    if (options.dropdown && options.columns && options.customOption) {\r\n                        options.resultsAdapter = Utils.Decorate(\r\n                            options.resultsAdapter,\r\n                            getSelect2CustomOptionClass(Utils)\r\n                        );\r\n                        if (options.iconClass && options.multiple && !options.templateResult) {\r\n                            options.templateResult = (result) => '<label class=\"' + options.iconClass + ' ew-dropdown-label\">' + result.text + '</label>';\r\n                        }\r\n                    }\r\n                    if (options.ajax != null) {\r\n                        options.resultsAdapter = Utils.Decorate(\r\n                            options.resultsAdapter,\r\n                            InfiniteScroll\r\n                        );\r\n                    }\r\n                    if (options.placeholder != null) {\r\n                        options.resultsAdapter = Utils.Decorate(\r\n                            options.resultsAdapter,\r\n                            HidePlaceholder\r\n                        );\r\n                    }\r\n                    if (options.selectOnClose) {\r\n                        options.resultsAdapter = Utils.Decorate(\r\n                            options.resultsAdapter,\r\n                            SelectOnClose\r\n                        );\r\n                    }\r\n                }\r\n                if ($.isObject(options.ajax)) {\r\n                    let lookup = new ew.AjaxLookup(options.ajax)\r\n                    options.ajax = {\r\n                        url: (params) => {\r\n                            let start = params.page ? (params.page - 1) * (settings.limit || ew.AUTO_SUGGEST_MAX_ENTRIES) : -1;\r\n                            return lookup.getUrl(params.term, start);\r\n                        },\r\n                        type: \"POST\",\r\n                        dataType: \"json\",\r\n                        data: lookup.generateRequest(),\r\n                        delay: options.debounce,\r\n                        processResults: (data) => {\r\n                            return {\r\n                                results: lookup.transform(data).map(item => {\r\n                                    return {\r\n                                        id: item[0],\r\n                                        text: lookup.formatResult({ lf: item[0], df: item[1], df2: item[2], df3: item[3], df4: item[4] })\r\n                                    };\r\n                                }),\r\n                                pagination: {\r\n                                    more: data.length < lookup.recordCount\r\n                                }\r\n                            }\r\n                        }\r\n                    };\r\n                }\r\n                $(\"select[data-select2-id='\" + options.selectId + \"']\").select2(options);\r\n                if (options.multiple && options.minimumResultsForSearch === Infinity) {\r\n                    $(\"select[id='<#= ctl #>']\").on(\"select2:opening select2:closing\", function(event) {\r\n                        $(this).parent().find(\".select2-search__field\").prop(\"disabled\", true);\r\n                    });\r\n                }\r\n            };\r\n        })(options)\r\n    );\r\n}\r\n\r\n// Init icon tooltip\r\nexport function initIcons(e) {\r\n    var el = (e && e.target) ? e.target : document;\r\n    $(el).find(\".ew-icon\").closest(\"a, button\").add(\".ew-tooltip\").tooltip({\r\n        container: \"body\",\r\n        trigger: (ew.IS_MOBILE) ? \"manual\" : \"hover\",\r\n        placement: \"bottom\",\r\n        sanitizeFn: ew.sanitizeFn\r\n    });\r\n}\r\n\r\n// Init password options\r\nexport function initPasswordOptions(e) {\r\n    var el = (e && e.target) ? e.target : document;\r\n    if ($.fn.pStrength && typeof ew.MIN_PASSWORD_STRENGTH != \"undefined\") {\r\n        $(el).find(\".ew-password-strength\").each(function() {\r\n            var $this = $(this);\r\n            if (!$this.data(\"pStrength\"))\r\n                $this.pStrength({\r\n                    \"changeBackground\": false,\r\n                    \"backgrounds\": [],\r\n                    \"passwordValidFrom\": ew.MIN_PASSWORD_STRENGTH,\r\n                    \"onPasswordStrengthChanged\": function(strength, percentage) {\r\n                        var $this = $(this), $pst = $(\"[id='\" + $this.attr(\"data-password-strength\") + \"']\"), // Do not use #\r\n                            $pb = $pst.find(\".progress-bar\");\r\n                        $pst.width($this.outerWidth());\r\n                        if ($this.val()) {\r\n                            var pct = percentage + \"%\";\r\n                            if (percentage < 25) {\r\n                                $pb.addClass(\"bg-danger\").removeClass(\"bg-warning bg-info bg-success\");\r\n                            } else if (percentage < 50) {\r\n                                $pb.addClass(\"bg-warning\").removeClass(\"bg-danger bg-info bg-success\");\r\n                            } else if (percentage < 75) {\r\n                                $pb.addClass(\"bg-info\").removeClass(\"bg-danger bg-warning bg-success\");\r\n                            } else {\r\n                                $pb.addClass(\"bg-success\").removeClass(\"bg-danger bg-warning bg-info\");\r\n                            }\r\n                            $pb.css(\"width\", pct);\r\n                            if (percentage > 25)\r\n                                pct = ew.language.phrase(\"PasswordStrength\").replace(\"%p\", pct);\r\n                            $pb.html(pct);\r\n                            $pst.removeClass(\"d-none\").show();\r\n                            $this.data(\"validated\", percentage >= ew.MIN_PASSWORD_STRENGTH);\r\n                        } else {\r\n                            $pst.addClass(\"d-none\").hide();\r\n                            $this.data(\"validated\", null);\r\n                        }\r\n                    }\r\n                });\r\n        });\r\n    }\r\n    if ($.fn.pGenerator) {\r\n        $(el).find(\".ew-password-generator\").each(function() {\r\n            var $this = $(this);\r\n            if (!$this.data(\"pGenerator\"))\r\n                $this.pGenerator({\r\n                    \"passwordLength\": ew.GENERATE_PASSWORD_LENGTH,\r\n                    \"uppercase\": ew.GENERATE_PASSWORD_UPPERCASE,\r\n                    \"lowercase\": ew.GENERATE_PASSWORD_LOWERCASE,\r\n                    \"numbers\": ew.GENERATE_PASSWORD_NUMBER,\r\n                    \"specialChars\": ew.GENERATE_PASSWORD_SPECIALCHARS,\r\n                    \"onPasswordGenerated\": function(pwd) {\r\n                        var $this = $(this);\r\n                        $(\"#\" + $this.attr(\"data-password-field\")).val(pwd).change().focus().triggerHandler(\"click\"); // Trigger click to remove \"is-invalid\" class (Do not use $this.data)\r\n                        $(\"#\" + $this.attr(\"data-password-confirm\")).val(pwd);\r\n                        $(\"#\" + $this.attr(\"data-password-strength\")).addClass(\"d-none\").hide();\r\n                    }\r\n                });\r\n        });\r\n    }\r\n}\r\n\r\n// Get API action URL\r\nexport function getApiUrl(action, query) {\r\n    var url = ew.PATH_BASE + ew.API_URL,\r\n        params = new URLSearchParams(query);\r\n    if (ew.USE_URL_REWRITE) {\r\n        if ($.isString(action)) { // Route as string\r\n            url += action ? action : \"\";\r\n        } else if (Array.isArray(action)) { // Route as array\r\n            var route = action.map(function(v) {\r\n                return encodeURIComponent(v);\r\n            }).join(\"/\");\r\n            url += route ? route : \"\";\r\n        }\r\n    } else {\r\n        if (action)\r\n            params.set(ew.API_ACTION_NAME, action);\r\n    }\r\n    var qs = params.toString();\r\n    return url + (qs ? \"?\" + qs : \"\");\r\n}\r\n\r\n// Set session timer\r\nexport function setSessionTimer() {\r\n    var timeoutTime, timer, keepAliveTimer, counter,\r\n        useKeepAlive = (ew.SESSION_KEEP_ALIVE_INTERVAL > 0 || ew.IS_LOGGEDIN && ew.IS_AUTOLOGIN);\r\n    // Keep alive\r\n    var keepAlive = () => {\r\n        $.get(getApiUrl(ew.API_SESSION_ACTION), { \"rnd\": random() }, (token) => {\r\n            if (token && $.isObject(token)) { // PHP\r\n                ew.TOKEN_NAME = token[ew.TOKEN_NAME_KEY];\r\n                ew.ANTIFORGERY_TOKEN = token[ew.ANTIFORGERY_TOKEN_KEY];\r\n            }\r\n        });\r\n    };\r\n    // Reset timer\r\n    var resetTimer = () => {\r\n        counter = ew.SESSION_TIMEOUT_COUNTDOWN;\r\n        timeoutTime = ew.SESSION_TIMEOUT - ew.SESSION_TIMEOUT_COUNTDOWN;\r\n        if (timeoutTime < 0) { // Timeout now\r\n            timeoutTime = 0;\r\n            counter = ew.SESSION_TIMEOUT;\r\n        }\r\n        if (timer)\r\n            timer.cancel(); // Clear timer\r\n    };\r\n    // Timeout\r\n    var timeout = () => {\r\n        if (keepAliveTimer)\r\n            keepAliveTimer.cancel(); // Stop keep alive\r\n        if (counter > 0) {\r\n            let timerInterval;\r\n            Swal.fire({\r\n                ...ew.sweetAlertSettings,\r\n                html: '<p class=\"text-danger\">' + ew.language.phrase(\"SessionWillExpire\").replace(\"%s\", '<span class=\"ew-session-counter\">' + counter + '</span>') + '</p>',\r\n                showConfirmButton: true,\r\n                confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n                timer: counter * 1000,\r\n                timerProgressBar: true,\r\n                allowOutsideClick: false,\r\n                allowEscapeKey: false,\r\n                onBeforeOpen: () => {\r\n                    timerInterval = setInterval(() => {\r\n                        const content = Swal.getContent();\r\n                        const cnt = content.querySelector(\".ew-session-counter\")\r\n                        if (cnt)\r\n                            cnt.textContent = Math.round(Swal.getTimerLeft() / 1000);\r\n                    }, 1000)\r\n                },\r\n                onClose: () => {\r\n                    clearInterval(timerInterval);\r\n                }\r\n            }).then((result) => {\r\n                if (result.value) { // OK button pressed\r\n                    keepAlive();\r\n                    if (!useKeepAlive && ew.SESSION_TIMEOUT > 0)\r\n                        setTimer();\r\n                } else if (result.dismiss === Swal.DismissReason.timer) { // Timeout\r\n                    resetTimer();\r\n                    window.location = ew.TIMEOUT_URL + \"?expired=1\";\r\n                }\r\n            });\r\n        }\r\n    };\r\n    // Set timer\r\n    var setTimer = () => {\r\n        resetTimer(); // Reset timer first\r\n        timer = $.later(timeoutTime * 1000, null, timeout);\r\n    };\r\n    if (useKeepAlive) { // Keep alive\r\n        var keepAliveInterval = (ew.SESSION_KEEP_ALIVE_INTERVAL > 0) ? ew.SESSION_KEEP_ALIVE_INTERVAL : ew.SESSION_TIMEOUT - ew.SESSION_TIMEOUT_COUNTDOWN;\r\n        if (keepAliveInterval <= 0)\r\n            keepAliveInterval = 60;\r\n        keepAliveTimer = $.later(keepAliveInterval * 1000, null, keepAlive, null, true); // Periodic\r\n    } else {\r\n        if (ew.SESSION_TIMEOUT > 0) // Set session timeout\r\n            setTimer();\r\n    }\r\n}\r\n\r\n// Init export links\r\nexport function initExportLinks(e) {\r\n    var el = (e && e.target) ? e.target : document;\r\n    $(el).find(\".ew-export-link[href]:not(.ew-email):not(.ew-print):not(.ew-xml)\").click(function(e) {\r\n        var href = $(this).attr(\"href\");\r\n        if (href && href != \"#\")\r\n            fileDownload(href);\r\n        e.preventDefault();\r\n    });\r\n}\r\n\r\n// Init multi-select checkboxes\r\nexport function initMultiSelectCheckboxes(e) {\r\n    var el = (e && e.target) ? e.target : document,\r\n        $el = $(el),\r\n        $cbs = $el.find(\"input[type=checkbox].ew-multi-select\");\r\n    var _update = function(id) {\r\n        var $els = $cbs.filter(\"[name^='\" + id + \"_']\"), cnt = $els.length, len = $els.filter(\":checked\").length;\r\n        $els.closest(\"form\").find(\"input[type=checkbox]#\" + id)\r\n            .prop(\"checked\", len == cnt).prop(\"indeterminate\", len != cnt && len != 0);\r\n    };\r\n    $cbs.click(function(e) {\r\n        _update(this.name.split(\"_\")[0]);\r\n    });\r\n    $el.find(\"input[type=checkbox].ew-priv:not(.ew-multi-select)\").each(function() {\r\n        _update(this.id); // Init\r\n    });\r\n}\r\n\r\n// Download file\r\nexport function fileDownload(href, data) {\r\n    let win = window.parent,\r\n        jq = win.jQuery,\r\n        swal = win.Swal,\r\n        doc = win.document,\r\n        $doc = jq(doc),\r\n        method = data ? \"POST\" : \"GET\",\r\n        isHtml = href.includes(\"export=html\");\r\n    return swal.fire({\r\n        ...ew.sweetAlertSettings,\r\n        html: \"<p>\" + ew.language.phrase(\"Exporting\") + \"</p>\",\r\n        allowOutsideClick: false,\r\n        allowEscapeKey: false,\r\n        onBeforeOpen: () => {\r\n            swal.showLoading(),\r\n            jq.ajax({\r\n                url: href,\r\n                type: method,\r\n                cache: false,\r\n                data: data || null,\r\n                xhrFields: {\r\n                    responseType: isHtml ? \"text\" : \"blob\"\r\n                }\r\n            }).done((data, textStatus, jqXHR) => {\r\n                var url = win.URL.createObjectURL(isHtml ? new Blob([data], { type: \"text/html\" }) : data),\r\n                    a = doc.createElement(\"a\"),\r\n                    cd = jqXHR.getResponseHeader(\"Content-Disposition\"),\r\n                    m = cd.match(/\\bfilename=((['\"])(.+)\\2|([^;]+))/i);\r\n                a.style.display = \"none\";\r\n                a.href = url;\r\n                if (m)\r\n                    a.download = m[3] || m[4];\r\n                doc.body.appendChild(a);\r\n                a.click();\r\n                $doc.trigger(\"export\", [{ \"type\": \"done\", \"url\": href, \"objectUrl\": url }]);\r\n                win.URL.revokeObjectURL(url);\r\n                swal.close();\r\n            }).fail(() => {\r\n                swal.showValidationMessage(\"<div class='text-danger'><h4>\" + ew.language.phrase(\"FailedToExport\") + \"</h4>\" + response + \"</div>\");\r\n                $doc.trigger(\"export\", [{ \"type\": \"fail\", \"url\": href }]);\r\n            }).always(() => {\r\n                $doc.trigger(\"export\", [{ \"type\": \"always\", \"url\": href }]);\r\n            });\r\n        }\r\n    });\r\n}\r\n\r\n// Lazy load images\r\nexport function lazyLoad(e) {\r\n    if (!ew.LAZY_LOAD)\r\n        return;\r\n    var el = (e && e.target) ? e.target : document;\r\n    $(el).find(\"img.ew-lazy\").each(function () {\r\n        this.src = this.dataset.src;\r\n    });\r\n    $document.trigger(\"lazyload\"); // All images loaded\r\n}\r\n\r\n// Update select2 dropdown position\r\nexport function updateDropdownPosition() {\r\n    var select = $(\".select2-container--open\").prev(\".ew-select\").data(\"select2\");\r\n    if (select) {\r\n        select.dropdown._positionDropdown();\r\n        select.dropdown._resizeDropdown();\r\n    }\r\n}\r\n\r\n// Colorboxes\r\nexport function initLightboxes(e) {\r\n    if (!ew.USE_COLORBOX)\r\n        return;\r\n    var el = (e && e.target) ? e.target : document;\r\n    var settings = Object.assign({}, ew.lightboxSettings, {\r\n        title: ew.language.phrase(\"LightboxTitle\"),\r\n        current: ew.language.phrase(\"LightboxCurrent\"),\r\n        previous: ew.language.phrase(\"LightboxPrevious\"),\r\n        next: ew.language.phrase(\"LightboxNext\"),\r\n        close: ew.language.phrase(\"LightboxClose\"),\r\n        xhrError: ew.language.phrase(\"LightboxXhrError\"),\r\n        imgError: ew.language.phrase(\"LightboxImgError\")\r\n    });\r\n    $(el).find(\".ew-lightbox\").each(function() {\r\n        var $this = $(this);\r\n        $this.colorbox(Object.assign({ rel: $this.data(\"rel\") }, settings));\r\n    });\r\n}\r\n\r\n// PDFObjects\r\nexport function initPdfObjects(e) {\r\n    if (!ew.EMBED_PDF)\r\n        return;\r\n    var el = (e && e.target) ? e.target : document,\r\n        options = Object.assign({}, ew.PDFObjectOptions);\r\n    $(el).find(\".ew-pdfobject\").not(\":has(.pdfobject)\").each(function() { // Not already embedded\r\n        var $this = $(this), url = $this.data(\"url\"), html = $this.html();\r\n        if (url)\r\n            PDFObject.embed(url, this, Object.assign(options, { fallbackLink: html }));\r\n    });\r\n}\r\n\r\n// Tooltips and popovers\r\nexport function initTooltips(e) {\r\n    var el = (e && e.target) ? e.target : document, $el = $(el);\r\n    $el.find(\"input[data-toggle=tooltip],textarea[data-toggle=tooltip],select[data-toggle=tooltip]\").each(function() {\r\n        var $this = $(this);\r\n        $this.tooltip(Object.assign({ html: true, placement: \"bottom\", sanitizeFn: ew.sanitizeFn }, $this.data()));\r\n    });\r\n    $el.find(\"a.ew-tooltip-link\").each(tooltip); // Init tooltips\r\n    $el.find(\".ew-tooltip\").tooltip({ placement: \"bottom\", sanitizeFn: ew.sanitizeFn });\r\n    $el.find(\".ew-popover\").popover({ sanitizeFn: ew.sanitizeFn });\r\n}\r\n\r\n// Parse JSON\r\nexport function parseJson(data) {\r\n    if ($.isString(data)) {\r\n        try {\r\n            return JSON.parse(data);\r\n        } catch(e) {\r\n            return undefined;\r\n        }\r\n    }\r\n    return data;\r\n}\r\n\r\n// Change search operator\r\nexport function searchOperatorChanged(el) {\r\n    var $el = $(el),\r\n        $p = $el.closest(\"[id^=r_], [id^=xsc_]\"),\r\n        parm = el.id.substr(2),\r\n        $fld = $p.find(\".ew-search-field\"),\r\n        $fld2 = $p.find(\".ew-search-field2\"),\r\n        $y = $fld2.find(\"[name='y_\" + parm + \"'], [name='y_\" + parm + \"[]']\"),\r\n        hasY = $y.length,\r\n        $cond = $p.find(\".ew-search-cond\"),\r\n        hasCond = $cond.length, // Has condition and operator 2\r\n        $and = $p.find(\".ew-search-and\"),\r\n        $opr = $p.find(\".ew-search-operator\"),\r\n        opr = $opr.find(\"[name='z_\" + parm + \"']\").val(),\r\n        $opr2 = $p.find(\".ew-search-operator2\"),\r\n        opr2 = $opr2.find(\"[name='w_\" + parm + \"']\").val(),\r\n        isBetween = opr == \"BETWEEN\", // Can only be operator 1\r\n        isNullOpr = [\"IS NULL\", \"IS NOT NULL\"].includes(opr),\r\n        isNullOpr2 = [\"IS NULL\", \"IS NOT NULL\"].includes(opr2),\r\n        hideOpr2 = !hasY || isBetween,\r\n        hideX = isNullOpr,\r\n        hideY = !isBetween && (!hasCond || isNullOpr2);\r\n    $cond.toggleClass(\"d-none\", hideOpr2).find(\":input\").prop(\"disabled\", hideOpr2);\r\n    $and.toggleClass(\"d-none\", !isBetween);\r\n    $opr2.toggleClass(\"d-none\", hideOpr2).find(\":input\").prop(\"disabled\", hideOpr2);\r\n    $fld.toggleClass(\"d-none\", hideX).find(\":input\").prop(\"disabled\", hideX);\r\n    $fld2.toggleClass(\"d-none\", hideY).find(\":input\").prop(\"disabled\", hideY);\r\n}\r\n\r\n// Init forms\r\nfunction initForms(e) {\r\n    let el = (e && e.target) ? e.target : document,\r\n        $el = $(el),\r\n        ids = ew.forms.ids();\r\n    for (let id of ids) {\r\n        if ($el.find(\"#\" + id))\r\n            forms.get(id).init();\r\n    }\r\n}\r\n\r\n// Prompt/Confirm/Alert\r\nfunction _prompt(text, cb, input, validator) {\r\n    if (input) { // Prompt\r\n        return Swal.fire({\r\n            ...ew.sweetAlertSettings,\r\n            html: text,\r\n            input: \"text\",\r\n            confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n            showCancelButton: $.isFunction(cb),\r\n            cancelButtonText: ew.language.phrase(\"CancelBtn\"),\r\n            inputValidator: validator || ((value) => {\r\n                if (!value)\r\n                    return ew.language.phrase(\"EnterValue\");\r\n            })\r\n        }).then(result => {\r\n            if ($.isFunction(cb))\r\n                cb(result.value);\r\n        });\r\n    } else { // Confirm or Alert\r\n        return Swal.fire({\r\n            ...ew.sweetAlertSettings,\r\n            html: \"<div>\" + text + \"</div>\",\r\n            confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n            showCancelButton: $.isFunction(cb),\r\n            cancelButtonText: ew.language.phrase(\"CancelBtn\"),\r\n        }).then(result => {\r\n            if ($.isFunction(cb))\r\n                cb(result.value);\r\n        });\r\n    }\r\n}\r\n\r\nexport { _prompt as prompt };\r\n\r\n// Toast\r\nexport function toast(options) {\r\n    options = Object.assign({}, ew.toastOptions, options);\r\n    $document.Toasts(\"create\", options);\r\n    var position = options.position,\r\n        $container = $(\"#toastsContainer\" + position[0].toUpperCase() + position.substring(1));\r\n    return $container.children().first();\r\n}\r\n\r\n/**\r\n * Show toast\r\n *\r\n * @param {string} msg - Message\r\n * @param {string} type - CSS class: \"muted|primary|success|info|warning|danger\"\r\n */\r\nexport function showToast(msg, type) {\r\n    type = type || \"danger\";\r\n    return toast({\r\n        class: \"ew-toast bg-\" + type,\r\n        title: ew.language.phrase(type),\r\n        body: msg,\r\n        autohide: (type == \"success\") ? ew.autoHideSuccessMessage : false, // Autohide for success message\r\n        delay: (type == \"success\") ? ew.autoHideSuccessMessageDelay: 500\r\n    });\r\n}\r\n\r\n// Get form.ew-form or div.ew-form HTML element\r\nexport function getForm(el) {\r\n    if (el instanceof Form)\r\n        return el.$element[0];\r\n    var $el = $(el), $f = $el.closest(\".ew-form\");\r\n    if (!$f[0]) // Element not inside form\r\n        $f = $el.closest(\".ew-grid, .ew-multi-column-grid\").find(\".ew-form\").not(\".ew-pager-form\");\r\n    return $f[0];\r\n}\r\n\r\n// Check form data\r\nexport function hasFormData(form) {\r\n    var selector = \"[name^=x_],[name^=y_],[name^=z_],[name^=w_],[name=psearch]\",\r\n        els = $(form).find(selector).filter(\":enabled\").get();\r\n    for (var i = 0, len = els.length; i < len; i++) {\r\n        var el = els[i];\r\n        if (/^(z|w)_/.test(el.name)) {\r\n            if (/^IS/.test($(el).val()))\r\n                return true;\r\n        } else if (el.type == \"checkbox\" || el.type == \"radio\") {\r\n            if (el.checked)\r\n                return true;\r\n        } else if (el.type == \"select-one\" || el.type == \"select-multiple\") {\r\n            if (!!$(el).val())\r\n                return true;\r\n        } else if (el.type == \"text\" || el.type == \"hidden\" || el.type == \"textarea\") {\r\n            if (el.value)\r\n                return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\r\n// Set search type\r\nexport function setSearchType(el, val) {\r\n    var $this = $(el), $form = $this.closest(\"form\"), text = \"\";\r\n    $form.find(\"input[name=psearchtype]\").val(val || \"\");\r\n    if (val == \"=\") {\r\n        text = ew.language.phrase(\"QuickSearchExactShort\");\r\n    } else if (val == \"AND\") {\r\n        text = ew.language.phrase(\"QuickSearchAllShort\");\r\n    } else if (val == \"OR\") {\r\n        text = ew.language.phrase(\"QuickSearchAnyShort\");\r\n    } else {\r\n        text = ew.language.phrase(\"QuickSearchAutoShort\");\r\n    }\r\n    $form.find(\"#searchtype\").html(text + ((text) ? \"&nbsp;\" : \"\"));\r\n    $this.closest(\"ul\").find(\"li\").removeClass(\"active\");\r\n    $this.closest(\"li\").addClass(\"active\");\r\n    return false;\r\n}\r\n\r\n/**\r\n * Update a dynamic selection list\r\n *\r\n * @param {(HTMLElement|HTMLElement[]|string|string[])} obj - Target HTML element(s) or the ID of the element(s)\r\n * @param {(string[]|array[])} parentId - Parent field element names or data\r\n * @param {(boolean|null)} async - async(true) or sync(false) or non-Ajax(null)\r\n * @param {boolean} change - Trigger onchange event\r\n * @returns\r\n */\r\nexport function updateOptions(obj, parentId, async, change) {\r\n    var f = (this.$element) ? this.$element[0] : (this.form) ? this.form : null; // Get form/div element from this\r\n    if (!f)\r\n        return;\r\n    var frm = (this.htmlForm) ? this : forms.get(f.id); // Get Form object\r\n    if (!frm)\r\n        return;\r\n    if (this.form && $.isUndefined(obj)) // Target unspecified\r\n        obj = forms.get(this).getList(this.name).childFields.slice(); // Clone\r\n    else if ($.isString(obj))\r\n        obj = getElements(obj, f);\r\n    if (!obj || Array.isArray(obj) && obj.length == 0)\r\n        return;\r\n    var self = this, promise = Promise.resolve();\r\n    if (Array.isArray(obj) && $.isString(obj[0])) { // Array of id (onchange/onclick event)\r\n        var els = [];\r\n        for (var i = 0, len = obj.length; i < len; i++) {\r\n            var ar = obj[i].split(\" \");\r\n            if (ar.length == 1 && self.form) { // Parent/Child fields in the same table\r\n                var m = getId(self, false).match(/^([xy]\\d*_)/);\r\n                if (m)\r\n                    obj[i] = obj[i].replace(/^([xy]\\d*_)/, m[1]);\r\n            }\r\n            var el = getElements(obj[i], f), names = [];\r\n            els.push(el);\r\n            if (ar.length == 2 && Array.isArray(el)) { // Check if id is \"tblvar fldvar\" and multiple inputs\r\n                var $el = $(el);\r\n                $el.each(function() {\r\n                    if (!names.includes(this.name)) {\r\n                        names.push(this.name);\r\n                        var $elf = $el.filter(\"[name='\" + this.name + \"']\"), typ = $elf.attr(\"type\"),\r\n                            elf = [\"radio\", \"checkbox\"].includes(typ) ? $elf.get() : $elf[0];\r\n                        promise = promise.then(_updateOptions.bind(self, elf, parentId, async, change));\r\n                    }\r\n                });\r\n            } else {\r\n                promise = promise.then(_updateOptions.bind(self, el, parentId, async, change));\r\n            }\r\n        }\r\n        obj = els;\r\n        var list = forms.get(self).getList(self.name);\r\n        if (list && Array.isArray(list.autoFillTargetFields) && list.autoFillTargetFields[0]) // AutoFill\r\n            promise = promise.then(autoFill.bind(null, self));\r\n    } else {\r\n        promise = promise.then(_updateOptions.bind(self, obj, parentId, async, change));\r\n    }\r\n    return promise.then(function() {\r\n        $document.trigger(\"updatedone\", [{ source: self, target: obj }]); // Document \"updatedone\" event fired after all the target elements are updated\r\n    });\r\n}\r\n\r\n/**\r\n * Update a dynamic selection list\r\n *\r\n * @param {(HTMLElement|HTMLElement[]} obj - Target HTML element(s) or the ID of the element(s)\r\n * @param {(string[]|array[])} parentId - Parent field element names or data\r\n * @param {(boolean|null)} async - async(true) or sync(false) or non-Ajax(null)\r\n * @param {boolean} change - Trigger onchange event\r\n * @returns Promise\r\n */\r\nfunction _updateOptions(obj, parentId, async, change) {\r\n    var id = getId(obj, false);\r\n    if (!id)\r\n        return;\r\n    var fo = getForm(obj); // Get form/div element from obj\r\n    if (!fo || !fo.id)\r\n        return;\r\n    var frmo = forms.get(fo.id);\r\n    if (!frmo)\r\n        return;\r\n    var self = this,\r\n        args = Array.from(arguments),\r\n        ar = getOptionValues(obj),\r\n        m = id.match(/^([xy])(\\d*)_/),\r\n        prefix = m ? m[1] : \"\",\r\n        rowindex = m ? m[2] : \"\",\r\n        arp = [],\r\n        list = frmo.getList(id),\r\n        $obj = $(obj).data(\"updating\", true);\r\n    if ($.isUndefined(parentId)) { // Parent IDs not specified, use default\r\n        parentId = list.parentFields.slice(); // Clone\r\n        if (rowindex != \"\") {\r\n            for (var i = 0, len = parentId.length; i < len; i++) {\r\n                var arr = parentId[i].split(\" \");\r\n                if (arr.length == 1) // Parent field in the same table, add row index\r\n                    parentId[i] = parentId[i].replace(/^x_/, \"x\" + rowindex + \"_\");\r\n            }\r\n        }\r\n    }\r\n    if (Array.isArray(parentId) && parentId.length > 0) {\r\n        if (Array.isArray(parentId[0])) { // Array of array => data\r\n            arp = parentId;\r\n        } else if ($.isString(parentId[0])) { // Array of string => Parent IDs\r\n            for (var i = 0, len = parentId.length; i < len; i++)\r\n                arp.push(getOptionValues(parentId[i], fo));\r\n        }\r\n    }\r\n    if (!isAutoSuggest(obj)) // Do not clear Auto-Suggest\r\n        clearOptions(obj);\r\n    var addOpt = function(results) {\r\n        var name = getId(obj);\r\n        results.forEach(function(result) {\r\n            let args = {\"data\": result, \"parents\": arp, \"valid\": true, \"name\": name, \"form\": fo};\r\n            $document.trigger(\"addoption\", [args]);\r\n            if (args.valid)\r\n                newOption(obj, result, fo);\r\n        });\r\n        if (obj.list)\r\n            obj.render();\r\n        selectOption(obj, ar);\r\n        if (change !== false) {\r\n            if (!obj.options && obj.length)\r\n                $obj.first().triggerHandler(\"click\");\r\n            else\r\n                $obj.first().change();\r\n        }\r\n    }\r\n    if ($.isUndefined(async)) // Async not specified, use default\r\n        async = list.ajax;\r\n    var _updateSibling = function() { // Update the y_* element\r\n        if (/s(ea)?rch$/.test(fo.id) && prefix == \"x\") { // Search form\r\n            args[0] = id.replace(/^x_/, \"y_\");\r\n            updateOptions.apply(self, args); // args[0] is string, use updateOptions()\r\n        }\r\n    }\r\n    if (!$.isBoolean(async) || Array.isArray(list.lookupOptions) && list.lookupOptions.length > 0) { // Non-Ajax or Options loaded\r\n        var ds = list.lookupOptions;\r\n        addOpt(ds);\r\n        _updateSibling();\r\n        return ds;\r\n    } else { // Ajax\r\n        var name = getId(obj), data = Object.assign({\r\n            page: list.page,\r\n            field: list.field,\r\n            ajax: \"updateoption\",\r\n            language: ew.LANGUAGE_ID,\r\n            name: name // Name of the target element\r\n        }, getUserParams(\"#p_\" + id, fo)); // Add user parameters\r\n        if (isAutoSuggest(obj) && self.htmlForm) // Auto-Suggest (init form or auto-fill)\r\n            data[\"v0\"] = ar[0] || random(); // Filter by the current value\r\n        else if (isModalLookup(obj)) // Modal-Lookup\r\n            data[\"v0\"] = ar[0] ? (obj.multiple ? ar.join(ew.MULTIPLE_OPTION_SEPARATOR) : ar[0]) : random(); // Filter by the current value\r\n        for (var i = 0, cnt = arp.length; i < cnt; i++) // Filter by parent fields\r\n            data[\"v\" + (i + 1)] = arp[i].join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n        return $.ajax(getApiUrl(ew.API_LOOKUP_ACTION), {\r\n                \"type\": \"POST\", \"dataType\": \"json\", \"data\": data, \"async\": async\r\n            }).done((result) => {\r\n                var ds = result.records || [];\r\n                addOpt(ds);\r\n                _updateSibling();\r\n                $obj.first().trigger(\"updated\", [Object.assign({}, result, { target: obj })]); // Object \"updatedone\" event fired after the object is updated\r\n                return ds;\r\n            }).always(() => $obj.data(\"updating\", false));\r\n    }\r\n}\r\n\r\n// Get user parameters from id\r\nexport function getUserParams(id, root) {\r\n    var id = id.replace(/\\[\\]$/, \"\"), o = {};\r\n    var root = !$.isString(root) ? root : /^#/.test(root) ? root : \"#\" + root;\r\n    var $els = (root) ? $(root).find(id) : $(id);\r\n    var val = $els.val();\r\n    if (val) {\r\n        var params = new URLSearchParams(val);\r\n        params.forEach(function(value, key) {\r\n            o[key] = value;\r\n        });\r\n    }\r\n    return o;\r\n}\r\n\r\n// Apply client side template to a DIV\r\nexport function applyTemplate(divId, tmplId, classId, exportType, data) { // Note: classId = fileName\r\n    var args = {\"data\": data || {}, \"id\": divId, \"template\": tmplId, \"class\": classId, \"export\": exportType, \"enabled\": true};\r\n    $document.trigger(\"rendertemplate\", [args]);\r\n    if (args.enabled) {\r\n        var template = document.getElementById(tmplId).content;\r\n        template.querySelectorAll(\".ew-slot\").forEach(el => {\r\n            var subtmpl = document.getElementById(el.name || el.id);\r\n            if (subtmpl && subtmpl.content) {\r\n                if (el.dataset.rowspan > 1)\r\n                    Array.prototype.slice.call(subtmpl.content.childNodes).forEach(node => node.rowSpan = el.dataset.rowspan);\r\n                el.replaceWith(subtmpl.content);\r\n            } else {\r\n                el.remove();\r\n            }\r\n        });\r\n        if ($.views) {\r\n            var textContent = template.textContent;\r\n            if (textContent.includes(\"{{\") && textContent.includes(\"}}\")) { // Includes JsRender template\r\n                var scripts = Array.prototype.slice.call(template.querySelectorAll(\"script\")); // Extract scripts\r\n                scripts.forEach(item => item.remove());\r\n                var div = document.createElement(\"div\");\r\n                div.appendChild(template);\r\n                var html = div.innerHTML, tmpl = $.templates(html);\r\n                document.getElementById(divId).innerHTML = tmpl.render(args.data, ew.jsRenderHelpers);\r\n                scripts.forEach(item => document.body.appendChild(item)); // Add scripts\r\n            } else {\r\n                document.getElementById(divId).appendChild(template);\r\n            }\r\n        } else {\r\n            document.getElementById(divId).appendChild(template);\r\n        }\r\n    }\r\n    if (exportType && exportType != \"print\") { // Export custom\r\n        $(function() {\r\n            var $meta = $(\"meta[http-equiv='Content-Type']\"),\r\n                html = \"<html><head>\",\r\n                $div = $(\"#\" + divId);\r\n            if ($div.children(0).is(\"div[id^=ct_]\")) // Remove first div tag\r\n                $div = $div.children(0);\r\n            if ($meta[0])\r\n                html += \"<meta http-equiv='Content-Type' content='\" + $meta.attr(\"content\") + \"'>\";\r\n            if (exportType == \"pdf\") {\r\n                html += \"<link rel='stylesheet' type='text/css' href='\" + ew.PDF_STYLESHEET_FILENAME + \"'>\";\r\n            } else {\r\n                html += \"<style>\" + $.ajax({async: false, type: \"GET\", url: ew.PROJECT_STYLESHEET_FILENAME}).responseText + \"</style>\";\r\n            }\r\n            html += \"</\" + \"head><body>\";\r\n            $(\".ew-chart-top\").each(function() {\r\n                html += $(this).html();\r\n            });\r\n            html += $div.html();\r\n            $(\".ew-chart-bottom\").each(function() {\r\n                html += $(this).html();\r\n            });\r\n            html += \"</body></html>\";\r\n            var url = currentPage(),\r\n                data = { \"customexport\": exportType, \"data\": html, \"filename\": args.class };\r\n            data[ew.TOKEN_NAME] = ew.ANTIFORGERY_TOKEN;\r\n            if (exportType == \"email\") {\r\n                var str = currentUrl.searchParams.toString() + \"&\" + $.param(data); // Add data\r\n                $.post(url, str, function(result) {\r\n                    showMessage(result);\r\n                });\r\n            } else {\r\n                fileDownload(url, data);\r\n            }\r\n            window.parent.jQuery(\"body\").css(\"cursor\", \"default\"); // Use window.parent in case in iframe\r\n        });\r\n    }\r\n}\r\n\r\n// Toggle group\r\nexport function toggleGroup(el) {\r\n    var $el = $(el), $tr = $el.closest(\"tr\"), selector = \"tr\", level;\r\n    for (var i = 1; i <= 6; i++) {\r\n        var idx = (i == 1) ? \"\" : \"-\" + i;\r\n        var data = $tr.data(\"group\" + idx);\r\n        if ($.isValue(data)) {\r\n            level = i;\r\n            if (data != \"\")\r\n                selector += \"[data-group\" + idx + \"='\" + String(data).replace(/'/g, \"\\\\'\") + \"']\";\r\n        }\r\n    }\r\n    if ($el.hasClass(\"icon-collapse\")) { // Hide\r\n        $(selector).slice(1).addClass(\"ew-rpt-grp-hide-\" + level);\r\n        $el.toggleClass(\"icon-expand icon-collapse\");\r\n    } else {\r\n        $(selector).slice(1).removeClass(\"ew-rpt-grp-hide-\" + level);\r\n        $el.toggleClass(\"icon-expand icon-collapse\");\r\n    }\r\n}\r\n\r\n// Check if boolean value is true\r\nexport function convertToBool(value) {\r\n    return value && [\"1\", \"y\", \"t\", \"true\"].includes(value.toLowerCase());\r\n}\r\n\r\n// Check if element value changed\r\nexport function valueChanged(fobj, infix, fld, bool) {\r\n    var nelm = getElements(\"x\" + infix + \"_\" + fld, fobj);\r\n    var oelm = getElement(\"o\" + infix + \"_\" + fld, fobj); // Hidden element\r\n    var fnelm = getElement(\"fn_x\" + infix + \"_\" + fld, fobj); // Hidden element\r\n    if (!oelm && (!nelm || Array.isArray(nelm) && nelm.length == 0))\r\n        return false;\r\n    var getValue = (obj) => getOptionValues(obj).join();\r\n    if (oelm && nelm) {\r\n        if (bool) {\r\n            if (convertToBool(getValue(oelm)) === convertToBool(getValue(nelm)))\r\n                return false;\r\n        } else {\r\n            var oldvalue = getValue(oelm);\r\n            var newvalue = (fnelm) ? getValue(fnelm) : getValue(nelm);\r\n            if (oldvalue == newvalue)\r\n                return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\n// Set language\r\nexport function setLanguage(el) {\r\n    var $el = $(el), val = $el.val() || $el.data(\"language\");\r\n    if (!val)\r\n        return;\r\n    var params = new URLSearchParams();\r\n    currentUrl.searchParams.forEach(function(value, key) {\r\n        params.append(key, ew.sanitize(value));\r\n    });\r\n    params.set(\"language\", ew.sanitize(val));\r\n    currentUrl.search = params.toString();\r\n    window.location = currentUrl.toString();\r\n}\r\n\r\n/**\r\n * Submit action\r\n *\r\n * @param {Event} e\r\n * @param {Object} args - Arguments\r\n * @param {HTMLElement} args.f - HTML form (default is the form of the source element)\r\n * @param {string} args.url - URL to which the request is sent (default is current page)\r\n * @param {Object} args.key - Key as object (for single record only)\r\n * @param {string} args.msg - Confirm message\r\n * @param {string} args.action - Custom action name\r\n * @param {string} args.select - \"single\"|\"s\" (single record) or \"multiple\"|\"m\" (multiple records, default)\r\n * @param {string} args.method - \"ajax\"|\"a\" (Ajax by HTTP POST) or \"post\"|\"p\" (HTTP POST, default)\r\n * @param {Object} args.data - Object of user data that is sent to the server\r\n * @param {string|callback|Object} success - Function to be called if the request succeeds, or settings for jQuery.ajax() (for Ajax only)\r\n * @returns\r\n */\r\nexport function submitAction(e, args) {\r\n    var el = e.target || e.srcElement, $el = $(el),\r\n        f = args.f || $el.closest(\"form\")[0] || currentForm, $f = $(f),\r\n        key = args.key, action = args.action, url = args.url || currentPage(),\r\n        msg = args.msg, data = args.data, success = args.success,\r\n        isPost = !args.method || sameText(args.method[0], \"p\"),\r\n        isMultiple = !args.select && !args.key || args.select && sameText(args.select[0], \"m\");\r\n    if (isMultiple && !$f[0])\r\n        return false;\r\n    if (isMultiple && !keySelected($f[0])) {\r\n        _prompt(\"<p class=\\\"text-danger\\\">\" + ew.language.phrase(\"NoRecordSelected\") + \"</p>\");\r\n        return false;\r\n    }\r\n    var _success = function(result) {\r\n        showMessage(result);\r\n    };\r\n    var _submit = function() {\r\n        if (isPost) { // Post back\r\n            if (action) // Action\r\n                $(\"<input>\").attr({type: \"hidden\", name: \"useraction\", value: action}).appendTo($f);\r\n            if ($.isObject(data)) { // User data\r\n                for (var k in data) {\r\n                    var $input = $f.find(\"input[type=hidden][name='\" + k + \"']\");\r\n                    if ($input[0])\r\n                        $input.val(data[k]);\r\n                    else\r\n                        $(\"<input>\").attr({type: \"hidden\", name: k, value: data[k]}).appendTo($f);\r\n                }\r\n            }\r\n            if (!isMultiple && $.isObject(key)) { // Key\r\n                for (var k in key)\r\n                    $(\"<input>\").attr({type: \"hidden\", name: k, value: key[k]}).appendTo($f);\r\n            }\r\n            $f.prop(\"action\", url).submit();\r\n            if (action) // Action\r\n                $f.find(\"input[type=hidden][name=useraction]\").remove(); // Remove the \"useraction\" element\r\n        } else { // Ajax\r\n            data = $.isObject(data) ? $.param(data) : $.isString(data) ? data : \"\"; // User data\r\n            if (action)\r\n                data += \"&useraction=\" + action + \"&ajax=\" + action; // Action\r\n            if (isMultiple) // Multiple records\r\n                data += \"&\" + $f.find(\"input[name='key_m[]']:checked\").serialize(); // Keys\r\n            else if (key) // Single record\r\n                data += \"&\" + ($.isObject(key) ? $.param(key) : key); // Key\r\n            if (success && $.isString(success))\r\n                success = window[success];\r\n            if ($.isFunction(success)) {\r\n                $.post(url, data, success);\r\n            } else if ($.isObject(success)) { // \"success\" is Ajax settings\r\n                success.data = data;\r\n                success.method = success.method || \"POST\";\r\n                success.success = success.success || _success;\r\n                $.ajax(url, success);\r\n            } else {\r\n                $.post(url, data, _success);\r\n            }\r\n        }\r\n    };\r\n    if (msg) {\r\n        _prompt(msg, (result) => {\r\n            if (result)\r\n                _submit();\r\n        });\r\n    } else {\r\n        _submit();\r\n    }\r\n    return false;\r\n}\r\n\r\n/**\r\n * Export with selected records and/or Custom Template\r\n *\r\n * @param {string} f - Form ID\r\n * @param {string} url - Form action\r\n * @param {string} type - Export type\r\n * @param {boolean} custom - Using Custom Template\r\n * @param {boolean} sel - Selected records only\r\n * @param {Object} fobj - email form object\r\n * @returns false\r\n */\r\nfunction _export(f, url, type, custom, sel, fobj) {\r\n    if (!f)\r\n        return false;\r\n    var $f = $(f),\r\n        target = $f.attr(\"target\"),\r\n        action = $f.attr(\"action\"),\r\n        cb = sel && $f.find(\"input[type=checkbox][name='key_m[]']\")[0];\r\n    if (cb && !keySelected(f)) {\r\n        _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n        return false;\r\n    }\r\n    if (custom) { // Use Custom Template\r\n        $(\"iframe.ew-export\").remove();\r\n        if (type == \"email\")\r\n            url += (\"&\" + $(fobj).serialize()).replace(/&export=email/i, \"\"); // Remove duplicate export=email\r\n        if (cb) {\r\n            $(\"<iframe>\").attr(\"name\", \"ew-export-frame\").addClass(\"ew-export d-none\").appendTo($body);\r\n            try {\r\n                $f.append($(\"<input type='hidden'>\").attr({name: \"custom\", value: \"1\"}))\r\n                    .attr({ \"action\": url, \"target\": \"ew-export-frame\" }).find(\"input[name=exporttype]\").val(type).end().submit();\r\n            } finally { // Reset\r\n                $f.attr({ \"target\": target || \"\", \"action\": action }).find(\"input[name=custom]\").remove();\r\n            }\r\n        } else {\r\n            $(\"<iframe>\").attr({ name: \"ew-export-frame\", src: url }).addClass(\"ew-export d-none\").appendTo($body);\r\n        }\r\n    } else { // No Custom Template\r\n        $f.find(\"input[name=exporttype]\").val(type);\r\n        if ([\"xml\", \"print\"].includes(type))\r\n            $f.submit(); // Submit the form directly\r\n        else\r\n            fileDownload(action, $f.serialize());\r\n    }\r\n    return false;\r\n}\r\n\r\nexport { _export as export };\r\n\r\n/**\r\n * Remove spaces\r\n * @param {string} value\r\n * @returns {string}\r\n */\r\nexport function removeSpaces(value) {\r\n    return (/^(<(p|br)\\/?>(&nbsp;)?(<\\/p>)?)?$/i.test(value.replace(/\\s/g, \"\"))) ? \"\" : value;\r\n}\r\n\r\n/**\r\n * Check if hidden text area (HTML editor)\r\n * @param {HTMLElement|jQuery} el HTML element or jQuery object\r\n * @returns {boolean}\r\n */\r\nexport function isHiddenTextArea(el) {\r\n    var $el = $(el);\r\n    return $el.is(\":hidden\") && $el.data(\"editor\");\r\n}\r\n\r\n/**\r\n * Check if modal lookup\r\n * @param {HTMLElement|jQuery} el HTML element or jQuery object\r\n * @returns {boolean}\r\n */\r\nexport function isModalLookup(el) {\r\n    var $el = $(el);\r\n    return $el.is(\":hidden\") && $el.data(\"lookup\");\r\n}\r\n\r\n/**\r\n * Check if hidden textbox (Auto-Suggest)\r\n * @param {HTMLElement|jQuery} el HTML element or jQuery object\r\n * @returns {boolean}\r\n */\r\nexport function isAutoSuggest(el) {\r\n    var $el = $(el);\r\n    return $el.is(\":hidden\") && $el.data(\"autosuggest\");\r\n}\r\n\r\n/**\r\n * Alert\r\n *\r\n * @param {string} msg - Message\r\n * @param {callback} cb - Callback function\r\n * @param {string} type - CSS class: \"muted|primary|success|info|warning|danger\"\r\n */\r\nfunction _alert(msg, cb, type) {\r\n    return Swal.fire({\r\n        ...ew.sweetAlertSettings,\r\n        html: '<p class=\"text-' + (type || 'danger') + '\">' + msg + '</p>',\r\n        confirmButtonText: ew.language.phrase(\"OKBtn\")\r\n    }).then(result => {\r\n        if ($.isFunction(cb))\r\n            cb(result.value);\r\n    });\r\n}\r\n\r\nexport { _alert as alert };\r\n\r\n/**\r\n * Clear error message\r\n * @param {HTMLElement|HTMLElement[]|jQuery} el HTML element(s) or jQuery\r\n */\r\nexport function clearError(el) {\r\n    if (el.jquery) { // el is jQuery object\r\n        let typ = el.attr(\"type\");\r\n        el = (typ == \"checkbox\" || typ == \"radio\") ? el.get() : el[0];\r\n    }\r\n    $(el).closest(\"[id^=el_], .form-group\").find(\".invalid-feedback\").html(\"\");\r\n}\r\n\r\n/**\r\n * Show error message\r\n * @param {Form} frm Form object\r\n * @param {HTMLElement|HTMLElement[]|jQuery} el HTML element(s) or jQuery\r\n * @param {string} msg Error message\r\n * @param {boolean} focus Set focus\r\n */\r\nexport function onError(frm, el, msg, focus) {\r\n    if (el.jquery) { // el is jQuery object\r\n        let typ = el.attr(\"type\");\r\n        el = (typ == \"checkbox\" || typ == \"radio\") ? el.get() : el[0];\r\n    } else if (el instanceof Field) { // el is Field object\r\n        el = el.element;\r\n    }\r\n    $(el).closest(\"[id^=el_], .form-group\").find(\".invalid-feedback\").append(\"<p>\" + msg + \"</p>\");\r\n    if (focus)\r\n        setFocus(el);\r\n    frm?.makeVisible(el);\r\n    return false;\r\n}\r\n\r\n/**\r\n * Set focus\r\n * @param {HTMLElement|HTMLElement[]} obj HTML element(s)\r\n */\r\nexport function setFocus(obj) {\r\n    if (!obj)\r\n        return;\r\n    var $obj = $(obj);\r\n    if (isHidden($obj))\r\n        return;\r\n    if (isHiddenTextArea(obj)) { // HTML editor\r\n        return $obj.data(\"editor\").focus();\r\n    } else if (isModalLookup(obj)) { // Modal lookup\r\n        return $obj.parent().find(\".ew-lookup-text\").focus();\r\n    } else if (!obj.options && obj.length) { // Radio/Checkbox list\r\n        obj = $obj[0];\r\n    } else if (isAutoSuggest(obj)) { // Auto-Suggest\r\n        obj = obj.input;\r\n    }\r\n    $(obj).focus();//.select();\r\n}\r\n\r\n/**\r\n * Set invalid\r\n * @param {HTMLElement|HTMLElement[]} obj HTML element(s)\r\n */\r\nexport function setInvalid(obj) {\r\n    if (!obj)\r\n        return;\r\n    var $obj = $(obj);\r\n    if (isHidden($obj))\r\n        return;\r\n    if (!obj.options && obj.length) // Radio/Checkbox list\r\n        obj = $obj[0];\r\n    var $p = $obj.closest(\".form-group, [id^='el']\");\r\n    if (isAutoSuggest(obj)) {\r\n        $p.find(\".ew-auto-suggest\").addClass(\"is-invalid\").one(\"click keydown\", function() {\r\n            $p.find(\".is-invalid\").removeClass(\"is-invalid\");\r\n        });\r\n    } else if (isModalLookup(obj)) {\r\n        $p.find(\".input-group\").addClass(\"is-invalid\").one(\"click keydown\", function() {\r\n            $p.find(\".is-invalid\").removeClass(\"is-invalid\");\r\n        });\r\n    } else {\r\n        if (obj.type == \"checkbox\" || obj.type == \"radio\") {\r\n            $obj.addClass(\"is-invalid\").one(\"click keydown\", function() {\r\n                $p.find(\".is-invalid\").removeClass(\"is-invalid\");\r\n            });\r\n        } else {\r\n            $obj.addClass(\"is-invalid\").parent().one(\"click keydown\", function() {\r\n                $p.find(\".is-invalid\").removeClass(\"is-invalid\");\r\n            })\r\n            $obj.closest(\".input-group\").addClass(\"is-invalid\");\r\n        }\r\n    }\r\n}\r\n\r\n// Check if object has value\r\nexport function hasValue(obj) {\r\n    return getOptionValues(obj).join(\"\") != \"\";\r\n}\r\n\r\n// Get Ctrl key for multiple column sort\r\nexport function sort(e, url, type) {\r\n    if (e.shiftKey && !e.ctrlKey)\r\n        url = url.split(\"?\")[0] + \"?cmd=resetsort\";\r\n    else if (type == 2 && e.ctrlKey)\r\n        url += \"&ctrl=1\";\r\n    location = url;\r\n    return true;\r\n}\r\n\r\n// Confirm Delete Message\r\nexport function confirmDelete(el) {\r\n    clickDelete(el);\r\n    _prompt(ew.language.phrase(\"DeleteConfirmMsg\"), (result) => {\r\n        (result && el.href) ? window.location = el.href : clearDelete(el);\r\n    });\r\n    return false;\r\n}\r\n\r\n// Check if any key selected // PHP\r\nexport function keySelected(f) {\r\n    return $(f).find(\"input[type=checkbox][name='key_m[]']:checked\", f).length > 0;\r\n}\r\n\r\n// Select all key\r\nexport function selectAllKey(cb) {\r\n    selectAll(cb);\r\n    var tbl = $(cb).closest(\".ew-table\")[0];\r\n    if (!tbl)\r\n        return;\r\n    $(tbl.tBodies).each(function() {\r\n        $(this.rows).each(function(i, r) {\r\n            var $r = $(r);\r\n            if ($r.is(\":not(.ew-template):not(.ew-table-preview-row)\")) {\r\n                $r.data({ selected: cb.checked, checked: cb.checked });\r\n                setColor(i, r);\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\n// Select all related checkboxes\r\nexport function selectAll(cb) {\r\n    if (!cb || !cb.form)\r\n        return;\r\n    $(cb.form.elements).filter(\"input[type=checkbox][name^=\" + cb.name + \"_], [type=checkbox][name=\" + cb.name + \"]\").not(cb).not(\":disabled\").prop(\"checked\", cb.checked);\r\n}\r\n\r\n// Update selected checkbox\r\nexport function updateSelected(f) {\r\n    return $(f).find(\"input[type=checkbox][name^=u_]:checked,input:hidden[name^=u_][value=1]\").length > 0;\r\n}\r\n\r\n// Set row color\r\nexport function setColor(index, row) {\r\n    var $row = $(row), $tbl = $row.closest(\".ew-table\");\r\n    if (!$tbl[0])\r\n        return;\r\n    if ($row.data(\"selected\")) {\r\n        $row.removeClass($tbl.data(\"rowhighlightclass\") || \"ew-table-highlight-row\")\r\n            .removeClass($tbl.data(\"roweditclass\") || \"ew-table-edit-row\")\r\n            .addClass($tbl.data(\"rowselectclass\") || \"ew-table-select-row\");\r\n    } else if ([ew.ROWTYPE_ADD, ew.ROWTYPE_EDIT].includes($row.data(\"rowtype\"))) {\r\n        $row.removeClass($tbl.data(\"rowselectclass\") || \"ew-table-select-row\")\r\n            .removeClass($tbl.data(\"rowhighlightclass\") || \"ew-table-highlight-row\")\r\n            .addClass($tbl.data(\"roweditclass\") || \"ew-table-edit-row\");\r\n    } else {\r\n        $row.removeClass($tbl.data(\"rowselectclass\") || \"ew-table-select-row\")\r\n            .removeClass($tbl.data(\"roweditclass\") || \"ew-table-edit-row\")\r\n            .removeClass($tbl.data(\"rowhighlightclass\") || \"ew-table-highlight-row\");\r\n    }\r\n}\r\n\r\n// Clear selected rows color\r\nexport function clearSelected(tbl) {\r\n    $(tbl.rows).each(function(i, r) {\r\n        var $r = $(r);\r\n        if (!$r.data(\"checked\") && $r.data(\"selected\")) {\r\n            $r.data(\"selected\", false);\r\n            setColor(i, r);\r\n        }\r\n    });\r\n}\r\n\r\n// Clear all row delete status\r\nexport function clearDelete(el) {\r\n    var $el = $(el), tbl = $el.closest(\".ew-table\")[0];\r\n    if (!tbl)\r\n        return;\r\n    var $tr = $el.closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().each(function(i, r) {\r\n        var $r = $(r);\r\n        $r.data(\"selected\", $r.data(\"checked\"));\r\n    });\r\n}\r\n\r\n// Click single delete link\r\nexport function clickDelete(el) {\r\n    var $el = $(el), tbl = $el.closest(\".ew-table\")[0];\r\n    if (!tbl)\r\n        return;\r\n    clearSelected(tbl);\r\n    var $tr = $el.closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().each(function(i, r) {\r\n        $(r).data(\"selected\", true);\r\n        setColor(i, r);\r\n    });\r\n}\r\n\r\n// Click multiple checkbox\r\nexport function clickMultiCheckbox(e) {\r\n    var cb = e.target || e.srcElement, $cb = $(cb), tbl = $cb.closest(\".ew-table\")[0];\r\n    if (!tbl)\r\n        return;\r\n    clearSelected(tbl);\r\n    var $tr = $cb.closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().each(function(i, r) {\r\n        $(r).data(\"checked\", cb.checked).data(\"selected\", cb.checked).find(\"input[type=checkbox][name='key_m[]']\").each(function() {\r\n            if (this != cb) this.checked = cb.checked;\r\n        });\r\n        setColor(i, r);\r\n    });\r\n    e.stopPropagation();\r\n}\r\n\r\n// Setup table\r\nexport function setupTable(index, tbl, force) {\r\n    var $tbl = $(tbl), $rows = $(tbl.rows);\r\n    if (!tbl || !tbl.rows || !force && $tbl.data(\"isset\") || tbl.tBodies.length == 0)\r\n        return;\r\n\r\n    // Set mouse over color\r\n    var mouseOver = function(e) {\r\n        var $this = $(this);\r\n        if (!$this.data(\"selected\") && ![ew.ROWTYPE_ADD, ew.ROWTYPE_EDIT].includes($this.data(\"rowtype\"))) {\r\n            var $tbl = $this.closest(\".ew-table\");\r\n            if (!$tbl[0])\r\n                return;\r\n            $this.siblings(\"[data-rowindex='\" + $this.data(\"rowindex\") + \"']\").addBack().each(function(i, r) {\r\n                $(r).addClass($tbl.data(\"rowhighlightclass\") || \"ew-table-highlight-row\");\r\n            });\r\n        }\r\n    }\r\n\r\n    // Set mouse out color\r\n    var mouseOut = function(e) {\r\n        var $this = $(this);\r\n        if (!$this.data(\"selected\") && ![ew.ROWTYPE_ADD, ew.ROWTYPE_EDIT].includes($this.data(\"rowtype\")))\r\n            $this.siblings(\"[data-rowindex='\" + $this.data(\"rowindex\") + \"']\").addBack().each(setColor);\r\n    }\r\n\r\n    // Set selected row color\r\n    var click = function(e) {\r\n        var $this = $(this), tbl = $this.closest(\".ew-table\")[0],\r\n            $target = $(e.target);\r\n        if (!tbl || $target.hasClass(\"btn\") || $target.hasClass(\"ew-preview-row-btn\") || $target.is(\":input\"))\r\n            return;\r\n        if (!$this.data(\"checked\")) {\r\n            var selected = $this.data(\"selected\");\r\n            clearSelected(tbl); // Clear all other selected rows\r\n            $this.siblings(\"[data-rowindex='\" + $this.data(\"rowindex\") + \"']\").addBack().each(function(i, r) {\r\n                $(r).data(\"selected\", !selected); // Toggle\r\n                setColor(i, r);\r\n            });\r\n        }\r\n    }\r\n\r\n    var n = $rows.filter(\"[data-rowindex=1]\").length || $rows.filter(\"[data-rowindex=0]\").length || 1; // Alternate color every n rows\r\n    var rows = $rows\r\n        .filter(\":not(.ew-template)\")\r\n        .each(function() {\r\n            $(this.cells).removeClass(\"ew-table-last-row\").last().addClass(\"ew-table-last-col\"); // Cell of last column\r\n        }).get();\r\n    var div = $tbl.parentsUntil(\".ew-grid\", \".\" + ew.RESPONSIVE_TABLE_CLASS)[0];\r\n    if (rows.length) {\r\n        for (var i = 1; i <= n; i++) {\r\n            var r = rows[rows.length - i]; // Last rows\r\n            $(r.cells).each(function() {\r\n                if (this.rowSpan == i) // Cell of last row\r\n                    $(this).addClass(\"ew-table-last-row\")\r\n                        .toggleClass(\"ew-table-border-bottom\", !!div && div.clientHeight > tbl.offsetHeight);\r\n            });\r\n        }\r\n    }\r\n    var form = $tbl.closest(\"form\")[0];\r\n    var attach = form && $(form.elements).filter(\"input#action:not([value^=grid])\").length > 0;\r\n    $(tbl.tBodies[tbl.tBodies.length - 1].rows) // Use last TBODY (avoid Opera bug)\r\n        .filter(\":not(.ew-template):not(.ew-table-preview-row)\")\r\n        .each(function(i) {\r\n            var $r = $(this);\r\n            if (attach && !$r.data(\"isset\")) {\r\n                if ([ew.ROWTYPE_ADD, ew.ROWTYPE_EDIT].includes($r.data(\"rowtype\"))) // Add/Edit row\r\n                    $r.on(\"mouseover\", function() {this.edit = true;}).addClass(\"ew-table-edit-row\");\r\n                $r.on(\"mouseover\", mouseOver).on(\"mouseout\", mouseOut).on(\"click\", click);\r\n                $r.data(\"isset\", true);\r\n            }\r\n            var sw = i % (2 * n) < n;\r\n            $r.toggleClass(\"ew-table-row\", sw).toggleClass(\"ew-table-alt-row\", !sw);\r\n        });\r\n    setupGrid(index, $tbl.closest(\".ew-grid\")[0], force);\r\n    $tbl.data(\"isset\", true);\r\n}\r\n\r\n// Setup grid\r\nexport function setupGrid(index, grid, force) {\r\n    var $grid = $(grid);\r\n    if (!grid || !force && $grid.data(\"isset\"))\r\n        return;\r\n    var multi = $grid.find(\"table.ew-multi-column-table\").length, rowcnt;\r\n    if (multi) {\r\n        rowcnt = $grid.find(\"td[data-rowindex]\").length;\r\n    } else {\r\n        rowcnt = $grid.find(\"table.ew-table > tbody\").first().children(\"tr:not(.ew-table-preview-row, .ew-template)\").length;\r\n    }\r\n    if (rowcnt == 0 && !$grid.find(\".ew-grid-upper-panel, .ew-grid-lower-panel\")[0])\r\n        $grid.hide();\r\n    // if (!$grid.find(\".ew-grid-upper-panel:visible\")[0])\r\n    // \t$grid.css({\"border-top-left-radius\": 0, \"border-top-right-radius\": 0});\r\n    // if (!$grid.find(\".ew-grid-lower-panel:visible\")[0])\r\n    // \t$grid.css({\"border-bottom-left-radius\": 0, \"border-bottom-right-radius\": 0});\r\n    if ($grid.find(\".ew-grid-middle-panel:visible\").hasClass(ew.RESPONSIVE_TABLE_CLASS) && $grid.width() > $(\".content\").width()) {\r\n        $grid.addClass(\"d-flex\");\r\n        $grid.closest(\".ew-detail-pages\").addClass(\"d-block\");\r\n        $grid.closest(\".ew-form\").addClass(\"w-100\");\r\n        if (ew.USE_OVERLAY_SCROLLBARS)\r\n            $grid.find(\".ew-grid-middle-panel:not(.ew-preview-middle-panel)\").overlayScrollbars(ew.overlayScrollbarsOptions);\r\n    }\r\n    $grid.data(\"isset\", true);\r\n}\r\n\r\n// Add a row to grid\r\nexport function addGridRow(el) {\r\n    var $grid = $(el).closest(\".ew-grid\"),\r\n        $tbl = $grid.find(\"table.ew-table\").last(), $p = $tbl.parent(\"div\"),\r\n        $tpl = $tbl.find(\"tr.ew-template\");\r\n    if (!el || !$grid[0] || !$tbl[0] || !$tpl[0])\r\n        return false;\r\n    var $lastrow = $($tbl[0].rows).last();\r\n    $tbl.find(\"td.ew-table-last-row\").removeClass(\"ew-table-last-row\");\r\n    var $row = $tpl.clone(true, true).removeClass(\"ew-template\");\r\n    var $form = $grid.find(\"div.ew-form[id^=f][id$=grid]\");\r\n    if (!$form[0])\r\n        $form = $grid.find(\"form.ew-form[id^=f][id$=list]\");\r\n    var suffix = ($form.is(\"div\")) ? \"_\" + $form.attr(\"id\") : \"\";\r\n    var $elkeycnt = $form.find(\"#key_count\" + suffix);\r\n    var keycnt = parseInt($elkeycnt.val(), 10) + 1;\r\n    $row.attr({ \"id\": \"r\" + keycnt + $row.attr(\"id\").substring(2), \"data-rowindex\": keycnt });\r\n    var $els = $tpl.find(\"script:contains('$rowindex$')\"); // Get scripts with rowindex\r\n    $row.children(\"td\").each(function() {\r\n        $(this).find(\"*\").each(function() {\r\n            $.each(this.attributes, function(i, attr) {\r\n                attr.value = attr.value.replace(/\\$rowindex\\$/g, keycnt); // Replace row index\r\n            });\r\n        });\r\n    });\r\n    $row.find(\".ew-icon\").closest(\"a, button\").removeData(\"bs.tooltip\").tooltip({ container: \"body\", placement: \"bottom\", trigger: \"hover\", sanitizeFn: ew.sanitizeFn });\r\n    $elkeycnt.val(keycnt).after($(\"<input>\").attr({\r\n        type: \"hidden\",\r\n        id: \"k\" + keycnt + \"_action\" + suffix,\r\n        name: \"k\" + keycnt + \"_action\" + suffix,\r\n        value: \"insert\"\r\n    }));\r\n    $lastrow.after($row);\r\n    $els.each(function() {\r\n        addScript(this.text.replace(/\\$rowindex\\$/g, keycnt));\r\n    });\r\n    var frm = $form.data(\"form\");\r\n    if (frm) {\r\n        frm.initEditors();\r\n        frm.initUpload();\r\n    }\r\n    setupTable(-1, $tbl[0], true);\r\n    $p.scrollTop($p[0].scrollHeight);\r\n    return false;\r\n}\r\n\r\n// Delete a row from grid\r\nexport function deleteGridRow(el, infix) {\r\n    var $el = $(el).tooltip(\"hide\").removeData(\"bs.tooltip\"),\r\n        $grid = $el.closest(\".ew-grid, .ew-multi-column-grid\"),\r\n        $row = $el.closest(\"tr, div[data-rowindex]\"),\r\n        $tbl = $row.closest(\".ew-table\");\r\n    if (!el || !$grid[0] || !$row[0])\r\n        return false;\r\n    var rowidx = parseInt($row.data(\"rowindex\"), 10);\r\n    var $form = $grid.find(\"div.ew-form[id^=f][id$=grid]\");\r\n    if (!$form[0])\r\n        $form = $grid.find(\"form.ew-form[id^=f][id$=list]\");\r\n    var frm = $form.data(\"form\");\r\n    if (!$form[0] || !frm)\r\n        return false;\r\n    var suffix = ($form.is(\"div\")) ? \"_\" + $form.attr(\"id\") : \"\";\r\n    var keycntname = \"#key_count\" + suffix;\r\n    var _delete = function() {\r\n        $row.remove();\r\n        if ($grid.is(\".ew-grid\"))\r\n            setupTable(-1, $tbl[0], true);\r\n        if (rowidx > 0) {\r\n            var $keyact = $form.find(\"#k\" + rowidx + \"_action\" + suffix);\r\n            if ($keyact[0]) {\r\n                $keyact.val(($keyact.val() == \"insert\") ? \"insertdelete\" : \"delete\");\r\n            } else {\r\n                $form.find(keycntname).after($(\"<input>\").attr({\r\n                    type: \"hidden\",\r\n                    id: \"k\" + rowidx + \"_action\" + suffix,\r\n                    name: \"k\" + rowidx + \"_action\" + suffix,\r\n                    value: \"delete\"\r\n                }));\r\n            }\r\n        }\r\n    };\r\n    if ($.isFunction(frm.emptyRow) && frm.emptyRow(infix)) { // Empty row\r\n        _delete();\r\n    } else { // Confirm\r\n        _prompt(ew.language.phrase(\"DeleteConfirmMsg\"), (result) => {\r\n            if (result)\r\n                _delete();\r\n        });\r\n    }\r\n    return false;\r\n}\r\n\r\n// HTML encode text\r\nexport function htmlEncode(text) {\r\n    var str = String(text);\r\n    return str.replace(/&/g, '&amp;').replace(/\\\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n}\r\n\r\n// Get form element(s) as single element or array of radio/checkbox\r\nexport function getElements(el, root) {\r\n    var selector;\r\n    if ($.isObject(el) && el.dataset) { // HTML element (e.g. radio/checkbox)\r\n        selector = \"[data-table='\" + el.dataset.table + \"'][data-field='\" + el.dataset.field + \"']:not([name^=o]):not([name^='x$'])\";\r\n    } else if ($.isString(el)) {\r\n        selector = \"[name='\" + el + \"']\";\r\n        var ar = el.split(\" \"); // Check if \"#id name\"\r\n        if (ar.length == 2)\r\n            selector = \"[data-table='\" + ar[0] + \"'][data-field='\" + getId(ar[1]) + \"']:not([name^=o]):not([name^='x$'])\"; // Remove []\r\n    }\r\n    var root = !$.isString(root) ? root : /^#/.test(root) ? root : \"#\" + root;\r\n    selector = \"input\" + selector + \",select\" + selector + \",textarea\" + selector + \",button\" + selector;\r\n    var $els = (root) ? $(root).find(selector) : $(selector);\r\n    if ($els.length == 1 && $els.is(\":not([type=checkbox]):not([type=radio])\"))\r\n        return $els[0];\r\n    return $els.get();\r\n}\r\n\r\n// Get first element (not necessarily form element)\r\nexport function getElement(name, root) {\r\n    var root = $.isString(root) ? \"#\" + root : root,\r\n        selector = \"#\" + name.replace(/([\\$\\[\\]])/g, \"\\\\$1\") + \",[name='\" + name + \"']\";\r\n    return (root) ? $(root).find(selector)[0] : $(selector).first()[0];\r\n}\r\n\r\n// Get ancestor by function\r\nexport function getAncestorBy(node, fn) {\r\n    while (node = node.parentNode) {\r\n        if (node && node.nodeType == 1 && (!fn || fn(node)))\r\n            return node;\r\n    }\r\n    return null;\r\n}\r\n\r\n// Check if an element is hidden\r\nexport function isHidden(el) {\r\n    var $el = $(el);\r\n    return $el.css(\"display\") == \"none\" && !$el.closest(\".dropdown-menu\")[0] && !isModalLookup(el) && !isAutoSuggest(el) && !isHiddenTextArea(el) ||\r\n        getAncestorBy(el, (node) => node.style.display == \"none\" && !node.classList.contains(\"tab-pane\") && !node.classList.contains(\"collapse\")) != null;\r\n}\r\n\r\n// Check if same text\r\nexport function sameText(o1, o2) {\r\n    return (String(o1).toLowerCase() == String(o2).toLowerCase());\r\n}\r\n\r\n// Check if same string\r\nexport function sameString(o1, o2) {\r\n    return (String(o1) == String(o2));\r\n}\r\n\r\n// Get element value\r\nexport function getValue(el, form) {\r\n    if (!el)\r\n        return \"\";\r\n    let obj;\r\n    if ($.isString(el)) {\r\n        let ar = el.split(\" \");\r\n        if (ar.length == 2) { // Parent field in master table\r\n            obj = getElements(el);\r\n        } else {\r\n            obj = getElements(el, form);\r\n        }\r\n    } else if (el.type == \"radio\" || el.type == \"checkbox\") { // Single radio/checkbox\r\n        obj = getElements(el);\r\n    } else {\r\n        obj = el;\r\n    }\r\n    if (obj.options) { // Selection list\r\n        if (obj.list) {\r\n            let val = obj.values;\r\n            return obj.multiple ? val : (val[0] || \"\");\r\n        } else {\r\n            let val = Array.prototype.filter.call(obj.options, option => option.selected && option.value !== \"\").map(option => option.value);\r\n            return (obj.type == \"select-multiple\") ? val : (val[0] || \"\");\r\n        }\r\n    } else if ($.isNumber(obj.length)) { // Radio/Checkbox list, or element not found\r\n        let val = $(obj).filter(\":checked\").map(function() {\r\n            return this.value;\r\n        }).get();\r\n        return (obj.length == 1) ? val[0] : val;\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n        $(obj).data(\"editor\").save();\r\n        return obj.value;\r\n    } else { // text/hidden\r\n        let data = $(obj).data();\r\n        if (data.lookup && data.multiple) // Modal-Lookup\r\n            return obj.value.split(ew.MULTIPLE_OPTION_SEPARATOR);\r\n        else\r\n            return obj.value;\r\n    }\r\n}\r\n\r\n// Get existing selected values as an array\r\nexport function getOptionValues(el, form) {\r\n    var obj;\r\n    if ($.isString(el)) {\r\n        var ar = el.split(\" \");\r\n        if (ar.length == 2) { // Parent field in master table\r\n            obj = getElements(el);\r\n        } else {\r\n            obj = getElements(el, form);\r\n        }\r\n    } else if (el.type == \"radio\" || el.type == \"checkbox\") { // Single radio/checkbox\r\n        obj = getElements(el);\r\n    } else {\r\n        obj = el;\r\n    }\r\n    if (obj.options) { // Selection list\r\n        if (obj.list)\r\n            return obj.values;\r\n        else\r\n            return Array.prototype.filter.call(obj.options, option => option.selected && option.value !== \"\").map(option => option.value);\r\n    } else if ($.isNumber(obj.length)) { // Radio/Checkbox list, or element not found\r\n        return $(obj).filter(\":checked\").map(function() {\r\n            return this.value;\r\n        }).get();\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n        $(obj).data(\"editor\").save();\r\n        return [obj.value];\r\n    } else { // text/hidden\r\n        var data = $(obj).data();\r\n        if (data.lookup && data.multiple) // Modal-Lookup\r\n            return obj.value.split(ew.MULTIPLE_OPTION_SEPARATOR);\r\n        else\r\n            return [obj.value];\r\n    }\r\n}\r\n\r\n// Get existing text of selected values as an array\r\nexport function getOptionTexts(el, form) {\r\n    var obj;\r\n    if ($.isString(el)) {\r\n        var ar = el.split(\" \");\r\n        if (ar.length == 2) { // Parent field in master table\r\n            obj = getElements(el);\r\n        } else {\r\n            obj = getElements(el, form);\r\n        }\r\n    } else {\r\n        obj = el;\r\n    }\r\n    if (isAutoSuggest(obj)) { // AutoSuggest (before obj.options)\r\n        return [obj.input.value];\r\n    } else if (isModalLookup(obj)) { // Modal-Lookup (before obj.options)\r\n        var $obj = $(obj);\r\n        return $obj.parent().find(\".ew-lookup-text .ew-option\").map(function() {\r\n            return $(this).text().trim();\r\n        }).get();\r\n    } else if (obj.options) { // Selection list\r\n        return Array.prototype.filter.call(obj.options, option => option.selected && option.value !== \"\").map(option => option.text);\r\n    } else if ($.isNumber(obj.length)) { // Radio/Checkbox list, or element not found\r\n        return $(obj).filter(\":checked\").map(function() {\r\n            return $(this).parent().text();\r\n        }).get();\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n        $(obj).data(\"editor\").save();\r\n        return [obj.value];\r\n    } else {\r\n        return [obj.value];\r\n    }\r\n}\r\n\r\n// Clear existing options\r\nexport function clearOptions(obj) {\r\n    if (obj.options) { // Selection list\r\n        var lo = (obj.type == \"select-multiple\" || // multiple\r\n            obj.hasAttribute(\"data-dropdown\") || // dropdown\r\n            convertToBool(obj.getAttribute(\"data-pleaseselect\")) === false || // data-pleaseselect=\"false\"\r\n            obj.length > 0 && obj.options[0].value != \"\") // non-empty first element\r\n            ? 0 : 1;\r\n        if (obj.list) {\r\n            obj.removeAll();\r\n        } else {\r\n            for (var i = obj.length - 1; i >= lo; i--)\r\n                obj.remove(i);\r\n        }\r\n        if (isAutoSuggest(obj)) {\r\n            obj.input.value = \"\";\r\n            obj.value = \"\";\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Get the name or id of an element\r\n *\r\n * @param {*} el - Element\r\n * @param {boolean} [remove=true] - Remove square brackets\r\n * @returns\r\n */\r\nexport function getId(el, remove) {\r\n    var id = ($.isString(el)) ? el : ($(el).attr(\"name\") || $(el).attr(\"id\")); // Use name first (id may have suffix)\r\n    return (remove !== false) ? id.replace(/\\[\\]$/, \"\") : id;\r\n}\r\n\r\n// Get display value separator\r\nexport function valueSeparator(index, obj) {\r\n    var sep = $(obj).data(\"value-separator\");\r\n    return (Array.isArray(sep)) ? sep[index - 1] : (sep || \", \");\r\n}\r\n\r\n/**\r\n * Get display value\r\n *\r\n * @param {Object} opt - Option being displayed\r\n * @param {HTMLElment} obj - HTML element\r\n * @returns {string} Display value\r\n */\r\nexport function displayValue(opt, obj) {\r\n    var text = opt.df;\r\n    for (var i = 2; i <= 4; i++) {\r\n        if (opt[\"df\" + i] && opt[\"df\" + i] != \"\") {\r\n            var sep = valueSeparator(i - 1, obj);\r\n            if ($.isUndefined(sep))\r\n                break;\r\n            if ($.isValue(text))\r\n                text += sep;\r\n            text += opt[\"df\" + i];\r\n        }\r\n    }\r\n    return text;\r\n}\r\n\r\n/**\r\n * Get HTML for a single option\r\n *\r\n * @param {*} val - Value of the option\r\n * @returns {string} HTML\r\n */\r\nexport function optionHtml(val) {\r\n    return ew.OPTION_HTML_TEMPLATE.replace(/\\{value\\}/g, val);\r\n}\r\n\r\n/**\r\n * Get HTML for diplaying all options\r\n *\r\n * @param {string[]} options - Array of all options (HTML)\r\n * @param {number} max - Maximum number of options to show\r\n * @returns {string} HTML\r\n */\r\nexport function optionsHtml(options, max) {\r\n    if (options.length > (max || ew.MAX_OPTION_COUNT)) { // More than max option count\r\n        return ew.language.phrase(\"CountSelected\").replace(\"%s\", options.length);\r\n    } else if (options.length) { // Some options\r\n        var html = \"\";\r\n        for (var i = 0; i < options.length; i++)\r\n            html += optionHtml(options[i]);\r\n        return html;\r\n    } else { // No options\r\n        return ew.language.phrase(\"PleaseSelect\");\r\n    }\r\n}\r\n\r\n/**\r\n * Create new option\r\n *\r\n * @param {(HTMLElement|array)} obj - Selection list\r\n * @param {Object} opt - Object for the new option\r\n * @param {form} f - form object of obj\r\n * @returns\r\n */\r\nexport function newOption(obj, opt, f) {\r\n    var frm = forms.get(f.id),\r\n        id = getId(obj),\r\n        list = frm.getList(id),\r\n        value = opt.lf,\r\n        item = { lf: opt.lf, df1: opt.df, df2: opt.df2, df3: opt.df3, df4: opt.df4 },\r\n        text;\r\n    if (list.template && !isAutoSuggest(obj)) {\r\n        text = list.template.render(item, ew.jsRenderHelpers);\r\n    } else {\r\n        text = displayValue(opt, obj) || value;\r\n    }\r\n    var args = { \"data\": item, \"name\": id, \"form\": f.$element, \"value\": value, \"text\": text };\r\n    if (obj.options) { // Selection list\r\n        let option;\r\n        if (obj.list) {\r\n            option = new SelectionListOption(args.value, args.text);\r\n        } else {\r\n            option = document.createElement(\"option\");\r\n            option.value = args.value;\r\n            option.innerHTML = args.text;\r\n        }\r\n        args = { ...args, option };\r\n        $document.trigger(\"newoption\", [args]); // Fire \"newoption\" event for selection list\r\n        if (obj.list) {\r\n            obj.add(args.option.value, args.option.text);\r\n        } else {\r\n            obj.add(args.option);\r\n        }\r\n    }\r\n    return args.text;\r\n}\r\n\r\n// Select combobox option\r\nexport function selectOption(obj, values) {\r\n    if (!obj || !values)\r\n        return;\r\n    var $obj = $(obj);\r\n    if (Array.isArray(values)) {\r\n        if (obj.options) { // Selection list\r\n            if (obj.list) {\r\n                obj.value = values;\r\n            } else {\r\n                $obj.val(values);\r\n                if (obj.type == \"select-one\" && obj.selectedIndex == -1)\r\n                    obj.selectedIndex = 0; // Make sure an option is selected (IE)\r\n            }\r\n            if (isAutoSuggest(obj) && values.length == 1) {\r\n                let opts = obj.options || [];\r\n                for (let opt of opts) {\r\n                    if (opt.value == values[0]) {\r\n                        obj.value = opt.value;\r\n                        obj.input.value = opt.text;\r\n                        break;\r\n                    }\r\n                }\r\n            } else if (isModalLookup(obj)) {\r\n                let vals = [],\r\n                    html = [],\r\n                    opts = obj.options || [];\r\n                for (let value of values) {\r\n                    for (let opt of opts) {\r\n                        if (value == opt.value) {\r\n                            vals.push(opt.value);\r\n                            html.push(optionHtml(opt.text));\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                $obj.val(vals.join(ew.MULTIPLE_OPTION_SEPARATOR));\r\n                $obj.parent().find(\".ew-lookup-text\").html(optionsHtml(html, $obj.data(\"maxcount\")));\r\n            }\r\n        } else if (obj.type) {\r\n            obj.value = values.join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n        }\r\n    }\r\n    // Auto-select if only one option\r\n    function isAutoSelect(el) {\r\n        if (!$(el).data(\"autoselect\")) // data-autoselect=\"false\"\r\n            return false;\r\n        var form = getForm(el);\r\n        if (form) {\r\n            if (/s(ea)?rch$/.test(form.id)) // Search forms\r\n                return false;\r\n            var list = forms.get(form.id).getList(el.id);\r\n            if (list && list.parentFields.length == 0) // No parent fields\r\n                return false;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    if (!isAutoSelect(obj))\r\n        return;\r\n    if (obj.options) { // Selection List\r\n        if (!obj.list && obj.type == \"select-one\" && obj.options.length == 2 && !obj.options[1].selected) {\r\n            obj.options[1].selected = true;\r\n        } else if (obj.options.length == 1 && !obj.options[0].selected) {\r\n            obj.options[0].selected = true;\r\n        }\r\n        if (obj.list)\r\n            obj.render();\r\n        if (isAutoSuggest(obj)) {\r\n            let opts = obj.options || [];\r\n            if (opts.length == 1) {\r\n                obj.value = opts[0].value;\r\n                obj.input.value = opts[0].text;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// Ajax send\r\n$document.ajaxSend(function(event, jqxhr, settings) {\r\n    var url = settings.url;\r\n    if (url.match(/\\/(\\w+preview|session)\\?/i)) // Preview/Session page\r\n        _removeSpinner(); // Preview has spinner already\r\n    var apiUrl = getApiUrl(), isApi = url.startsWith(apiUrl), // Is API request\r\n        allowed = isApi || url.startsWith(currentPage());\r\n    if (!allowed && url.match(/^http/i)) {\r\n        var objUrl = new URL(url);\r\n        allowed = objUrl.hostname == currentUrl.hostname; // Same host name\r\n    }\r\n    if (allowed) {\r\n        if (isApi && ew.API_JWT_TOKEN && !ew.IS_WINDOWS_AUTHENTICATION) // Do NOT set JWT authorization header if Windows Authentication\r\n            jqxhr.setRequestHeader(ew.API_JWT_AUTHORIZATION_HEADER, \"Bearer \" + ew.API_JWT_TOKEN);\r\n        if (settings.type == \"GET\") { // GET\r\n            var ar = settings.url.split(\"?\"), params = new URLSearchParams(ar[1]);\r\n            params.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // Add token name // PHP\r\n            params.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // Add antiforgery token // PHP\r\n            ar[1] = params.toString();\r\n            settings.url = ar[0] + (ar[1] ? \"?\" + ar[1] : \"\");\r\n        } else { // POST\r\n            if (settings.data instanceof FormData) { // FormData\r\n                settings.data.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // Add token name // PHP\r\n                settings.data.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // Add antiforgery token // PHP\r\n            } else {\r\n                var params = new URLSearchParams(settings.data);\r\n                params.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // Add token name // PHP\r\n                params.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // Add antiforgery token // PHP\r\n                settings.data = params.toString();\r\n            }\r\n        }\r\n    }\r\n});\r\n\r\n// Ajax start\r\n$document.ajaxStart(function() {\r\n    $document.data(\"_ajax\", true);\r\n    ew.addSpinner();\r\n    $(\"form.ew-form\").addClass(\"ew-wait\").each(function() {\r\n        var frm = forms.get(this.id);\r\n        if (frm) {\r\n            if (!frm.multiPage || !frm.multiPage.lastPageSubmit)\r\n                frm.disableForm();\r\n        }\r\n    });\r\n});\r\n\r\n// Ajax stop (internal)\r\nfunction _ajaxStop() {\r\n    $(\"form.ew-form.ew-wait\").removeClass(\"ew-wait\").each(function() {\r\n        var frm = forms.get(this.id);\r\n        if (frm) {\r\n            if (!frm.multiPage || !frm.multiPage.lastPageSubmit) {\r\n                frm.enableForm();\r\n            }\r\n        }\r\n    });\r\n    ew.removeSpinner();\r\n    $document.data(\"_ajax\", false);\r\n}\r\n\r\n// Ajax stop/error\r\n$document.ajaxStop(_ajaxStop).ajaxError(_ajaxStop);\r\n\r\n// Execute JavaScript in HTML loaded by Ajax\r\nexport function executeScript(html, id) {\r\n    let matches = html.replace(/<head>[\\s\\S]*<\\/head>/, \"\").matchAll(/<script([^>]*)>([\\s\\S]*?)<\\/script\\s*>/ig);\r\n    Array.from(matches).forEach((ar, i) => {\r\n        let text = ar[2];\r\n        if (/(\\s+type\\s*=\\s*['\"]*text\\/javascript['\"]*)|^((?!\\s+type\\s*=).)*$/i.test(ar[1]) && text)\r\n            addScript(text, \"scr_\" + id + \"_\" + i++);\r\n    });\r\n}\r\n\r\n// Strip JavaScript in HTML loaded by Ajax\r\nexport function stripScript(html) {\r\n    let matches = html.matchAll(/<script([^>]*)>([\\s\\S]*?)<\\/script\\s*>/ig);\r\n    for (let ar of matches) {\r\n        let text = ar[0];\r\n        if (/(\\s+type\\s*=\\s*['\"]*text\\/javascript['\"]*)|^((?!\\s+type\\s*=).)*$/i.test(ar[1]))\r\n            html = html.replace(text, \"\");\r\n    }\r\n    return html;\r\n}\r\n\r\n// Add SCRIPT tag\r\nexport function addScript(text, id) {\r\n    var scr = document.createElement(\"SCRIPT\");\r\n    if (id)\r\n        scr.id = id;\r\n    scr.text = text;\r\n    return document.body.appendChild(scr); // Do not use jQuery so it can be removed\r\n}\r\n\r\n// Remove JavaScript added by Ajax\r\nexport function removeScript(id) {\r\n    if (id)\r\n        $(\"script[id^='scr_\" + id + \"_']\").remove();\r\n}\r\n\r\n// Clean HTML loaded by Ajax for modal dialog\r\nexport function getContent(html) {\r\n    let body = stripScript(html).match(/<body[\\s\\S]*>[\\s\\S]*<\\/body>/i);\r\n    return body ? $(body[0]).not(\"div[id^=ew].modal, #ew-tooltip, #ew-drilldown-panel, #cookie-consent, #template-upload, #template-download\") : \"\";\r\n}\r\n\r\n// Get all options of Selection list or Radio/Checkbox list as array\r\nexport function getOptions(obj) {\r\n    return obj.options ? Array.prototype.map.call(obj.options, (opt) => [opt.value, opt.text]) : [];\r\n}\r\n\r\n/**\r\n * Show Add Option dialog\r\n *\r\n * @param {Object} args - Arguments\r\n * @param {Object} args.frm - form object\r\n * @param {HTMLElement} args.lnk - Add option anchor element\r\n * @param {string} args.el - Form element name\r\n * @param {string} args.url - URL of the Add form\r\n * @returns\r\n */\r\nexport function addOptionDialogShow(args) {\r\n\r\n    // Hide dialog\r\n    var _hide = function() {\r\n        removeScript($dlg.data(\"args\").el);\r\n        var frm = $dlg.removeData(\"args\").find(\".modal-body form\").data(\"form\");\r\n        if (frm)\r\n            frm.destroyEditor();\r\n        $dlg.find(\".modal-body\").html(\"\");\r\n        $dlg.find(\".modal-footer .btn-primary\").unbind();\r\n        $dlg.data(\"showing\", false);\r\n    }\r\n\r\n    var $dlg = ew.addOptionDialog || $(\"#ew-add-opt-dialog\").on(\"hidden.bs.modal\", _hide);\r\n    if (!$dlg[0]) {\r\n        _alert(\"DIV #ew-add-opt-dialog not found.\");\r\n        return;\r\n    }\r\n    if ($dlg.data(\"showing\"))\r\n        return;\r\n    $dlg.data(\"showing\", true);\r\n\r\n    // Submission success\r\n    var _submitSuccess = function(data) {\r\n        var results = data,\r\n            args = $dlg.data(\"args\"),\r\n            frm = forms.get(args.lnk), // form object\r\n            objName = $dlg.find(\".modal-body form input[name='\" + ew.API_OBJECT_NAME + \"']\").val(), // Get object name from form\r\n            el = args.el, // HTML element name\r\n            re = /^x(\\d+)_/,\r\n            m = el.match(re), // Check row index\r\n            prefix = m ? m[0] : \"x_\",\r\n            index = m ? m[1] : -1,\r\n            name = el.replace(re, \"x_\"),\r\n            list = frm.getList(el);\r\n        if ($.isString(data))\r\n            results = parseJson(data);\r\n        if (results?.success && results[objName]) { // Success\r\n            $dlg.modal(\"hide\");\r\n            var result = results[objName],\r\n                form = frm.$element[0], // HTML form or DIV\r\n                obj = getElements(el, form);\r\n            if (obj) {\r\n                var lf = list.linkField,\r\n                    dfs = list.displayFields.slice(), // Clone\r\n                    ffs = list.filterFields.slice(), // Clone\r\n                    pfs = list.parentFields.slice(); // Clone\r\n                pfs.forEach((pf, i) => {\r\n                    if (pf.split(\" \").length == 1) // Parent field in the same table, add row index\r\n                        pfs[i] = pfs[i].replace(/^x_/, prefix);\r\n                });\r\n                var lfv = (lf != \"\") ? result[lf] : \"\",\r\n                    row = { lf: lfv };\r\n                dfs.forEach((df, i) => {\r\n                    if (df in result)\r\n                        row[\"df\" + (i || \"\")] = result[df];\r\n                });\r\n                ffs.forEach((ff, i) => {\r\n                    if (ff in result)\r\n                        row[\"ff\" + (i || \"\")] = result[ff];\r\n                });\r\n                if (lfv && dfs.length > 0 && row[\"df\"]) {\r\n                    if (list.ajax === null) // Non-Ajax\r\n                        list.lookupOptions.push(row);\r\n                    var arp = pfs.map(pf => getOptionValues(pf, form)), // Get the parent field values\r\n                        args = {\"data\": row, \"parents\": arp, \"valid\": true, \"name\": getId(obj), \"form\": form};\r\n                    $document.trigger(\"addoption\", [args]);\r\n                    if (args.valid) { // Add the new option\r\n                        var ar = getOptions(obj),\r\n                            vals = [];\r\n                        var txt = newOption(obj, row, form);\r\n                        if (obj.options) {\r\n                            obj.options[obj.options.length - 1].selected = true;\r\n                            if (obj.list) { // Radio/Checkbox list\r\n                                obj.render();\r\n                                $(obj.target).find(\"input\").last().focus();\r\n                            }\r\n                            if (isAutoSuggest(obj)) {\r\n                                $(obj).val(lfv).change();\r\n                                $(obj.input).val(txt).focus();\r\n                            } else if (isModalLookup(obj)) {\r\n                                var $obj = $(obj), $lu = $(getElement(\"lu_\" + args.name, form));\r\n                                if (obj.multiple) { // Add to existing values\r\n                                    var val = $(obj).val(), vals = [], nv = String(lfv);\r\n                                    if (val !== \"\")\r\n                                        vals = val.split(ew.MULTIPLE_OPTION_SEPARATOR);\r\n                                    if (!vals.includes(nv)) {\r\n                                        vals.push(nv);\r\n                                        $obj.val(vals.join()).change();\r\n                                        var html = $lu.html(), arOpt = $lu.find(\".ew-option\").map(function() {\r\n                                            return $(this).html();\r\n                                        }).get();\r\n                                        if (arOpt.length) { // Some options selected\r\n                                            arOpt.push(txt);\r\n                                            $lu.html(optionsHtml(arOpt, $obj.data(\"maxcount\")));\r\n                                        } else if (html == ew.language.phrase(\"PleaseSelect\")) { // No options selected\r\n                                            $lu.html(optionHtml(txt));\r\n                                        } else if (html) { // Many options selected\r\n                                            $lu.html(ew.language.phrase(\"CountSelected\").replace(\"%s\", vals.length));\r\n                                        }\r\n                                    }\r\n                                } else {\r\n                                    $obj.val(lfv).change();\r\n                                    $lu.html(txt);\r\n                                }\r\n                            } else {\r\n                                $(obj).change().focus();\r\n                            }\r\n                        }\r\n                        var $form = $(form), suffix = ($form.is(\"div\")) ? \"_\" + $form.attr(\"id\") : \"\";\r\n                        var cnt = $form.find(\"#key_count\" + suffix).val();\r\n                        if (cnt > 0) { // Grid-Add/Edit, update other rows\r\n                            for (var i = 1; i <= cnt; i++) {\r\n                                if (i == index)\r\n                                    continue;\r\n                                var obj2 = getElements(name.replace(/^x/, \"x\" + i), form);\r\n                                var ar2 = getOptions(obj2), vals = [];\r\n                                if (JSON.stringify(ar) != JSON.stringify(ar2)) // Not same options\r\n                                    continue;\r\n                                newOption(obj2, row, form);\r\n                                if (obj2.options && obj.list) // Radio/Checkbox list\r\n                                    obj2.render();\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        } else { // Failure\r\n            if (results?.error) {\r\n                 if ($.isString(results.error))\r\n                    showToast(results.error);\r\n                else if ($.isString(results.error?.description))\r\n                    showToast(results.error.description);\r\n            } else {\r\n                var msg,\r\n                    $div = $(\"<div></div>\").html(data).find(\"div.ew-message-dialog\");\r\n                if ($div[0]) {\r\n                    msg = $div.html();\r\n                } else {\r\n                    msg = results?.failureMessage || data;\r\n                    if (!msg || String(msg).trim() == \"\")\r\n                        msg = ew.language.phrase(\"InsertFailed\");\r\n                }\r\n                showToast(msg);\r\n            }\r\n        }\r\n    }\r\n\r\n    // Fail\r\n    var _fail = function(o) {\r\n        $dlg.modal(\"hide\");\r\n        _alert(\"Server Error \" + o.status + \": \" + o.statusText);\r\n    }\r\n\r\n    // Submit\r\n    var _submit = function(e) {\r\n        let $dlg = ew.addOptionDialog,\r\n            form = $dlg.find(\".modal-body form\")[0],\r\n            frm = forms.get(form.id),\r\n            btn = e ? e.target : null,\r\n            $btn = $(btn);\r\n        if (frm.canSubmit()) {\r\n            $btn.prop(\"disabled\", false).removeClass(\"disabled\");\r\n            $body.css(\"cursor\", \"wait\");\r\n            $.post(getApiUrl(ew.API_ADD_ACTION), $(form).serialize(), _submitSuccess).fail(_fail).always(function() {\r\n                frm.enableForm();\r\n                $btn.prop(\"disabled\", false).removeClass(\"disabled\");\r\n                $body.css(\"cursor\", \"default\");\r\n            });\r\n        }\r\n        return false;\r\n    }\r\n\r\n    $dlg.modal(\"hide\");\r\n    $dlg.data(\"args\", args);\r\n\r\n    // Get form HTML\r\n    var success = function(data) {\r\n        var frm = forms.get(args.lnk),\r\n            prefix = \"x_\",\r\n            m = args.el.match(/^(x\\d+_)/);\r\n        if (m) // Contains row index\r\n            prefix = m[1];\r\n        var list = frm.getList(args.el),\r\n            pfs = list.parentFields.slice() // Clone\r\n                .map(pf => (pf.split(\" \").length == 1) ? pf.replace(/^x_/, prefix) : pf), // Parent field in the same table, add row index\r\n            form = frm.htmlForm,\r\n            ar = pfs.map(pf => getOptionValues(pf, form)),\r\n            ar2 = pfs.map(pf => getOptionTexts(pf, form)),\r\n            ffs = list.filterFieldVars.slice(); // Clone\r\n        $dlg.find(\".modal-title\").html($(args.lnk).closest(\".ew-add-opt-btn\").data(\"title\"));\r\n        $dlg.find(\".modal-body\").html(stripScript(data));\r\n        var form = $dlg.find(\".modal-body form\")[0];\r\n        if (form) { // Set the filter field value\r\n            $(form).keypress(function(e) {\r\n                if (e.which == 13 && e.target.nodeName != \"TEXTAREA\")\r\n                    return _submit();\r\n            });\r\n            ar.forEach((v, i) => {\r\n                (function() {\r\n                    var obj = getElements(ffs[i], form);\r\n                    if (obj) {\r\n                        if (obj.options || obj.length) { // Selection list\r\n                            $(obj).first().one(\"updatedone\", () => selectOption(obj, v));\r\n                        } else {\r\n                            selectOption(obj, v);\r\n                        }\r\n                    }\r\n                })();\r\n            });\r\n        }\r\n        ew.addOptionDialog = $dlg.modal(\"show\");\r\n        $dlg.find(\".modal-footer .btn-primary\").click(_submit).focus();\r\n        executeScript(data, args.el);\r\n        if (form) { // Set the filter field value\r\n            ar.forEach((v, i) => {\r\n                var obj = getElements(ffs[i], form);\r\n                if (obj) {\r\n                    if (isAutoSuggest(obj)) { // AutoSuggest\r\n                        obj.value = v[0];\r\n                        obj.input.value = ar2[i][0];\r\n                        obj.add(v[0], ar2[i][0], true);\r\n                    } else if (isModalLookup(obj)) { // Modal-Lookup\r\n                        obj.value = v[0];\r\n                        updateOptions.call(forms.get(form.id), obj);\r\n                    } else if (obj.options || obj.length) { // Selection list\r\n                        // Skip\r\n                    } else { // Text\r\n                        obj.value = v[0];\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        $dlg.trigger(\"load.ew\");\r\n    };\r\n    $.get(args.url, success).fail(_fail);\r\n}\r\n\r\n// Hide Modal dialog\r\nexport function modalDialogHide(e) {\r\n    var $dlg = $(this), args = $dlg.data(\"args\");\r\n    removeScript(\"ModalDialog\");\r\n    var frm = $dlg.removeData(\"args\").find(\".modal-body form\").data(\"form\");\r\n    if (frm)\r\n        frm.destroyEditor();\r\n    var $bd = $dlg.find(\".modal-body\").html(\"\");\r\n    if ($bd.ewjtable && $bd.ewjtable(\"instance\"))\r\n        $bd.ewjtable(\"destroy\");\r\n    $dlg.find(\".modal-footer .btn-primary\").unbind();\r\n    $dlg.find(\".modal-dialog\").removeClass(function(index, className) {\r\n        var m = className.match(/table\\-\\w+/);\r\n        return (m) ? m[0] : \"\";\r\n    });\r\n    $dlg.data(\"showing\", false);\r\n    $dlg.data(\"url\", null);\r\n    if (args && args.reload)\r\n        window.location.reload(true);\r\n}\r\n\r\n/**\r\n * Show modal dialog\r\n *\r\n * @param {Object} args - Arguments\r\n * @param {HTMLFormElement} args.f - Form of List page\r\n * @param {HTMLElement} args.lnk - Anchor element\r\n * @param {string} args.url - URL of the form\r\n * @param {string|null} args.btn - Button phrase ID\r\n * @param {string} args.caption - Caption in dialog header\r\n * @param {boolean} args.reload - Reload page after hiding dialog or not\r\n * @param {string} args.size - Size of the dialog 'modal-sm'|''|modal-lg'|'modal-xl'(default)\r\n * @returns false\r\n */\r\nexport function modalDialogShow(args) {\r\n    $(args.lnk).tooltip(\"hide\");\r\n    var f = args.f;\r\n    if (f && !keySelected(f)) {\r\n        _prompt(\"<p class=\\\"text-danger\\\">\" + ew.language.phrase(\"NoRecordSelected\") + \"</p>\");\r\n        return false;\r\n    }\r\n\r\n    var $dlg = ew.modalDialog || $(\"#ew-modal-dialog\").on(\"hidden.bs.modal\", modalDialogHide); // div#ew-modal-dialog always exists\r\n    if ($dlg.data(\"showing\") && $dlg.data(\"url\") == args.url)\r\n        return false;\r\n    $dlg.data({ showing: true, url: args.url });\r\n    args.reload = false;\r\n\r\n    // size\r\n    if (args.size === \"modal-sm\") { // 300px\r\n        $dlg.find(\".modal-dialog\").toggleClass(\"modal-sm\", true).toggleClass(\"modal-lg modal-xl\", false);\r\n    } else if (args.size === \"\") { // 500px\r\n        $dlg.find(\".modal-dialog\").toggleClass(\"modal-sm modal-lg modal-xl\", false);\r\n    } else if (args.size === \"modal-lg\") { // 800px\r\n        $dlg.find(\".modal-dialog\").toggleClass(\"modal-lg\", true).toggleClass(\"modal-sm modal-xl\", false);\r\n    } else { // Default = 1140px\r\n        $dlg.find(\".modal-dialog\").toggleClass(\"modal-xl\", true).toggleClass(\"modal-sm modal-lg\", false);\r\n    }\r\n\r\n    // caption\r\n    var _caption = function() {\r\n        var args = $dlg.data(\"args\");\r\n        var $lnk = $(args.lnk);\r\n        return args.caption || $lnk.data(\"caption\") || $lnk.data(\"original-title\") || \"\";\r\n    };\r\n\r\n    // button text\r\n    var _button = function() {\r\n        var args = $dlg.data(\"args\");\r\n        if ($.isNull(args.btn))\r\n            return \"\";\r\n        else if (args.btn && args.btn != \"\")\r\n            return ew.language.phrase(args.btn);\r\n        else\r\n            return _caption();\r\n    };\r\n\r\n    // fail\r\n    var _fail = function(o) {\r\n        $dlg.modal(\"hide\");\r\n        if (o.status)\r\n            _alert(\"Server Error \" + o.status + \": \" + o.statusText);\r\n    }\r\n\r\n    // always\r\n    var _always = function(o) {\r\n        $body.css(\"cursor\", \"default\");\r\n    }\r\n\r\n    // check if current page\r\n    var _current = function(url) {\r\n        var a = $(\"<a>\", { href: url })[0];\r\n        return window.location.pathname.endsWith(a.pathname);\r\n    }\r\n\r\n    // submit success\r\n    var _submitSuccess = function(data) {\r\n        var result = parseJson(data);\r\n        if ($.isObject(result)) {\r\n            if ($.isString(result.failureMessage)) {\r\n                _alert(result.failureMessage);\r\n            } else if (result.error) {\r\n                if ($.isString(result.error))\r\n                    _alert(result.error);\r\n                else if ($.isString(result.error?.description))\r\n                    _alert(result.error.description);\r\n            } else {\r\n                var url = result.url;\r\n                if (result.modal && !_current(url)) {\r\n                    var args = $dlg.data(\"args\");\r\n                    args.reload = true;\r\n                    if (result.caption)\r\n                        args.caption = result.caption;\r\n                    args.btn = result.view ? null : \"\";\r\n                    $dlg.data(\"args\", args);\r\n                    url += (url.split(\"?\").length > 1 ? \"&\" : \"?\") + \"modal=1&rnd=\" + random();\r\n                    $body.css(\"cursor\", \"wait\");\r\n                    $.ajax(url).done(success).fail(_fail).always(_always);\r\n                } else {\r\n                    $dlg.modal(\"hide\");\r\n                    window.location = url;\r\n                }\r\n            }\r\n        } else {\r\n            var body = getContent(data);\r\n            var $bd = $dlg.find(\".modal-body\").html(body);\r\n            var footer = \"\";\r\n            var cf = $bd.find(\"#confirm\");\r\n            var ct = $bd.find(\"#conflict\");\r\n            if (ct && ct.val() == \"1\") { // Conflict page\r\n                footer += \"<button type=\\\"button\\\" id=\\\"btn-overwrite\\\" class=\\\"btn btn-primary ew-btn\\\">\" + ew.language.phrase(\"OverwriteBtn\") + \"</button>\";\r\n                footer += \"<button type=\\\"button\\\" id=\\\"btn-reload\\\" class=\\\"btn btn-default ew-btn\\\">\" + ew.language.phrase(\"ReloadBtn\") + \"</button>\";\r\n                footer += \"<button type=\\\"button\\\" class=\\\"btn btn-default ew-btn\\\" data-dismiss=\\\"modal\\\">\" + ew.language.phrase(\"CancelBtn\") + \"</button>\";\r\n                $dlg.find(\".modal-footer\").html(footer);\r\n                $dlg.find(\".modal-footer #btn-overwrite\").on('click', {action: 'overwrite'}, _submit);\r\n                $dlg.find(\".modal-footer #btn-reload\").on('click', {action: 'show'}, _submit);\r\n            } else if (cf && cf.val() == \"confirm\") { // Confirm page\r\n                footer += \"<button type=\\\"button\\\" class=\\\"btn btn-primary ew-btn\\\">\" + ew.language.phrase(\"ConfirmBtn\") + \"</button>\";\r\n                footer += \"<button type=\\\"button\\\" class=\\\"btn btn-default ew-btn\\\">\" + ew.language.phrase(\"CancelBtn\") + \"</button>\";\r\n                $dlg.find(\".modal-footer\").html(footer);\r\n                $dlg.find(\".modal-footer .btn-primary\").click(_submit).focus();\r\n                $dlg.find(\".modal-footer .btn-default\").on(\"click\", {action: \"cancel\"}, _submit);\r\n            } else { // Normal page\r\n                var btn = _button();\r\n                if (btn)\r\n                    footer += \"<button type=\\\"button\\\" class=\\\"btn btn-primary ew-btn\\\">\" + btn + \"</button>\";\r\n                footer += \"<button type=\\\"button\\\" class=\\\"btn btn-default ew-btn\\\" data-dismiss=\\\"modal\\\">\" + ew.language.phrase(\"CancelBtn\") + \"</button>\";\r\n                $dlg.find(\".modal-footer\").html(footer);\r\n                $dlg.find(\".modal-footer .btn-primary\").addClass(\"ew-submit\").click(_submit).focus();\r\n            }\r\n            executeScript(data, \"ModalDialog\");\r\n            $dlg.trigger(\"load.ew\"); // Trigger load event for, e.g. Use JavaScript popup message\r\n        }\r\n    }\r\n\r\n    // submit\r\n    var _submit = function(e) {\r\n        var form = $dlg.find(\".modal-body form\")[0],\r\n            $form = $(form),\r\n            frm = forms.get(form.id),\r\n            action = e && e.data ? e.data.action : null,\r\n            btn = e ? e.target : null;\r\n        if (btn) {\r\n            if (btn.classList.contains(\"disabled\"))\r\n                return false;\r\n            frm.enableForm = function() {\r\n                $(btn).prop(\"disabled\", false).removeClass(\"disabled\");\r\n            };\r\n            frm.disableForm = function() {\r\n                $(btn).prop(\"disabled\", true).addClass(\"disabled\");\r\n            };\r\n        }\r\n        var input = form.elements[\"action\"];\r\n        if (action && input)\r\n            input.value = action; // Update action\r\n        if (action == \"cancel\") { // Cancel\r\n            $.post($form.attr(\"action\"), $form.serialize(), success).fail(_fail).always(_always);\r\n        } else if (frm.canSubmit()) {\r\n            $body.css(\"cursor\", \"wait\");\r\n            $.post($form.attr(\"action\"), $form.serialize(), _submitSuccess).fail(_fail).always(function() {\r\n                frm.enableForm();\r\n                _always();\r\n            });\r\n        }\r\n        return false;\r\n    }\r\n\r\n    $dlg.modal(\"hide\");\r\n    $dlg.data(\"args\", args);\r\n\r\n    var success = function(data) {\r\n        var result = parseJson(data);\r\n        if ($.isObject(result)) {\r\n            if (result.error)\r\n                _alert(result.error);\r\n        } else {\r\n            var args = $dlg.data(\"args\");\r\n            var $lnk = $(args.lnk);\r\n            $dlg.find(\".modal-title\").html(_caption());\r\n            var footer = \"\";\r\n            var btn = _button();\r\n            if (btn)\r\n                footer += \"<button type=\\\"button\\\" class=\\\"btn btn-primary ew-btn\\\">\" + btn + \"</button>\";\r\n            if (footer != \"\")\r\n                footer += \"<button type=\\\"button\\\" class=\\\"btn btn-default ew-btn\\\" data-dismiss=\\\"modal\\\">\" + ew.language.phrase(\"CancelBtn\") + \"</button>\";\r\n            else\r\n                footer = \"<button type=\\\"button\\\" class=\\\"btn btn-default ew-btn\\\" data-dismiss=\\\"modal\\\">\" + ew.language.phrase(\"CloseBtn\") + \"</button>\";\r\n            $dlg.find(\".modal-footer\").html(footer);\r\n            var body = getContent(data);\r\n            $dlg.find(\".modal-body\").html(body);\r\n            var table = $lnk.data(\"table\");\r\n            if (table)\r\n                $dlg.find(\".modal-dialog\").addClass(\"table-\" + table);\r\n            var $btn = $dlg.find(\".modal-footer .btn-primary\").addClass(\"ew-submit\").click(_submit);\r\n            $dlg.find(\".modal-body form\").keypress(function(e) {\r\n                if (e.which == 13 && e.target.nodeName != \"TEXTAREA\")\r\n                    return $btn.click();\r\n            });\r\n            ew.modalDialog = $dlg.modal(\"show\");\r\n            executeScript(data, \"ModalDialog\");\r\n            $dlg.trigger(\"load.ew\"); // Trigger load event for, e.g. YouTube videos, ReCAPTCHA and Google maps\r\n            $btn.focus();\r\n        }\r\n    };\r\n\r\n    $body.css(\"cursor\", \"wait\");\r\n\r\n    var url = args.url;\r\n    if (f) { // Post form\r\n        var $f = $(f);\r\n        if (!f.elements.modal)\r\n            $(\"<input>\").attr({type: \"hidden\", name: \"modal\", value: \"1\"}).appendTo($f);\r\n        $.post(url, $f.serialize(), success).fail(_fail).always(_always);\r\n    } else {\r\n        url += (url.split(\"?\").length > 1 ? \"&\" : \"?\") + \"modal=1&rnd=\" + random();\r\n        $.get(url, success).fail(_fail).always(_always);\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\n// Show Modal Lookup\r\nexport function modalLookupShow(args) {\r\n    var el = args.el, f = getForm(args.lnk);\r\n    if (!f || !el)\r\n        return;\r\n\r\n    var $dlg = ew.modalLookupDialog || $(\"#ew-modal-lookup-dialog\").on(\"hidden.bs.modal\", modalDialogHide);\r\n    if (!$dlg[0]) {\r\n        _alert(\"DIV #ew-modal-lookup-dialog not found.\");\r\n        return;\r\n    }\r\n    if ($dlg.data(\"showing\"))\r\n        return;\r\n    $dlg.data(\"showing\", true);\r\n\r\n    var $f = $(f),\r\n        $input = $f.find(\"[id='\" + el + \"']\"), // id may contains \"[]\"\r\n        $bd = $dlg.find(\".modal-body\"),\r\n        $lnk = $(args.lnk),\r\n        $lu = $lnk.closest(\".ew-lookup-list\").find(\".ew-lookup-text\").focus(),\r\n        oid = getId(el, false),\r\n        m = oid.match(/^([xy])(\\d*)_/),\r\n        rowindex = m ? m[2] : \"\",\r\n        list = forms.get(f.id).getList(el);\r\n\r\n    // Format data\r\n    var _format = function(data) {\r\n        if (data.result == \"OK\" && Array.isArray(data.records)) {\r\n            data.records.forEach(function(ar, index) {\r\n                var item;\r\n                if (Array.isArray(ar))\r\n                    item = { \"lf\": ar[0], \"df1\": ar[1], \"df2\": ar[2], \"df3\": ar[3], \"df4\": ar[4] };\r\n                else if ($.isObject(ar))\r\n                    item = { lf: ar.lf, df1: ar.df, df2: ar.df2, df3: ar.df3, df4: ar.df4 };\r\n                var txt = displayValue(ar, $input);\r\n                if (list.template) {\r\n                    item[\"df\"] = list.template.render(item, ew.jsRenderHelpers);\r\n                } else {\r\n                    item[\"df\"] = txt;\r\n                }\r\n                item[\"txt\"] = txt;\r\n                data.records[index] = item;\r\n            });\r\n        }\r\n        return data;\r\n    }\r\n\r\n    // Set AutoSuggest\r\n    var setAutoSuggest = function(value, text) {\r\n        if (!isAutoSuggest($input))\r\n            return;\r\n        let el = $input[0];\r\n        el.add(value, text, true);\r\n        el.input.value = text;\r\n    }\r\n\r\n    // Add option\r\n    var addOpt = function(ar) {\r\n        // Check if selected records are in the current page\r\n        var vals = [], html = [], opts = [], txts = [], useText = !args.m && args.srch;\r\n        $bd.ewjtable(\"selectedRows\").each(function() {\r\n            var record = $(this).data(\"record\");\r\n            vals.push(record.lf);\r\n            html.push(record.df);\r\n            opts.push(record.df);\r\n            txts.push(record.txt); // Text for Auto-Suggest\r\n        });\r\n        if (ar.sort().join() === vals.sort().join()) { // All selected records are from the current page\r\n            $lu.html(optionsHtml(opts, $input.data(\"maxcount\")));\r\n            setAutoSuggest(vals.join(), txts.join(\", \"));\r\n            $input.val(useText ? html.join(\", \") : vals.join()).change();\r\n        } else { // Get selected records from server\r\n            var data = Object.assign({ page: list.page, field: list.field, ajax: \"modal\", keys: ar }, getUserParams('#p_' + oid, f));\r\n            $body.css(\"cursor\", \"wait\");\r\n            $.ajax(getApiUrl(ew.API_LOOKUP_ACTION), {\r\n                type: \"POST\",\r\n                dataType: \"json\",\r\n                data: data\r\n            }).done(_format).then(function(data) {\r\n                if (data.result == \"OK\" && Array.isArray(data.records)) {\r\n                    var vals = [], html = [], opts = [], txts = [], results = data.records;\r\n                    for (let result of results) {\r\n                        vals.push(result.lf);\r\n                        html.push(result.df)\r\n                        opts.push(result.df);\r\n                        txts.push(result.txt); // Text for Auto-Suggest\r\n                    }\r\n                    $lu.html(optionsHtml(opts, $input.data(\"maxcount\")));\r\n                    setAutoSuggest(vals.join(), txts.join(\", \"));\r\n                    $input.val(useText ? html.join(\", \") : vals.join()).change();\r\n                }\r\n            }).always(function() {\r\n                $body.css(\"cursor\", \"default\");\r\n            });\r\n        }\r\n    }\r\n\r\n    // Submit\r\n    var _submit = function() {\r\n        addOpt(arLinkValue);\r\n        $dlg.modal(\"hide\");\r\n        return false;\r\n    }\r\n\r\n    // Hide\r\n    $dlg.modal(\"hide\");\r\n    $dlg.data(\"args\", args);\r\n    var _timer, $search;\r\n\r\n    // Success\r\n    var success = function(data) {\r\n        if (data.result == \"OK\") {\r\n            $dlg.find(\".modal-title\").html($lnk.attr(\"title\") || $lnk.data(\"original-title\"));\r\n            $dlg.find(\".modal-body .ewjtable thead\").toggle(!!args.m);\r\n            $dlg.find(\".modal-footer\").html('<button type=\"button\" id=\"btn-select\" class=\"btn btn-primary ew-btn\">' + ew.language.phrase(\"SelectBtn\") + '</button>' +\r\n                '<button type=\"button\" class=\"btn btn-default ew-btn\" data-dismiss=\"modal\">' + ew.language.phrase(\"CancelBtn\") + '</button>');\r\n            $search = $dlg.find(\".modal-header .modal-tools input[name=sv]\").off(\"keyup.ew\").on(\"keyup.ew\", function(e) {\r\n                    if (_timer)\r\n                        _timer.cancel();\r\n                    _timer = $.later(ew.LOOKUP_DELAY, null, function() {\r\n                        $bd.ewjtable(\"load\", { \"sv\": $search.val() });\r\n                    });\r\n                });\r\n            $dlg.find(\".modal-footer #btn-select\").click(_submit); // Select\r\n            ew.modalLookupDialog = $dlg.modal(\"show\");\r\n            $search.focus();\r\n        } else {\r\n            _alert(data.message);\r\n        }\r\n    };\r\n\r\n    var arp = [];\r\n    var linkValue = $input.val(); // Link values\r\n    var arLinkValue = (linkValue !== \"\") ? linkValue.split(ew.MULTIPLE_OPTION_SEPARATOR) : [];\r\n    var data = Object.assign({ page: list.page, field: list.field }, getUserParams('#p_' + oid, f));\r\n\r\n    // Add parent field values\r\n    var parentId = list.parentFields.slice(); // Clone\r\n    if (rowindex != \"\") {\r\n        for (var i = 0, len = parentId.length; i < len; i++) {\r\n            var ar = parentId[i].split(\" \");\r\n            if (ar.length == 1) // Parent field in the same table, add row index\r\n                parentId[i] = parentId[i].replace(/^x_/, \"x\" + rowindex + \"_\");\r\n        }\r\n    }\r\n    if (parentId.length > 0) {\r\n        for (var i = 0, len = parentId.length; i < len; i++)\r\n            arp.push(getOptionValues(parentId[i], f));\r\n    }\r\n    for (var i = 0, cnt = arp.length; i < cnt; i++) // Filter by parent fields\r\n        data[\"v\" + (i + 1)] = arp[i].join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n\r\n    $body.css(\"cursor\", \"wait\");\r\n    $bd.ewjtable({\r\n        paging: true,\r\n        pageSize: args.n,\r\n        pageSizes: [],\r\n        pageSizeChangeArea: false,\r\n        pageList: \"minimal\",\r\n        selecting: true,\r\n        selectingCheckboxes: true,\r\n        multiselect: !!args.m,\r\n        actions: {\r\n            \"listAction\": function(postData, jtParams) {\r\n                var _data = Object.assign({}, data, {\r\n                    ajax: \"modal\",\r\n                    start: jtParams.start,\r\n                    recperpage: jtParams.recperpage\r\n                });\r\n                if ($.isObject(postData)) // Search\r\n                    Object.assign(_data, postData);\r\n                return $.ajax(getApiUrl(ew.API_LOOKUP_ACTION), {\r\n                        type: \"POST\",\r\n                        dataType: \"json\",\r\n                        data: _data\r\n                    }).done(_format).always(function() {\r\n                        $body.css(\"cursor\", \"default\");\r\n                    });\r\n            }\r\n        },\r\n        messages: {\r\n            serverCommunicationError: ew.language.phrase(\"ServerCommunicationError\"),\r\n            loadingMessage: '<div class=\"' + ew.spinnerClass + ' m-3 ew-loading\" role=\"status\"><span class=\"sr-only\">' + ew.language.phrase(\"Loading\") + '</span></div>',\r\n            noDataAvailable: ew.language.phrase(\"NoRecord\"),\r\n            close: ew.language.phrase(\"CloseBtn\"),\r\n            pagingInfo: ew.language.phrase(\"Record\") + \" {0}-{1} \" + ew.language.phrase(\"Of\") + \" {2}\",\r\n            pageSizeChangeLabel: ew.language.phrase(\"RecordsPerPage\"),\r\n            gotoPageLabel: ew.language.phrase(\"Page\")\r\n        },\r\n        fields: {\r\n            \"lf\": { key: true, list: false},\r\n            \"df\": {}\r\n        },\r\n        recordsLoaded: function(e, data) {\r\n            var selectedRows = $(e.target).find(\".ewjtable-data-row\").filter(function() {\r\n                return arLinkValue.includes(String($(this).data(\"record-key\")));\r\n            });\r\n            $(e.target).ewjtable(\"selectRows\", selectedRows);\r\n        },\r\n        selectionChanged: function(e, data) {\r\n            var $rows = data.rows;\r\n            if ($rows) {\r\n                if (!args.m)\r\n                    arLinkValue = [];\r\n                $rows.each(function() {\r\n                    var $row = $(this);\r\n                    var key = String($row.data(\"record-key\"));\r\n                    var index = arLinkValue.indexOf(key);\r\n                    var selected = $row.hasClass(\"ewjtable-row-selected\");\r\n                    if (selected && index == -1)\r\n                        arLinkValue.push(key);\r\n                    else if (!selected && index > -1)\r\n                        arLinkValue.splice(index, 1);\r\n                });\r\n            }\r\n        }\r\n    }).ewjtable(\"load\", null, success);\r\n}\r\n\r\n/**\r\n * Show dialog for import\r\n *\r\n * @param {Object} args - Arguments\r\n * @param {string} args.hdr - Dialog header\r\n * @param {HTMLElement} args.lnk - Anchor element\r\n * @returns\r\n */\r\nexport function importDialogShow(args) {\r\n    $(args.lnk).tooltip(\"hide\");\r\n    var $dlg = ew.importDialog || $(\"#ew-import-dialog\");\r\n    if (!$dlg[0]) {\r\n        _alert(\"DIV #ew-import-dialog not found.\");\r\n        return false;\r\n    }\r\n\r\n    var $input = $dlg.find(\"#importfiles\"),\r\n        $bd = $dlg.find(\".modal-body\"),\r\n        $data = $bd.find(\":input[id!=importfiles]\"),\r\n        $message = $bd.find(\".message\"),\r\n        $progress = $bd.find(\".progress\"),\r\n        timer;\r\n\r\n    // Disable buttons\r\n    var disableButtons = function() {\r\n        $dlg.find(\".modal-footer .btn\").prop(\"disabled\", true);\r\n    }\r\n\r\n    // Enable buttons\r\n    var enableButtons = function() {\r\n        $dlg.find(\".modal-footer .btn\").prop(\"disabled\", false);\r\n    }\r\n\r\n    // Show message\r\n    var showMessage = function(msg, classname) {\r\n        var $msg = $(\"<div>\" + msg + \"</div>\");\r\n        if (classname)\r\n            $msg.addClass(classname);\r\n        $message.removeClass(\"d-none\").html($msg);\r\n        if (classname == \"text-danger\")\r\n            enableButtons();\r\n    }\r\n\r\n    // Hide message\r\n    var hideMessage = function() {\r\n        $message.addClass(\"d-none\").html(\"\");\r\n    }\r\n\r\n    // Show progress\r\n    var showProgress = function(pc, classname) {\r\n        $progress.removeClass(\"d-none\").find(\".progress-bar\").removeClass(\"bg-success bg-info\").addClass(classname || \"bg-success\")\r\n            .attr(\"aria-valuenow\", pc).css(\"width\", pc + \"%\").html(pc + \"%\");\r\n    }\r\n\r\n    // Hide progress\r\n    var hideProgress = function() {\r\n        $progress.addClass(\"d-none\").find(\".progress-bar\").attr(\"aria-valuenow\", 0).css(\"width\", \"0%\").html(\"0%\");\r\n    }\r\n\r\n    // Upload progress\r\n    var uploadProgress = function(data) {\r\n        var pc = parseInt(100 * data.loaded / data.total);\r\n        showProgress(pc, \"bg-info\");\r\n        if (pc === 100) {\r\n            showMessage(ew.language.phrase(\"ImportMessageUploadComplete\"), \"text-info\");\r\n        } else {\r\n            showMessage(ew.language.phrase(\"ImportMessageUploadProgress\").replace(\"%p\", pc), \"text-info\");\r\n        }\r\n    }\r\n\r\n    // Update progress (import)\r\n    var updateProgress = function(result) {\r\n        try {\r\n            var cnt = parseInt(result.count), tcnt = parseInt(result.totalCount), filename = result.file;\r\n            if (tcnt > 0 && $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\")) { // Show progress\r\n                var pc = parseInt(100 * cnt / tcnt);\r\n                showProgress(pc);\r\n                showMessage(ew.language.phrase(\"ImportMessageProgress\").replace(\"%t\", tcnt).replace(\"%c\", cnt).replace(\"%f\", filename), \"text-info\");\r\n            }\r\n        } catch(e) {}\r\n    }\r\n\r\n    // Import progress\r\n    var importProgress = function() {\r\n        var url = getApiUrl(ew.API_PROGRESS_ACTION), data = { \"rnd\": random() };\r\n        data[ew.API_FILE_TOKEN_NAME] = $input.data(ew.API_FILE_TOKEN_NAME);\r\n        $.get(url, data, updateProgress, \"json\");\r\n    }\r\n\r\n    // Import complete\r\n    var importComplete = function(result) {\r\n        var maxErrorCount = 5;\r\n        var msg = \"\";\r\n        showProgress(100);\r\n        var fileResults = result.files;\r\n        $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", false); // Stop import progress\r\n        if (Array.isArray(fileResults)) {\r\n            for (var i = 0, len = fileResults.length; i < len; i++) {\r\n                var fileResult = fileResults[i],\r\n                    tcnt = fileResult.totalCount || 0,\r\n                    cnt = fileResult.count || 0,\r\n                    scnt = fileResult.successCount || 0,\r\n                    fcnt = fileResult.failCount || 0;\r\n                if (msg != \"\")\r\n                    msg += \"<br>\";\r\n                if (fileResult.success) {\r\n                    msg += ew.language.phrase(\"ImportMessageSuccess\").replace(\"%t\", tcnt).replace(\"%c\", cnt).replace(\"%f\", fileResult.file);\r\n                } else {\r\n                    msg += ew.language.phrase(\"ImportMessageError1\").replace(\"%t\", tcnt).replace(\"%c\", cnt).replace(\"%f\", fileResult.file).replace(\"%s\", scnt).replace(\"%e\", fcnt);\r\n                    if (fileResult.error)\r\n                        msg += ew.language.phrase(\"ImportMessageError2\").replace(\"%e\", fileResult.error);\r\n                    var showLog = true;\r\n                    if (fileResult.failList) {\r\n                        var ecnt = 0;\r\n                        for (var i = 1; i <= cnt; i++) {\r\n                            if (fileResult.failList[\"row\" + i]) {\r\n                                ecnt += 1;\r\n                                msg += \"<br>\" + ew.language.phrase(\"ImportMessageError3\").replace(\"%i\", i).replace(\"%d\", fileResult.failList[\"row\" + i]);\r\n                            }\r\n                            if (ecnt >= maxErrorCount)\r\n                                break;\r\n                        }\r\n                        if (fcnt > maxErrorCount)\r\n                            msg += \"<br>\" + ew.language.phrase(\"ImportMessageMore\").replace(\"%s\", fcnt - maxErrorCount);\r\n                        else\r\n                            showLog = false;\r\n                    }\r\n                    if (fileResult.log && showLog)\r\n                        msg += \"<br>\" + ew.language.phrase(\"ImportMessageError4\").replace(\"%l\", fileResult.log);\r\n                    showMessage(msg, \"text-danger\"); // Show error message\r\n                }\r\n            }\r\n        }\r\n        if (result.success) {\r\n            showMessage(msg, \"text-success\");\r\n            $dlg.find(\".modal-footer .ew-close-btn\").data(\"imported\", true);\r\n        } else {\r\n            if (result.error)\r\n                msg = result.error;\r\n            showMessage(msg, \"text-danger\"); // Show error message\r\n        }\r\n        hideProgress();\r\n    }\r\n\r\n    // Import fail\r\n    var importFail = function(o) {\r\n        $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", false); // Stop import progress\r\n        showMessage(ew.language.phrase(\"ImportMessageServerError\").replace(\"%s\", o.status).replace(\"%t\", o.statusText), \"text-danger\");\r\n    }\r\n\r\n    // Import file\r\n    var importFiles = function(filetoken) {\r\n        $body.css(\"cursor\", \"wait\");\r\n        $input.data(ew.API_FILE_TOKEN_NAME, filetoken);\r\n        $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", true); // Show import progress\r\n        var data = ew.API_ACTION_NAME + \"=import&\" + ew.API_FILE_TOKEN_NAME + \"=\" + encodeURIComponent(filetoken);\r\n        if ($data.length)\r\n            data += \"&\" + $data.serialize();\r\n        $.ajax(currentPage(), {\r\n            \"data\": data,\r\n            \"method\": \"POST\",\r\n            \"dataType\": \"json\",\r\n            \"beforeSend\": function(xhr, settings) {\r\n                timer = $.later(100, null, importProgress, null, true); // Use time to show progress periodically\r\n            }\r\n        }).done(importComplete).fail(importFail).always(function() {\r\n            $body.css(\"cursor\", \"default\");\r\n            if (timer)\r\n                timer.cancel(); // Clear timer\r\n        });\r\n    }\r\n\r\n    var formData = { session: ew.SESSION_ID };\r\n    formData[ew.TOKEN_NAME_KEY] = ew.TOKEN_NAME; // Add token name for $.ajax() sent by jQuery File Upload (not by ajaxSend) // PHP\r\n    formData[ew.ANTIFORGERY_TOKEN_KEY] = ew.ANTIFORGERY_TOKEN; // Add antiforgery token for $.ajax() sent by jQuery File Upload (not by ajaxSend) // PHP\r\n    var options = ew.importUploadOptions;\r\n    if (!options.acceptFileTypes)\r\n        options.acceptFileTypes = new RegExp('\\\\.(' + ew.IMPORT_FILE_ALLOWED_EXT.replace(/,/g, '|') + ')$', 'i');\r\n\r\n    if (!$input.data(\"blueimpFileupload\")) {\r\n        $input.fileupload(Object.assign({\r\n                url: getApiUrl(ew.API_UPLOAD_ACTION),\r\n                dataType: \"json\",\r\n                autoUpload: true,\r\n                formData: formData,\r\n                singleFileUploads: false,\r\n                messages: {\r\n                    acceptFileTypes: ew.language.phrase(\"UploadErrMsgAcceptFileTypes\"),\r\n                    maxFileSize: ew.language.phrase(\"UploadErrMsgMaxFileSize\"),\r\n                    maxNumberOfFiles: ew.language.phrase(\"UploadErrMsgMaxNumberOfFiles\"),\r\n                    minFileSize: ew.language.phrase(\"UploadErrMsgMinFileSize\")\r\n                },\r\n                done: function(e, data) {\r\n                    if (data.result && data.result.files && Array.isArray(data.result.files.importfiles)) {\r\n                        var ok = true;\r\n                        data.result.files.importfiles.forEach(function(file, index) {\r\n                            if (file.error) {\r\n                                showMessage(ew.language.phrase(\"ImportMessageUploadError\").replace(\"%f\", file.name).replace(\"%s\", file.error), \"text-danger\");\r\n                                ok = false;\r\n                            }\r\n                        }); // Show upload errors for each file\r\n                        if (ok)\r\n                            importFiles(data.result[ew.API_FILE_TOKEN_NAME]); // Import uploaded files\r\n                    }\r\n                },\r\n                change: function(e, data) {\r\n                    hideMessage();\r\n                },\r\n                processfail: function(e, data) {\r\n                    data.files.forEach(function(file, index) {\r\n                        if (file.error)\r\n                            showMessage(ew.language.phrase(\"ImportMessageUploadError\").replace(\"%f\", file.name).replace(\"%s\", file.error), \"text-danger\");\r\n                    }); // Show process errors for each file\r\n                },\r\n                fail: function(e, data) {\r\n                    showMessage(ew.language.phrase(\"ImportMessageServerError\").replace(\"%s\", data.textStatus).replace(\"%t\", data.errorThrown), \"text-danger\");\r\n                },\r\n                progressall: function(e, data) {\r\n                    uploadProgress(data);\r\n                }\r\n        }, options));\r\n    }\r\n\r\n    $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr);\r\n    $dlg.find(\".modal-footer .ew-close-btn\").off(\"click.ew\").on(\"click.ew\", function() {\r\n        var $this = $(this);\r\n        if ($this.data(\"imported\")) {\r\n            $this.data(\"imported\", false);\r\n            window.location.reload(true);\r\n        }\r\n    });\r\n    hideMessage();\r\n    ew.importDialog = $dlg.modal(\"show\");\r\n    return false;\r\n}\r\n\r\n// Auto-fill\r\nexport function autoFill(el) {\r\n    var f = forms.get(el).$element[0];\r\n    if (!f)\r\n        return;\r\n    var ar = getOptionValues(el),\r\n        id = getId(el),\r\n        m = id.match(/^([xy])(\\d*)_/),\r\n        rowindex = (m) ? m[2] : \"\",\r\n        list = forms.get(el).getList(id),\r\n        dest_array = list.autoFillTargetFields;\r\n    var success = function(data) {\r\n        var results = data && data.records || \"\";\r\n        var result = (results) ? results[0] : [];\r\n        for (var j = 0; j < dest_array.length; j++) {\r\n            var destEl = getElements(dest_array[j].replace(/^x_/, \"x\" + rowindex + \"_\"), f);\r\n            if (destEl) {\r\n                var val = ($.isValue(result[\"af\" + j])) ? result[\"af\" + j] : \"\";\r\n                var args = {results: results, result: result, data: val, form: f, name: id, target: dest_array[j], cancel: false, trigger: true};\r\n                $(el).trigger(\"autofill\", [args]); // Fire event\r\n                if (args.cancel)\r\n                    continue;\r\n                val = args.data; // Process the value\r\n                if (destEl.options) { // Selection list\r\n                    selectOption(destEl, val.split(\",\"));\r\n                    if (isAutoSuggest(destEl)) { // Auto-Suggest\r\n                        destEl.input.value = val;\r\n                        updateOptions.call(forms.get(f.id), destEl);\r\n                    } else if (isModalLookup(destEl)) { // Modal-Lookup\r\n                        //$(destEl).parent().find(\".ew-lookup-text\").html(val);\r\n                        updateOptions.call(forms.get(f.id), destEl);\r\n                    }\r\n                } else if (isHiddenTextArea(destEl)) { // HTML editor\r\n                    destEl.value = val;\r\n                    $(destEl).data(\"editor\").set();\r\n                } else {\r\n                    destEl.value = val;\r\n                }\r\n                if (args.trigger)\r\n                    $(destEl).change();\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    if (ar.length > 0 && ar[0] != \"\") {\r\n        var data = Object.assign({\r\n            page: list.page,\r\n            field: list.field,\r\n            ajax: \"autofill\",\r\n            v0: ar[0],\r\n            language: ew.LANGUAGE_ID\r\n        }, getUserParams('#p_' + id, f));\r\n        // Add parent field values\r\n        var parentId = list.parentFields.slice(); // Clone\r\n        if (rowindex != \"\") {\r\n            for (var i = 0, len = parentId.length; i < len; i++) {\r\n                var ar = parentId[i].split(\" \");\r\n                if (ar.length == 1) // Parent field in the same table, add row index\r\n                    parentId[i] = parentId[i].replace(/^x_/, \"x\" + rowindex + \"_\");\r\n            }\r\n        }\r\n        var arp = parentId.map(function(pid) {\r\n            return getOptionValues(pid, f);\r\n        });\r\n        for (var i = 0, cnt = arp.length; i < cnt; i++) // Filter by parent fields\r\n            data[\"v\" + (i + 1)] = arp[i].join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n        return $.post(getApiUrl(ew.API_LOOKUP_ACTION), data, success, \"json\");\r\n    }\r\n    return success();\r\n}\r\n\r\n// Setup tooltip links\r\nexport function tooltip(i, el) {\r\n    var $this = $(el), $tt = $(\"#\" + $this.data(\"tooltip-id\")),\r\n        trig = $this.data(\"trigger\") || \"hover\", dir = $this.data(\"placement\") || (ew.CSS_FLIP ? \"left\" : \"right\"); // dir = \"left|right\"\r\n    if (!$tt[0] || $tt.text().trim() == \"\" && !$tt.find(\"img[src!='']\")[0])\r\n        return;\r\n    if (!$this.data(\"bs.popover\")) {\r\n        $this.popover({\r\n            html: true,\r\n            placement: dir,\r\n            trigger: trig,\r\n            delay: 100,\r\n            container: $(\"#ew-tooltip\")[0],\r\n            content: $tt.html(),\r\n            sanitizeFn: ew.sanitizeFn\r\n        }).on(\"show.bs.popover\", function(e) {\r\n            var wd, $tip = $($this.data(\"bs.popover\").getTipElement()).css(\"z-index\", 9999); // Make z-index higher than modal dialog\r\n            if (wd = $this.data(\"tooltip-width\")) // Set width before show\r\n                $tip.css(\"max-width\", parseInt(wd, 10) + \"px\");\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * Show dialog for email sending\r\n *\r\n * @param {Object} args - Arguments\r\n * @param {string} args.lnk - Email link ID\r\n * @param {string} args.hdr - Dialog header\r\n * @param {string} args.url - URL of the email content\r\n * @param {HTMLElement} args.f - Form\r\n * @param {Object} args.key - Key as object\r\n * @param {boolean} args.sel - Exported selected\r\n * @returns false\r\n */\r\nexport function emailDialogShow(args) {\r\n    var $dlg = ew.emailDialog || $(\"#ew-email-dialog\");\r\n    if (!$dlg[0]) {\r\n        _alert(\"DIV #ew-email-dialog not found.\");\r\n        return false;\r\n    }\r\n    if (args.sel && !keySelected(args.f)) {\r\n        _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n        return false;\r\n    }\r\n    var $f = $dlg.find(\".modal-body form\"),\r\n        frm = $f.data(\"form\");\r\n    if (!frm) {\r\n        frm = new Form($f.attr(\"id\"));\r\n        frm.addFields([\r\n            [\"sender\", [ew.Validators.required(ew.language.phrase(\"Sender\")), ew.Validators.email]],\r\n            [\"recipient\", [ew.Validators.required(ew.language.phrase(\"Recipient\")), ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperRecipientEmail\"))]],\r\n            [\"cc\", ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperCcEmail\"))],\r\n            [\"bcc\", ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperBccEmail\"))],\r\n            [\"subject\", ew.Validators.required(ew.language.phrase(\"Subject\"))]\r\n        ]);\r\n        frm.validate = function() {\r\n            return this.validateFields();\r\n        };\r\n        frm.submit = function() {\r\n            if (!this.validate())\r\n                return false;\r\n            var qs = $f.serialize(), data = \"\";\r\n            if (args.f && args.sel) // Export selected\r\n                data = $(args.f).find(\"input[type=checkbox][name='key_m[]']:checked\").serialize();\r\n            if (args.key)\r\n                qs += \"&\" + $.param(args.key);\r\n            var fobj = this.getForm();\r\n            if (args.url) { // Custom Template\r\n                $dlg.modal(\"hide\");\r\n                if (args.exportid)\r\n                    ew.exportWithCharts(args.el, args.url, args.exportid, fobj);\r\n                else\r\n                    _export(args.f, args.url, \"email\", true, args.sel, fobj);\r\n            } else {\r\n                $.post($(args.f).attr(\"action\"), qs + \"&\" + data, function(result) {\r\n                    showMessage(result);\r\n                });\r\n            }\r\n            return true;\r\n        };\r\n        $f.data(\"form\", frm);\r\n    }\r\n    $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr);\r\n    $dlg.find(\".modal-footer .btn-primary\").off().click(function(e) {\r\n        e.preventDefault();\r\n        if (frm.submit())\r\n            $dlg.modal(\"hide\");\r\n    });\r\n    ew.emailDialog = $dlg.modal(\"show\");\r\n    return false;\r\n}\r\n\r\n// Show drill down\r\nexport function showDrillDown(e, obj, url, id, hdr) {\r\n    if (e && e.ctrlKey) {\r\n        var arUrl = url.split(\"?\"), params = new URLSearchParams(arUrl[1]);\r\n        params.set(\"d\", \"2\");  // Change d parameter to 2\r\n        redirect(arUrl[0] + \"?\" + params.toString());\r\n        return false;\r\n    }\r\n    var $obj = ($.isString(obj)) ? $(\"#\" + obj) : $(obj);\r\n    var pos = $obj.data(\"drilldown-placement\") || ($obj.hasClass(\"ew-chart-canvas\") ? (ew.CSS_FLIP ? \"left\" : \"right\") : \"bottom\");\r\n    $obj.tooltip(\"hide\");\r\n    var args = {\"obj\": $obj[0], \"id\": id, \"url\": url, \"hdr\": hdr, \"placement\": pos};\r\n    $document.trigger(\"drilldown\", [args]);\r\n    var ar = args.url.split(\"?\");\r\n    args.file = ar[0] || \"\";\r\n    args.data = ar[1] || \"\";\r\n    if (!$obj.data(\"bs.popover\")) {\r\n        $obj.popover({\r\n            html: true,\r\n            placement: args.placement,\r\n            trigger: \"manual\",\r\n            template: '<div class=\"popover\"><h3 class=\"popover-header d-none\" style=\"cursor: move;\"></h3><div class=\"popover-body\"></div></div>',\r\n            content: '<div class=\"' + ew.spinnerClass + ' m-3 ew-loading\" role=\"status\"><span class=\"sr-only\">' + ew.language.phrase(\"Loading\") + '</span></div>',\r\n            container: $(\"#ew-drilldown-panel\"),\r\n            sanitizeFn: ew.sanitizeFn,\r\n            boundary: \"viewport\"\r\n        }).on(\"show.bs.popover\", function(e) {\r\n            $obj.attr(\"data-original-title\", \"\");\r\n        }).on(\"shown.bs.popover\", function(e) {\r\n            if (!$obj.data(\"args\"))\r\n                return;\r\n            var data = $obj.data(\"args\").data;\r\n            data += (data ? \"&\" : \"\") + ew.TOKEN_NAME_KEY + \"=\" + ew.TOKEN_NAME; // Add token name // PHP\r\n            data += (data ? \"&\" : \"\") + ew.ANTIFORGERY_TOKEN_KEY + \"=\" + ew.ANTIFORGERY_TOKEN; // Add antiforgery token // PHP\r\n            $.ajax({\r\n                cache: false,\r\n                dataType: \"html\",\r\n                type: \"POST\",\r\n                data: data,\r\n                url: $obj.data(\"args\").file,\r\n                success: function(data) {\r\n                    var $tip = $($obj.data(\"bs.popover\").getTipElement()).on(\"mousedown\", function(e) {\r\n                        var $this = $(this).addClass(\"drag\"),\r\n                            height = $this.outerHeight(),\r\n                            width = $this.outerWidth(),\r\n                            ypos = $this.offset().top + height - e.pageY,\r\n                            xpos = $this.offset().left + width - e.pageX;\r\n                        $body.on(\"mousemove\", function(e) {\r\n                            var top = e.pageY + ypos - height,\r\n                                left = e.pageX + xpos - width;\r\n                            if ($this.hasClass(\"drag\"))\r\n                                $this.offset({top: top, left: left});\r\n                        }).on(\"mouseup\", function(e){\r\n                            $this.removeClass(\"drag\");\r\n                        });\r\n                    });\r\n                    if (args.hdr)\r\n                        $tip.find(\".popover-header\").empty().removeClass(\"d-none\")\r\n                            .append('<button type=\"button\" class=\"close\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>' + args.hdr)\r\n                            .find(\".close\").click(function() {\r\n                                $obj.popover(\"hide\");\r\n                            });\r\n                    var m = data.match(/<body[^>]*>([\\s\\S]*?)<\\/body\\s*>/i); // Use HTML in document body only\r\n                    data = m ? m[0] : data;\r\n                    var html = ew.stripScript(data);\r\n                    $tip.find(\".popover-body\").html($(\"<div></div>\").html(html).find(\"#ew-report\")) // Insert the container table only\r\n                        .find(\".ew-table\").each(ew.setupTable);\r\n                    ew.executeScript(data, id);\r\n                    $obj.popover(\"update\");\r\n                },\r\n                error: function(o) {\r\n                    if (o.responseText) {\r\n                        var $tip = $($el.data(\"bs.popover\").getTipElement());\r\n                        $tip.find(\".popover-body\").empty().append('<p class=\"text-danger\">' + o.responseText + '</p>');\r\n                    }\r\n                }\r\n            });\r\n        }).on(\"hidden.bs.popover\", function(e) {\r\n            $.each(ew.drillDownCharts, function(key, cht) { // Dispose charts\r\n                cht.dispose();\r\n            });\r\n            ew.drillDownCharts = {};\r\n            ew.removeScript(id);\r\n        });\r\n    }\r\n    $obj.data(\"args\", args).popover(\"show\");\r\n}\r\n\r\n/**\r\n * Ajax query\r\n * @param {Object} data - object to passed to API\r\n * @param {callback} callback - Callback function for async request (see http://api.jquery.com/jQuery.post/), empty for sync request\r\n * @returns {string|string[]}\r\n */\r\nexport function ajax(data, callback) {\r\n    if (!$.isObject(data))\r\n        return undefined;\r\n    var action = data.action;\r\n    if (!action)\r\n        return undefined;\r\n    delete data.action;\r\n    var obj = Object.assign({}, data);\r\n    var _convert = function(response) {\r\n        if ($.isObject(response) && response.result == \"OK\") {\r\n            var results = response.records;\r\n            if (Array.isArray(results) && results.length == 1) { // Single row\r\n                results = results[0];\r\n                if (Array.isArray(results) && results.length == 1) // Single column\r\n                    return results[0]; // Return a value\r\n                else\r\n                    return results; // Return a row\r\n            }\r\n            return results;\r\n        }\r\n        return response;\r\n    };\r\n    var url = getApiUrl(action), // URL\r\n        type = obj.type || \"POST\";\r\n    delete obj.type;\r\n    obj.dataType = \"json\";\r\n    if ($.isFunction(callback)) { // Async\r\n        $.ajax({\r\n            url: url,\r\n            type: type,\r\n            data: obj,\r\n            success: function (response) {\r\n                callback(_convert(response));\r\n            }\r\n        });\r\n    } else { // Sync\r\n        var response = $.ajax({\r\n            url: url,\r\n            async: false,\r\n            type: type,\r\n            data: obj\r\n        });\r\n        return _convert(response.responseJSON);\r\n    }\r\n}\r\n\r\n// Get URL of current page\r\nexport function currentPage() {\r\n    return location.href.split(\"#\")[0].split(\"?\")[0];\r\n}\r\n\r\n// Toggle search operator\r\nexport function toggleSearchOperator(id, value) {\r\n    var el = this.form.elements[id];\r\n    if (!el)\r\n        return;\r\n    el.value = (el.value != value) ? value : \"=\";\r\n}\r\n\r\n// Validators\r\n// Check US Date format (mm/dd/yyyy)\r\nexport function checkUSDate(object_value) {\r\n    return checkDateEx(object_value, \"us\", ew.DATE_SEPARATOR);\r\n}\r\n\r\n// Check US Date format (mm/dd/yy)\r\nexport function checkShortUSDate(object_value) {\r\n    return checkDateEx(object_value, \"usshort\", ew.DATE_SEPARATOR);\r\n}\r\n\r\n// Check Date format (yyyy/mm/dd)\r\nexport function checkDate(object_value) {\r\n    return checkDateEx(object_value, \"std\", ew.DATE_SEPARATOR);\r\n}\r\n\r\n// Check Date format (yy/mm/dd)\r\nexport function checkShortDate(object_value) {\r\n    return checkDateEx(object_value, \"stdshort\", ew.DATE_SEPARATOR);\r\n}\r\n\r\n// Check Euro Date format (dd/mm/yyyy)\r\nexport function checkEuroDate(object_value) {\r\n    return checkDateEx(object_value, \"euro\", ew.DATE_SEPARATOR);\r\n}\r\n\r\n// Check Euro Date format (dd/mm/yy)\r\nexport function checkShortEuroDate(object_value) {\r\n    return checkDateEx(object_value, \"euroshort\", ew.DATE_SEPARATOR);\r\n}\r\n\r\n// Check default date format\r\nexport function checkDateDef(object_value) {\r\n    if (ew.DATE_FORMAT.match(/^yyyy/))\r\n        return checkDate(object_value);\r\n    else if (ew.DATE_FORMAT.match(/^yy/))\r\n        return checkShortDate(object_value);\r\n    else if (ew.DATE_FORMAT.match(/^m/) && ew.DATE_FORMAT.match(/yyyy$/))\r\n        return checkUSDate(object_value);\r\n    else if (ew.DATE_FORMAT.match(/^m/) && ew.DATE_FORMAT.match(/yy$/))\r\n        return checkShortUSDate(object_value);\r\n    else if (ew.DATE_FORMAT.match(/^d/) && ew.DATE_FORMAT.match(/yyyy$/))\r\n        return checkEuroDate(object_value);\r\n    else if (ew.DATE_FORMAT.match(/^d/) && ew.DATE_FORMAT.match(/yy$/))\r\n        return checkShortEuroDate(object_value);\r\n    return false;\r\n}\r\n\r\n// Check date format\r\n// format: std/stdshort/us/usshort/euro/euroshort\r\nexport function checkDateEx(value, format, sep) {\r\n    if (!value || value.length == \"\")\r\n        return true;\r\n    value = value.replace(/ +/g, \" \").trim();\r\n    var arDT = value.split(\" \");\r\n    if (arDT.length > 0) {\r\n        var re, ar, sYear, sMonth, sDay;\r\n        re = /^(\\d{4})-([0][1-9]|[1][0-2])-([0][1-9]|[1|2]\\d|[3][0|1])$/;\r\n        if (ar = re.exec(arDT[0])) {\r\n            sYear = ar[1];\r\n            sMonth = ar[2];\r\n            sDay = ar[3];\r\n        } else {\r\n            var wrksep = escapeRegExChars(sep);\r\n            switch (format) {\r\n                case \"std\":\r\n                    re = new RegExp(\"^(\\\\d{4})\" + wrksep + \"([0]?[1-9]|[1][0-2])\" + wrksep + \"([0]?[1-9]|[1|2]\\\\d|[3][0|1])$\");\r\n                    break;\r\n                case \"stdshort\":\r\n                    re = new RegExp(\"^(\\\\d{2})\" + wrksep + \"([0]?[1-9]|[1][0-2])\" + wrksep + \"([0]?[1-9]|[1|2]\\\\d|[3][0|1])$\");\r\n                    break;\r\n                case \"us\":\r\n                    re = new RegExp(\"^([0]?[1-9]|[1][0-2])\" + wrksep + \"([0]?[1-9]|[1|2]\\\\d|[3][0|1])\" + wrksep + \"(\\\\d{4})$\");\r\n                    break;\r\n                case \"usshort\":\r\n                    re = new RegExp(\"^([0]?[1-9]|[1][0-2])\" + wrksep + \"([0]?[1-9]|[1|2]\\\\d|[3][0|1])\" + wrksep + \"(\\\\d{2})$\");\r\n                    break;\r\n                case \"euro\":\r\n                    re = new RegExp(\"^([0]?[1-9]|[1|2]\\\\d|[3][0|1])\" + wrksep + \"([0]?[1-9]|[1][0-2])\" + wrksep + \"(\\\\d{4})$\");\r\n                    break;\r\n                case \"euroshort\":\r\n                    re = new RegExp(\"^([0]?[1-9]|[1|2]\\\\d|[3][0|1])\" + wrksep + \"([0]?[1-9]|[1][0-2])\" + wrksep + \"(\\\\d{2})$\");\r\n                    break;\r\n            }\r\n            if (!re.test(arDT[0]))\r\n                return false;\r\n            var arD = arDT[0].split(sep);\r\n            switch (format) {\r\n                case \"std\":\r\n                case \"stdshort\":\r\n                    sYear = unformatYear(arD[0]);\r\n                    sMonth = arD[1];\r\n                    sDay = arD[2];\r\n                    break;\r\n                case \"us\":\r\n                case \"usshort\":\r\n                    sYear = unformatYear(arD[2]);\r\n                    sMonth = arD[0];\r\n                    sDay = arD[1];\r\n                    break;\r\n                case \"euro\":\r\n                case \"euroshort\":\r\n                    sYear = unformatYear(arD[2]);\r\n                    sMonth = arD[1];\r\n                    sDay = arD[0];\r\n                    break;\r\n            }\r\n        }\r\n        if (!checkDay(sYear, sMonth, sDay))\r\n            return false;\r\n    }\r\n    if (arDT.length > 1 && !checkTime(arDT[1]))\r\n        return false;\r\n    return true;\r\n}\r\n\r\n// Unformat 2 digit year to 4 digit year\r\nexport function unformatYear(yr) {\r\n    if (yr.length == 2)\r\n        return (yr > ew.UNFORMAT_YEAR) ? \"19\" + yr : \"20\" + yr;\r\n    return yr;\r\n}\r\n\r\n// Check day\r\nexport function checkDay(checkYear, checkMonth, checkDay) {\r\n    checkYear = parseInt(checkYear, 10);\r\n    checkMonth = parseInt(checkMonth, 10);\r\n    checkDay = parseInt(checkDay, 10);\r\n    var maxDay = [4, 6, 9, 11].includes(checkMonth) ? 30 : 31;\r\n    if (checkMonth == 2)\r\n        maxDay = (checkYear % 4 > 0 || checkYear % 100 == 0 && checkYear % 400 > 0) ? 28 : 29;\r\n    return checkRange(checkDay, 1, maxDay);\r\n}\r\n\r\n// Check integer\r\nexport function checkInteger(object_value) {\r\n    if (!object_value || object_value.length == 0)\r\n        return true;\r\n    if (object_value.includes(ew.DECIMAL_POINT))\r\n        return false;\r\n    return checkNumber(object_value);\r\n}\r\n\r\n// Check number\r\nexport function checkNumber(object_value) {\r\n    object_value = String(object_value);\r\n    if (!object_value || object_value.length == 0)\r\n        return true;\r\n    object_value = object_value.trim();\r\n    var ts = escapeRegExChars(ew.THOUSANDS_SEP), dp = escapeRegExChars(ew.DECIMAL_POINT),\r\n        re = new RegExp(\"^[+-]?(\\\\d{1,3}(\" + (ts ? ts + \"?\" : \"\") + \"\\\\d{3})*(\" + dp + \"\\\\d+)?|\" + dp + \"\\\\d+)$\");\r\n    return re.test(object_value);\r\n}\r\n\r\n// Convert to float\r\nexport function stringToFloat(object_value) {\r\n    object_value = String(object_value);\r\n    if (ew.THOUSANDS_SEP != \"\") {\r\n        var re = new RegExp(escapeRegExChars(ew.THOUSANDS_SEP), \"g\");\r\n        object_value = object_value.replace(re, \"\");\r\n    }\r\n    if (ew.DECIMAL_POINT != \"\")\r\n        object_value = object_value.replace(ew.DECIMAL_POINT, \".\");\r\n    return parseFloat(object_value);\r\n}\r\n\r\n// Convert string (yyyy-mm-dd hh:mm:ss) to date object\r\nexport function stringToDate(object_value) {\r\n    var re = /^(\\d{4})-([0][1-9]|[1][0-2])-([0][1-9]|[1|2]\\d|[3][0|1]) (?:(0\\d|1\\d|2[0-3]):([0-5]\\d):([0-5]\\d))?$/;\r\n    var ar = object_value.replace(re, \"$1 $2 $3 $4 $5 $6\").split(\" \");\r\n    return new Date(ar[0], ar[1]-1, ar[2], ar[3], ar[4], ar[5]);\r\n}\r\n\r\n// Escape regular expression chars\r\nexport function escapeRegExChars(str) {\r\n    return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\r\n}\r\n\r\n// Check range\r\nexport function checkRange(object_value, min_value, max_value) {\r\n    if (!object_value || object_value.length == 0)\r\n        return true;\r\n    if ($.isNumber(min_value) || $.isNumber(max_value)) { // Number\r\n        if (checkNumber(object_value))\r\n            object_value = stringToFloat(object_value);\r\n    }\r\n    if (!$.isNull(min_value) && object_value < min_value)\r\n        return false;\r\n    if (!$.isNull(max_value) && object_value > max_value)\r\n        return false;\r\n    return true;\r\n}\r\n\r\n// Check time\r\nexport function checkTime(object_value) {\r\n    if (!object_value || object_value.length == 0)\r\n        return true;\r\n    object_value = object_value.trim();\r\n    var re = new RegExp('^(0\\\\d|1\\\\d|2[0-3])' + escapeRegExChars(ew.TIME_SEPARATOR) + '[0-5]\\\\d(( (' + escapeRegExChars(ew.language.phrase(\"AM\")) + '|' + escapeRegExChars(ew.language.phrase(\"PM\")) + '))|(' + escapeRegExChars(ew.TIME_SEPARATOR) + '[0-5]\\\\d(\\\\.\\\\d+|[+-][\\\\d:]+)?)?)$', 'i');\r\n    return re.test(object_value);\r\n}\r\n\r\n// Check phone\r\nexport function checkPhone(object_value) {\r\n    if (!object_value || object_value.length == 0)\r\n        return true;\r\n    return /^\\(\\d{3}\\) ?\\d{3}( |-)?\\d{4}|^\\d{3}( |-)?\\d{3}( |-)?\\d{4}$/.test(object_value.trim());\r\n}\r\n\r\n// Check zip\r\nexport function checkZip(object_value) {\r\n    if (!object_value || object_value.length == 0)\r\n        return true;\r\n    return /^\\d{5}$|^\\d{5}-\\d{4}$/.test(object_value.trim());\r\n}\r\n\r\n// Check credit card\r\nexport function checkCreditCard(object_value) {\r\n    if (!object_value || object_value.length == 0)\r\n        return true;\r\n    var creditcard_string = object_value.replace(/\\D/g, \"\");\r\n    if (creditcard_string.length == 0)\r\n        return false;\r\n    var doubledigit = creditcard_string.length % 2 == 1 ? false : true;\r\n    var tempdigit, checkdigit = 0;\r\n    for (var i = 0, len = creditcard_string.length; i < len; i++) {\r\n        tempdigit = parseInt(creditcard_string.charAt(i), 10);\r\n        if (doubledigit) {\r\n            tempdigit *= 2;\r\n            checkdigit += (tempdigit % 10);\r\n            if (tempdigit / 10 >= 1.0)\r\n                checkdigit++;\r\n            doubledigit = false;\r\n        }\telse {\r\n            checkdigit += tempdigit;\r\n            doubledigit = true;\r\n        }\r\n    }\r\n    return (checkdigit % 10 == 0);\r\n}\r\n\r\n// Check social security number\r\nexport function checkSsn(object_value) {\r\n    if (!object_value || object_value.length == 0)\r\n        return true;\r\n    return /^(?!000)([0-6]\\d{2}|7([0-6]\\d|7[012]))([ -]?)(?!00)\\d\\d\\3(?!0000)\\d{4}$/.test(object_value.trim());\r\n}\r\n\r\n// Check emails\r\nexport function checkEmails(object_value, email_cnt) {\r\n    if (!object_value || object_value.length == 0)\r\n        return true;\r\n    var arEmails = object_value.replace(/,/g, \";\").split(\";\");\r\n    for (var i = 0, len = arEmails.length; i < len; i++) {\r\n        if (email_cnt > 0 && len > email_cnt)\r\n            return false;\r\n        if (!checkEmail(arEmails[i]))\r\n            return false;\r\n    }\r\n    return true;\r\n}\r\n\r\n// Check email\r\nexport function checkEmail(object_value) {\r\n    if (!object_value || object_value.length == 0)\r\n        return true;\r\n    return /^[\\w.%+-]+@[\\w.-]+\\.[A-Z]{2,18}$/i.test(object_value.trim());\r\n}\r\n\r\n// Check GUID {xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}\r\nexport function checkGuid(object_value) {\r\n    if (!object_value || object_value.length == 0)\r\n        return true;\r\n    return /^(\\{\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12}\\}|\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12})$/.test(object_value.trim());\r\n}\r\n\r\n// Check by regular expression\r\nexport function checkByRegEx(object_value, pattern) {\r\n    if (!object_value || object_value.length == 0)\r\n        return true;\r\n    return !!object_value.match(pattern);\r\n}\r\n\r\n/**\r\n * Show message dialog\r\n *\r\n * @param {Event|string} arg - Event or message\r\n * @returns\r\n */\r\nexport function showMessage(arg) {\r\n    var win = window.parent, // Note: If a window does not have a parent, its parent property is a reference to itself.\r\n        p = arg?.target ?? win.document,\r\n        swal = win.Swal,\r\n        $div = $(p).find(\"div.ew-message-dialog:hidden\").first(),\r\n        msg = $div.length ? $div.text() : \"\"; // Text only\r\n    if ($.isString(arg))\r\n        msg = $(\"<div>\" + arg.trim() + \"</div>\").text();\r\n    if (msg.trim() == \"\")\r\n        return;\r\n    if ($div.length) {\r\n        [\"success\", \"info\", \"warning\", \"danger\"].forEach(function(value, index) {\r\n            var $alert = $div.find(\".alert-\" + value).toggleClass(\"alert-\" + value),\r\n                $heading = $alert.find(\".alert-heading\").detach(),\r\n                $content = $alert.children(\":not(.icon)\");\r\n            $alert.find(\".icon\").remove();\r\n            if ($alert[0]) {\r\n                var w = parseInt($content.css(\"width\"), 10); // Width specified\r\n                if (w > 0)\r\n                    $content.first().css(\"width\", \"auto\");\r\n                var $toast = toast({\r\n                    class: \"ew-toast bg-\" + value,\r\n                    title: $heading[0] ? $heading.html() : ew.language.phrase(value),\r\n                    body: $alert.html(),\r\n                    autohide: (value == \"success\") ? ew.autoHideSuccessMessage : false, // Autohide for success message\r\n                    delay: (value == \"success\") ? ew.autoHideSuccessMessageDelay: 500\r\n                });\r\n                if (w > 0)\r\n                    $toast.css(\"max-width\", w); // Override bootstrap .toast max-width\r\n                return;\r\n            }\r\n        });\r\n    }\r\n    if ($.isString(arg)) {\r\n        return swal.fire({\r\n            ...ew.sweetAlertSettings,\r\n            html: arg\r\n        });\r\n    }\r\n}\r\n\r\n// Random number\r\nexport function random() {\r\n    return Math.floor(Math.random() * 100001) + 100000;\r\n}\r\n\r\n// File upload\r\nexport function upload(input) {\r\n    var $input = $(input);\r\n    if ($input.data(\"blueimpFileupload\"))\r\n        return;\r\n    var id = $input.attr(\"name\"), nid = id.replace(/\\$/g, \"\\\\$\"), tbl = $input.data(\"table\"),\r\n        multiple = $input.is(\"[multiple]\"), $p = $input.closest(\".form-group, [id^='el']\"),\r\n        readonly = $input.prop(\"disabled\") || $input.closest(\"form\").find(\"#confirm\").val() == \"confirm\",\r\n        $ft = $p.find(\"#ft_\" + nid), $fn = $p.find(\"#fn_\" + nid), $fa = $p.find(\"#fa_\" + nid), $fs = $p.find(\"#fs_\" + nid),\r\n        $exts = $p.find(\"#fx_\" + nid), $maxsize = $p.find(\"#fm_\" + nid), $maxfilecount = $p.find(\"#fc_\" + nid),\r\n        $label = $p.find(\".custom-file-label\"), label = $label.html();\r\n    var _done = function(e, data) {\r\n        if (data.result.files[0].error)\r\n            return;\r\n        var name = data.result.files[0].name;\r\n        var ar = (multiple) ? ($fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : []) : [];\r\n        ar.push(name);\r\n        $fn.val(ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR));\r\n        $fa.val(\"0\");\r\n        if (!multiple) // Remove other entries if not multiple upload\r\n            $ft.children(\"tr:not(:last-child)\").remove();\r\n    };\r\n    var _deleted = function(e, data) {\r\n        var url = $(e.originalEvent.target).data(\"url\"),\r\n            param = new URLSearchParams(url.split(\"?\")[1]),\r\n            fid = param.get(\"id\"),\r\n            name = param.get(fid);\r\n        if (name) {\r\n            var ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [];\r\n            var index = ar.indexOf(name);\r\n            if (index > -1)\r\n                ar.splice(index, 1);\r\n            $fn.val(ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR));\r\n            $fa.val(\"0\");\r\n        }\r\n    };\r\n    var _change = function(e, data) {\r\n        $ft.toggleClass(\"ew-has-rows\", data.files?.length > 0);\r\n        var ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [];\r\n        for (var i = 0; i < data.files.length; i++)\r\n            ar.push(data.files[i].name);\r\n        var cnt = parseInt($maxfilecount.val(), 10);\r\n        if ($.isNumber(cnt) && cnt > 0 && ar.length > cnt) {\r\n            _alert(ew.language.phrase(\"UploadErrMsgMaxNumberOfFiles\"));\r\n            return false;\r\n        }\r\n        var l = parseInt($fs.val(), 10);\r\n        if ($.isNumber(l) && l > 0 && ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR).length > l) {\r\n            _alert(ew.language.phrase(\"UploadErrMsgMaxFileLength\"));\r\n            return false;\r\n        }\r\n    };\r\n    var _confirmDelete = function(e) {\r\n        if (!multiple && $fn.val()) {\r\n            if (!confirm(ew.language.phrase(\"UploadOverwrite\"))) {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n            }\r\n        }\r\n    };\r\n    var _changed = function(e, data) {\r\n        $ft.toggleClass(\"ew-has-rows\", data.files?.length > 0 || data.result?.files?.length > 0);\r\n        var ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [];\r\n        $label.html(ar.join(\", \") || label);\r\n    };\r\n    var _clicked = function() {\r\n        $input.closest(\"span.fileinput-button\").tooltip(\"hide\");\r\n    };\r\n    // var _process = function(e, data) {\r\n    //     $ft.toggleClass(\"ew-has-rows\", data.files?.length > 0);\r\n    // };\r\n    var _downloadTemplate = $.templates(\"#template-download\");\r\n    var _uploadTemplate = $.templates(\"#template-upload\");\r\n    var _completed = function(e, data) { // After download template rendered\r\n        var e = { target: data.context };\r\n        initLightboxes(e);\r\n        initPdfObjects(e);\r\n        ew.updateDropdownPosition();\r\n        data.context.find(\"img\").on(\"load\", ew.updateDropdownPosition);\r\n    }\r\n    var _added = function(e, data) { // After upload template rendered\r\n        $ft.toggleClass(\"ew-has-rows\", data.files?.length > 0);\r\n        data.context.find(\".start\").click(_confirmDelete);\r\n    };\r\n    // Hide input button if readonly\r\n    var form = getForm(input), $form = $(form);\r\n    var readonly = $form.find(\"#confirm\").val() == \"confirm\";\r\n    if (readonly)\r\n        $form.find(\"span.fileinput-button\").hide();\r\n    var cnt = parseInt($maxfilecount.val(), 10);\r\n    var uploadUrl = getApiUrl(ew.API_JQUERY_UPLOAD_ACTION);\r\n    var formData = {\r\n        id: id,\r\n        table: tbl,\r\n        session: ew.SESSION_ID,\r\n        replace: (multiple ? \"0\" : \"1\"),\r\n        exts: $exts.val(),\r\n        maxsize: $maxsize.val(),\r\n        maxfilecount: $maxfilecount.val()\r\n    };\r\n    $input.fileupload({\r\n        url: uploadUrl,\r\n        type: \"POST\",\r\n        multipart: true,\r\n        autoUpload: true, // Comment out to disable auto upload\r\n        loadImageFileTypes: /^image\\/(gif|jpe?g|png)$/i,\r\n        loadVideoFileTypes: /^video\\/mp4$/i,\r\n        loadAudioFileTypes: /^audio\\/(mpeg|mp3)$/i,\r\n        acceptFileTypes: ($exts.val()) ? new RegExp('\\\\.(' + $exts.val().replace(/,/g, '|') + ')$', 'i') : null,\r\n        maxFileSize: parseInt($maxsize.val(), 10),\r\n        maxNumberOfFiles: (cnt > 1) ? cnt : null,\r\n        filesContainer: $ft,\r\n        formData: formData,\r\n        uploadTemplateId: null,\r\n        downloadTemplateId: null,\r\n        uploadTemplate: _uploadTemplate.render.bind(_uploadTemplate),\r\n        downloadTemplate: _downloadTemplate.render.bind(_downloadTemplate),\r\n        previewMaxWidth: ew.UPLOAD_THUMBNAIL_WIDTH,\r\n        previewMaxHeight: ew.UPLOAD_THUMBNAIL_HEIGHT,\r\n        dropZone: $p,\r\n        pasteZone: $p,\r\n        messages: {\r\n            acceptFileTypes: ew.language.phrase(\"UploadErrMsgAcceptFileTypes\"),\r\n            maxFileSize: ew.language.phrase(\"UploadErrMsgMaxFileSize\"),\r\n            maxNumberOfFiles: ew.language.phrase(\"UploadErrMsgMaxNumberOfFiles\"),\r\n            minFileSize: ew.language.phrase(\"UploadErrMsgMinFileSize\")\r\n        },\r\n        readOnly: readonly // Custom\r\n    }).on(\"fileuploaddone\", _done)\r\n        .on(\"fileuploaddestroy\", _deleted)\r\n        .on(\"fileuploadchange\", _change)\r\n        .on(\"fileuploadadded fileuploadfinished fileuploaddestroyed\", _changed)\r\n        //.on(\"fileuploadprocess\", _process)\r\n        .on('fileuploadadded', _added)\r\n        .on('fileuploadcompleted', _completed)\r\n        .click(_clicked);\r\n    if ($fn.val()) {\r\n        $.ajax({\r\n            url: uploadUrl,\r\n            data: { id: id, table: tbl, session: ew.SESSION_ID },\r\n            dataType: \"json\",\r\n            context: this,\r\n            success: function(result) {\r\n                if (result && result[id]) {\r\n                    var done = $input.fileupload(\"option\", \"done\");\r\n                    if (done)\r\n                        done.call(input, $.Event(), { result: { files: result[id] } }); // Use \"files\"\r\n                }\r\n                if (readonly) // Hide delete button if readonly\r\n                    $ft.find(\"td.delete\").hide();\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * Convert data to number\r\n *\r\n * @param {*} data - Data being converted\r\n * @param {Object} [config] - Configuration\r\n * @param {string} config.decimalSeparator - Decimal separator\r\n * @param {string} config.thousandsSeparator - Thousands separator\r\n * @returns {(number|null)}\r\n */\r\nexport function parseNumber(data, config) {\r\n    if ($.isString(data)) {\r\n        config = config || {\"thousandsSeparator\": ew.THOUSANDS_SEP, \"decimalSeparator\": ew.DECIMAL_POINT};\r\n        var regexBits = [], regex, separator = config.thousandsSeparator, decimal = config.decimalSeparator;\r\n        if (separator)\r\n            regexBits.push(escapeRegExChars(separator) + \"(?=\\\\d)\");\r\n        regex = new RegExp(\"(?:\" + regexBits.join(\"|\") + \")\", \"g\");\r\n        if (decimal === \".\")\r\n            decimal = null;\r\n        data = data.replace(regex, \"\");\r\n        data = (decimal) ? data.replace(decimal, \".\") : data;\r\n    }\r\n    if ($.isString(data) && data.trim() !== \"\")\r\n        data = +data;\r\n    if (!$.isNumber || !isFinite(data)) // Catch NaN and Infinity\r\n        data = null;\r\n    return data;\r\n}\r\n\r\n/**\r\n * Format a Number to string for display\r\n *\r\n * @param {*} data - Data being converted\r\n * @param {Object} [config] - Configuration\r\n * @param {number} config.decimalPlaces - Number of decimal places to round. Must be a number 0 to 20.\r\n * @param {string} config.decimalSeparator - Decimal separator\r\n * @param {string} config.thousandsSeparator - Thousands separator\r\n * @returns {string} Note: null, undefined, NaN and \"\" returns as \"\".\r\n */\r\nexport function formatNumber(data, config) {\r\n    if ($.isNumber(data)) {\r\n        config = config || {\"thousandsSeparator\": ew.THOUSANDS_SEP, \"decimalSeparator\": ew.DECIMAL_POINT};\r\n        var isNeg = (data < 0), output = data + \"\", decPlaces = config.decimalPlaces,\r\n            decSep = config.decimalSeparator || \".\", thouSep = config.thousandsSeparator,\r\n            decIndex, newOutput, count, i;\r\n        if ($.isNumber(decPlaces) && (decPlaces >= 0) && (decPlaces <= 20)) // Decimal precision\r\n            output = data.toFixed(decPlaces);\r\n        if (decSep !== \".\") // Decimal separator\r\n            output = output.replace(\".\", decSep);\r\n        if (thouSep) { // Add the thousands separator\r\n            decIndex = output.lastIndexOf(decSep); // Find the dot or where it would be\r\n            decIndex = (decIndex > -1) ? decIndex : output.length;\r\n            newOutput = output.substring(decIndex); // Start with the dot and everything to the right\r\n            for (count = 0, i = decIndex; i > 0; i--) { // Working left, every third time add a separator, every time add a digit\r\n                if (count%3 === 0 && i !== decIndex && (!isNeg || i > 1))\r\n                    newOutput = thouSep + newOutput;\r\n                newOutput = output.charAt(i-1) + newOutput;\r\n                count++;\r\n            }\r\n            output = newOutput;\r\n        }\r\n        return output;\r\n    } else { // Not a Number, return as string\r\n        return ($.isValue(data) && data.toString) ? data.toString() : \"\";\r\n    }\r\n}\r\n\r\n/**\r\n * Convert data to Moment object (see http://momentjs.com/docs/)\r\n *\r\n * @param {*} data - Data being converted\r\n * @param {number} format - Date format matching server side FormatDateTime()\r\n * @returns {Moment}\r\n */\r\nexport function parseDate(data, format) {\r\n    var args = $.makeArray(arguments);\r\n    if ($.isNumber(format) && format >=0 && format <= 17) {\r\n        var f, def = ew.DATE_FORMAT.toUpperCase(), sep = ew.DATE_SEPARATOR, timesep = ew.TIME_SEPARATOR;\r\n        switch (format) {\r\n            case 0: case 1: case 2: case 8: f = def + \" HH\" + timesep + \"mm\" + timesep + \"ss\"; break; // ew.DATE_FORMAT + \" %H:%M:%S\"\r\n            case 3: f = \"hh:mm:ss A\"; break; // \"%I:%M:%S %p\"\r\n            case 4: f = \"HH:mm:ss\"; break; // \"%H:%M:%S\"\r\n            case 5: f = \"YYYY\" + sep + \"MM\" + sep + \"DD\"; break; // \"%Y\" + sep + \"%m\" + sep + \"%d\"\r\n            case 6: f = \"MM\" + sep + \"DD\" + sep + \"YYYY\"; break; // \"%m\" + sep + \"%d\" + sep + \"%Y\"\r\n            case 7: f = \"DD\" + sep + \"MM\" + sep + \"YYYY\"; break; // \"%d\" + sep + \"%m\" + sep + \"%Y\"\r\n            case 9: f = \"YYYY\" + sep + \"MM\" + sep + \"DD HH\" + timesep + \"mm\" + timesep + \"ss\"; break; // \"%Y\" + sep + \"%m\" + sep + \"%d %H:%M:%S\"\r\n            case 10: f = \"MM\" + sep + \"DD\" + sep + \"YYYY HH\" + timesep + \"mm\" + timesep + \"ss\"; break; // \"%m\" + sep + \"%d\" + sep + \"%Y %H:%M:%S\"\r\n            case 11: f = \"DD\" + sep + \"MM\" + sep + \"YYYY HH\" + timesep + \"mm\" + timesep + \"ss\"; break; // \"%d\" + sep + \"%m\" + sep + \"%Y %H:%M:%S\"\r\n            case 12: f = \"YY\" + sep + \"MM\" + sep + \"DD\"; break; // \"%y\" + sep + \"%m\" + sep + \"%d\"\r\n            case 13: f = \"MM\" + sep + \"DD\" + sep + \"YY\"; break; // \"%m\" + sep + \"%d\" + sep + \"%y\"\r\n            case 14: f = \"DD\" + sep + \"MM\" + sep + \"YY\"; break; // \"%d\" + sep + \"%m\" + sep + \"%y\"\r\n            case 15: f = \"YY\" + sep + \"MM\" + sep + \"DD HH\" + timesep + \"mm\" + timesep + \"ss\"; break; // \"%y\" + sep + \"%m\" + sep + \"%d %H:%M:%S\"\r\n            case 16: f = \"MM\" + sep + \"DD\" + sep + \"YY HH\" + timesep + \"mm\" + timesep + \"ss\"; break; // \"%m\" + sep + \"%d\" + sep + \"%y %H:%M:%S\"\r\n            case 17: f = \"DD\" + sep + \"MM\" + sep + \"YY HH\" + timesep + \"mm\" + timesep + \"ss\"; break; // \"%d\" + sep + \"%m\" + sep + \"%y %H:%M:%S\"\r\n        }\r\n        args[1] = [f, \"YYYY-MM-DD HH\" + timesep + \"mm\" + timesep + \"ss\"];\r\n    }\r\n    return moment.apply(this, args);\r\n}\r\n\r\n/**\r\n * Format date time\r\n *\r\n * @param {*} data - Date being formatted\r\n * @param {string} format - Date format (see http://momentjs.com/docs/#/displaying/format/)\r\n * @returns {string}\r\n */\r\nexport function formatDate(data, format) {\r\n    return moment(data).format(format || ew.DATE_FORMAT.toUpperCase());\r\n}\r\n\r\n/**\r\n * Init page\r\n *\r\n * @param {Event|undefined} e - Event\r\n */\r\nexport function initPage(e) {\r\n    var el = (e && e.target) ? e.target : document,\r\n        $el = $(el),\r\n        $tables = $el.find(\"table.ew-table:not(.ew-export-table)\");\r\n    Array.prototype.forEach.call(el.querySelectorAll(\".ew-grid-upper-panel, .ew-grid-lower-panel\"), ew.initGridPanel); // Init grid panels\r\n    ew.renderJsTemplates(e);\r\n    lazyLoad(e);\r\n    initForms(e);\r\n    initTooltips(e);\r\n    initPasswordOptions(e);\r\n    initIcons(e);\r\n    initLightboxes(e);\r\n    initPdfObjects(e);\r\n    $el.find(\"[data-widget='treeview']\").each(function() {\r\n        adminlte.Treeview._jQueryInterface.call($(this), \"init\");\r\n    });\r\n    $tables.each(setupTable); // Init tables\r\n    $el.find(\".ew-btn-dropdown\").on(\"shown.bs.dropdown\", function() {\r\n        var $this = $(this).removeClass(\"dropup\"),\r\n            $window = $(window),\r\n            $menu = $this.find(\"> .dropdown-menu\");\r\n        $this.toggleClass(\"dropup\", $menu.offset().top + $menu.height() > $window.scrollTop() + $window.height());\r\n    });\r\n    $el.find(\"input[name=pageno]\").keypress(function(e) {\r\n        if (e.which == 13) {\r\n            currentUrl.searchParams.append(this.name, parseInt(this.value));\r\n            window.location = currentUrl.toString();\r\n            return false;\r\n        }\r\n    });\r\n    if (!ew.IS_SCREEN_SM_MIN) {\r\n        $el.find(\".\" + ew.RESPONSIVE_TABLE_CLASS + \" [data-toggle='dropdown']\").parent().on(\"shown.bs.dropdown\", function() {\r\n            var $this = $(this),\r\n                $menu = $this.find(\".dropdown-menu\"),\r\n                div = $this.closest(\".\" + ew.RESPONSIVE_TABLE_CLASS)[0];\r\n            if (div.scrollHeight - div.clientHeight) {\r\n                var d = $menu.offset().top + $menu.outerHeight() - $(div).offset().top - div.clientHeight;\r\n                if (d > 0)\r\n                    $menu.css(ew.CSS_FLIP ? \"right\" : \"left\", \"100%\").css(\"top\", parseFloat($menu.css(\"top\")) - d);\r\n            }\r\n        });\r\n    }\r\n    initExportLinks(e);\r\n    initMultiSelectCheckboxes(e);\r\n\r\n    // Report\r\n    var $rpt = $el.find(\".ew-report\");\r\n    if ($rpt[0]) {\r\n        $rpt.find(\".card\").on(\"collapsed.lte.widget\", function() { // Fix min-height when .lte.widget is collapsed\r\n            var $card = $(this), $div = $card.closest(\"[class^='col-']\"), mh = $div.css(\"min-height\");\r\n            if (mh)\r\n                $div.data(\"min-height\", mh);\r\n            $div.css(\"min-height\", 0);\r\n        }).on(\"expanded.lte.widget\", function() { // Fix min-height when .lte.widget is expanded\r\n            var $card = $(this), $div = $card.closest(\"[class^='col-']\"), mh = $div.css(\"min-height\");\r\n            if (mh)\r\n                $div.css(\"min-height\", mh); // Restore min-height\r\n        });\r\n        // Group expand/collapse button\r\n        $rpt.find(\"span.ew-group-toggle\").on(\"click\", function() {\r\n            ew.toggleGroup(this);\r\n        });\r\n    }\r\n\r\n    // Show message\r\n    if (typeof ew.USE_JAVASCRIPT_MESSAGE != \"undefined\" && ew.USE_JAVASCRIPT_MESSAGE)\r\n        showMessage(e);\r\n}\r\n\r\n// Redirect by HTTP GET or POST\r\nexport function redirect(url, f, method) {\r\n    var ar = url.split(\"?\"),\r\n        params = new URLSearchParams(ar[1]);\r\n    params.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // PHP\r\n    params.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // PHP\r\n    if (sameText(method, \"post\")) { // POST\r\n        var $form = (f) ? $(f) : $(\"<form></form>\").appendTo(\"body\");\r\n        $form.attr({ action: ar[0], method: \"post\" });\r\n        params.forEach(function(value, key) {\r\n            $('<input type=\"hidden\">').attr({ name: key, value: sanitize(value) }).appendTo($form);\r\n        });\r\n        $form.submit();\r\n    } else { // GET\r\n        var search = params.toString();\r\n        window.location = ar[0] + (search ? \"?\" + search : \"\");\r\n    }\r\n}\r\n\r\n// Show/Hide password\r\nexport function togglePassword(e) {\r\n    var $btn = $(e.currentTarget), $input = $btn.closest(\".input-group\").find(\"input\"), $i = $btn.find(\"i\");\r\n    if ($input.attr(\"type\") == \"text\") {\r\n        $input.attr(\"type\", \"password\");\r\n        $i.toggleClass(\"fa-eye-slash fa-eye\");\r\n    } else if($input.attr(\"type\") == \"password\"){\r\n        $input.attr(\"type\", \"text\");\r\n        $i.toggleClass(\"fa-eye-slash fa-eye\");\r\n    }\r\n}\r\n\r\n// Export with charts\r\nexport function exportWithCharts(e, url, exportId, f) {\r\n    var el = e.target,\r\n        exportUrl = new URL(window.location.href),\r\n        ar = url.split(\"?\"),\r\n        $el = $(el), method = (f) ? \"post\" : \"get\";\r\n\r\n    exportId += \"_\" + Date.now();\r\n    exportUrl.pathname = ar[0];\r\n    exportUrl.search = ar[1];\r\n    exportUrl.searchParams.set(\"exportid\", exportId);\r\n\r\n    if ($el.is(\".dropdown-menu a\"))\r\n        $el = $el.closest(\".btn-group\");\r\n\r\n    var _export = function() {\r\n        var params = exportUrl.searchParams,\r\n            custom = params.get(\"custom\") == \"1\";\r\n        if (f && !custom) { // Not custom\r\n            var data = $(f).serialize(); // Add token\r\n            $.post(exportUrl, data, function(result) {\r\n                showMessage(result);\r\n            });\r\n        } else { // Custom\r\n            var exp = params.get(\"export\");\r\n            if (custom && [\"word\", \"excel\", \"pdf\", \"email\"].includes(exp)) {\r\n                if (exp == \"email\") {\r\n                    params.delete(\"export\"); // Remove duplicate export=email (exists in form)\r\n                    exportUrl.search = params.toString() + \"&\" + $(f).serialize();\r\n                }\r\n                $(\"iframe.ew-export\").remove();\r\n                $(\"<iframe></iframe>\").addClass(\"ew-export d-none\").attr(\"src\", exportUrl.toString()).appendTo($body.css(\"cursor\", \"wait\"));\r\n                setTimeout(function() { $body.css(\"cursor\", \"default\"); }, 5000);\r\n            } else if (exp == \"print\") {\r\n                redirect(exportUrl.toString(), f, method);\r\n            } else {\r\n                fileDownload(exportUrl.toString(), null);\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n\r\n    var keys = Object.keys(window.exportCharts);\r\n    if (keys.length == 0) // No charts, just submit the form\r\n        return _export();\r\n\r\n    // Success callback\r\n    var success = function(result) {\r\n        if ($.isString(result))\r\n            result = parseJson(result);\r\n        if (result.success) {\r\n            _export();\r\n        } else {\r\n            ew.alert(result.error);\r\n        }\r\n    };\r\n\r\n    // Failure callback\r\n    var fail = function(xhr, status, error) {\r\n        ew.alert(error + \": \" + xhr.responseText); // Show detailed export error message\r\n    };\r\n\r\n    // Export charts\r\n    $body.css(\"cursor\", \"wait\");\r\n    var charts = [];\r\n    for (var i = 0; i < keys.length; i++) {\r\n        var id = keys[i], o = window.exportCharts[id],\r\n            params = \"exportfilename=\" + exportId + \"_\" + id + \".png|exportformat=png|exportaction=download|exportparameters=undefined\";\r\n        if (o && o.toBase64Image) // Chart.js chart\r\n            charts.push({ \"chart_engine\": \"Chart.js\", \"stream_type\": \"base64\", \"stream\": o.toBase64Image(), \"parameters\": params });\r\n    }\r\n    $.ajax({\r\n        \"url\": getApiUrl(ew.API_EXPORT_CHART_ACTION),\r\n        \"data\": { \"charts\": JSON.stringify(charts) },\r\n        \"cache\": false,\r\n        \"type\": \"POST\"\r\n    }).done(success).fail(fail).always(function() {\r\n        $body.css(\"cursor\", \"default\");\r\n    });\r\n    return false;\r\n}\r\n\r\n// Layout\r\nvar _fixLayoutHeightTimer;\r\n\r\n// Fix layout height\r\nexport function fixLayoutHeight() {\r\n    if (_fixLayoutHeightTimer)\r\n        _fixLayoutHeightTimer.cancel(); // Clear timer\r\n    _fixLayoutHeightTimer = $.later(50, null, function () {\r\n        var layout = $body.data(\"lte.layout\");\r\n        if (layout)\r\n            layout.fixLayoutHeight();\r\n    });\r\n}\r\n\r\n// Add user event handlers\r\nexport function addEventHandlers(tblVar) {\r\n    let fields = ew.events[tblVar];\r\n    if (fields) {\r\n        for (var [fldVar, events] of Object.entries(fields))\r\n            $('[data-table=' + tblVar + '][data-field=' + fldVar + ']').on(events);\r\n    }\r\n}","import $ from 'jquery';\r\n\r\n/**\r\n * Select2 decorator for results adapter\r\n */\r\nexport default function(Utils) {\r\n\r\n    class Select2CustomOption {\r\n\r\n        render(decorated) {\r\n            var $results = $(\r\n              '<div class=\"select2-results__options ' + this.options.get('containerClass') + '\" role=\"listbox\"></div>'\r\n            ); //***\r\n\r\n            if (this.options.get('multiple')) {\r\n              $results.attr('aria-multiselectable', 'true');\r\n            }\r\n\r\n            this.$results = $results;\r\n\r\n            return $results;\r\n        };\r\n\r\n        displayMessage(decorated, params) {\r\n            var escapeMarkup = this.options.get('escapeMarkup');\r\n\r\n            this.clear();\r\n            this.hideLoading();\r\n\r\n            var $message = $(\r\n              '<div role=\"alert\" aria-live=\"assertive\"' +\r\n              ' class=\"select2-results__option\"></div>'\r\n            ); //***\r\n\r\n            if (params.message.includes(\"<\") && params.message.includes(\">\")) { // HTML //***\r\n              $message.append(params.message);\r\n            } else {\r\n              var message = this.options.get('translations').get(params.message);\r\n              $message.append(\r\n                escapeMarkup(\r\n                  message(params.args)\r\n                )\r\n              );\r\n            }\r\n\r\n            $message[0].className += ' select2-results__message';\r\n\r\n            this.$results.append($message);\r\n        };\r\n\r\n        append(decorated, data) {\r\n            this.hideLoading();\r\n\r\n            var $options = [];\r\n\r\n            if (data.results == null || data.results.length === 0) {\r\n              if (this.$results.children().length === 0) {\r\n                if (this.$element.data(\"updating\")) {\r\n                  this.trigger('results:message', {\r\n                    message: '<div class=\"spinner-border spinner-border-sm text-primary ew-select-spinner\" role=\"status\"><span class=\"sr-only\">' + ew.language.phrase('Loading') + '</span></div> ' + ew.language.phrase('Loading')\r\n                  });\r\n                  this.$element.one(\"updatedone\", () => this.$element.select2(\"close\").select2(\"open\"));\r\n                } else {\r\n                  this.trigger('results:message', {\r\n                    message: 'noResults'\r\n                  });\r\n                }\r\n              }\r\n\r\n              return;\r\n            }\r\n\r\n            data.results = this.sort(data.results);\r\n\r\n            //***\r\n            var cols = this.options.get('columns'),\r\n                len = data.results.length,\r\n                $row = this.$results.find(\".\" + this.options.get('rowClass')).last();\r\n\r\n            for (var d = 0; d < data.results.length; d++) {\r\n                var item = data.results[d];\r\n\r\n                var $option = this.option(item);\r\n\r\n                if (!$row.length || $row.children().length == cols) { // Add new row\r\n                    $row = $('<div class=\"' + this.options.get('rowClass') + '\"></div>');\r\n                    this.$results.append($row);\r\n                }\r\n\r\n                $row.append($option);\r\n\r\n                if (d == len - 1) { // Last\r\n                    var cnt = cols - $row.children().length;\r\n                    for (var i = 0; i < cnt ; i++)\r\n                        $row.append('<div class=\"' + this.options.get('colClass') + '\"></div>');\r\n                }\r\n            }\r\n\r\n        };\r\n\r\n        option(decorated, data) {\r\n            // var option = document.createElement('li');\r\n            var option = document.createElement('div'); //***\r\n            option.className = 'select2-results__option ' + this.options.get('cellClass'); //***\r\n\r\n            var attrs = {\r\n              'role': 'option',\r\n              'aria-selected': 'false'\r\n            };\r\n\r\n            var matches = window.Element.prototype.matches ||\r\n              window.Element.prototype.msMatchesSelector ||\r\n              window.Element.prototype.webkitMatchesSelector;\r\n\r\n            if ((data.element != null && matches.call(data.element, ':disabled')) ||\r\n                (data.element == null && data.disabled)) {\r\n              delete attrs['aria-selected'];\r\n              attrs['aria-disabled'] = 'true';\r\n            }\r\n\r\n            if (data.id == null) {\r\n              delete attrs['aria-selected'];\r\n            }\r\n\r\n            if (data._resultId != null) {\r\n              option.id = data._resultId;\r\n            }\r\n\r\n            if (data.title) {\r\n              option.title = data.title;\r\n            }\r\n\r\n            // if (data.children) { //***\r\n            //   attrs.role = 'group';\r\n            //   attrs['aria-label'] = data.text;\r\n            //   delete attrs['aria-selected'];\r\n            // }\r\n\r\n            for (var attr in attrs) {\r\n              var val = attrs[attr];\r\n\r\n              option.setAttribute(attr, val);\r\n            }\r\n\r\n            // if (data.children) { //***\r\n            //   var $option = $(option);\r\n\r\n            //   var label = document.createElement('strong');\r\n            //   label.className = 'select2-results__group';\r\n\r\n            //   var $label = $(label);\r\n            //   this.template(data, label);\r\n\r\n            //   var $children = [];\r\n\r\n            //   for (var c = 0; c < data.children.length; c++) {\r\n            //     var child = data.children[c];\r\n\r\n            //     var $child = this.option(child);\r\n\r\n            //     $children.push($child);\r\n            //   }\r\n\r\n            //   var $childrenContainer = $('<ul></ul>', {\r\n            //     'class': 'select2-results__options select2-results__options--nested'\r\n            //   });\r\n\r\n            //   $childrenContainer.append($children);\r\n\r\n            //   $option.append(label);\r\n            //   $option.append($childrenContainer);\r\n            // } else {\r\n              this.template(data, option);\r\n            // }\r\n\r\n            Utils.StoreData(option, 'data', data);\r\n\r\n            return option;\r\n        };\r\n\r\n    }\r\n\r\n    return Select2CustomOption;\r\n}","import $ from 'jquery';\r\nimport MultiPage from \"./multipage\";\r\nimport * as Validators from './Validators';\r\nimport Form from \"./Form\";\r\nimport * as functions from './functions';\r\n\r\new.IS_SCREEN_SM_MIN = window.matchMedia(\"(min-width: 768px)\").matches; // Should matches $screen-sm-min\r\new.MOBILE_DETECT = new MobileDetect(window.navigator.userAgent);\r\new.IS_MOBILE = !!ew.MOBILE_DETECT.mobile();\r\new.IS_IE = ew.MOBILE_DETECT.version(\"MSIE\") > 0;\r\n\r\n// Charts\r\nwindow.exportCharts = {}; // Per window\r\nwindow.drillDownCharts = {}; // Per window\r\n\r\n// Init spinner\r\new.addSpinner();\r\n\r\n// Extend\r\nObject.assign(ew, { MultiPage, Form, Validators }, functions);\r\n\r\nvar $document = $(document);\r\n\r\n// Init document\r\nloadjs.ready(\"load\", function () {\r\n\t$.views.settings.debugMode(ew.DEBUG);\r\n\tew.setSessionTimer();\r\n\tew.initPage();\r\n\t$(\"#ew-modal-dialog\").on(\"load.ew\", ew.initPage);\r\n\t$(\"#ew-add-opt-dialog\").on(\"load.ew\", ew.initPage);\r\n\tvar hash = ew.currentUrl.searchParams.get(\"hash\");\r\n\tif (hash)\r\n\t\t$(\"html, body\").animate({ scrollTop: $(\"#\" + hash).offset().top }, 800);\r\n\tew.removeSpinner();\r\n\t$document.trigger(\"load\");\r\n});\r\n\r\n// Default \"addoption\" event (fired before adding new option to selection list)\r\n$document.on(\"addoption\", function (e, args) {\r\n\tvar row = args.data; // New row to be validated\r\n\tvar arp = args.parents; // Parent field values\r\n\tfor (var i = 0, cnt = arp.length; i < cnt; i++) { // Iterate parent values\r\n\t\tvar p = arp[i];\r\n\t\tif (!p.length) // Empty parent\r\n\t\t\t//continue; // Allow\r\n\t\t\treturn args.valid = false; // Disallow\r\n\t\tvar val = row[\"ff\" + ((i > 0) ? i + 1 : \"\")]; // Filter fields start from the 6th field\r\n\t\tif (!$.isUndefined(val) && !p.includes(String(val))) // Filter field value not in parent field values\r\n\t\t\treturn args.valid = false; // Returns false if invalid\r\n\t}\r\n});\r\n\r\n// Fix z-index of multiple modals\r\n$document.on(\"show.bs.modal\", \".modal\", function () {\r\n\tvar zIndex = 1050 + $(\".modal:visible\").length;\r\n\t$(this).css(\"z-index\", zIndex);\r\n\tsetTimeout(function () {\r\n\t\t$(\".modal-backdrop\").not(\".modal-stack\").css(\"z-index\", zIndex - 1).addClass(\"modal-stack\");\r\n\t}, 0);\r\n});\r\n\r\n// Fix scrolling of multiple modals\r\n$document.on(\"hidden.bs.modal\", \".modal\", function () {\r\n\t$(\".modal:visible\").length && $(\"body\").addClass(\"modal-open\");\r\n});","import $ from \"jquery\";\r\n\r\nexport default function MultiPage(formid) {\r\n\tvar self = this;\r\n\tthis.$form = null;\r\n\tthis.formID = formid;\r\n\tthis.pageIndex = 1;\r\n\tthis.maxPageIndex = 0;\r\n\tthis.minPageIndex = 0;\r\n\tthis.pageIndexes = [];\r\n\tthis.$pages = null;\r\n\tthis.$collapses = null;\r\n\tthis.isTab = false; // Is tabs\r\n\tthis.isCollapse = false; // Is collapses (accordion)\r\n\tthis.lastPageSubmit = false; // Enable submit button for the last page only\r\n\tthis.hideDisabledButton = false; // Hide disabled submit button\r\n\tthis.hideInactivePages = false; // Hide inactive pages\r\n\tthis.lockTabs = false; // Set inactive tabs as disabled\r\n\tthis.hideTabs = false; // Hide all tabs\r\n\tthis.showPagerTop = false; // Show pager at top\r\n\tthis.showPagerBottom = false; // Show pager at bottom\r\n\tthis.pagerTemplate = '<nav><ul class=\"pagination\"><li class=\"page-item previous ew-prev\"><a href=\"#\" class=\"page-link\"><span class=\"icon-prev\"></span> {Prev}</a></li><li class=\"page-item next ew-next\"><a href=\"#\" class=\"page-link\">{Next} <span class=\"icon-next\"></span></a></li></ul></nav>'; // Pager template\r\n\r\n\t// \"show\" handler (for disabled tabs)\r\n\tvar _show = function(e) {\r\n\t\te.preventDefault();\r\n\t};\r\n\r\n\t// Set properties\r\n\tvar _properties = [\"lastPageSubmit\", \"hideDisabledButton\", \"hideInactivePages\", \"lockTabs\",\r\n\t\t\"hideTabs\", \"showPagerTop\", \"showPagerBottom\", \"pagerTemplate\"];\r\n\r\n\tthis.set = function() {\r\n\t\tif (arguments.length == 1 && $.isObject(arguments[0])) {\r\n\t\t\tvar obj = arguments[0];\r\n\t\t\tfor (var i in obj) {\r\n\t\t\t\tvar p = i[0].toLowerCase() + i.substr(1); // Camel case\r\n\t\t\t\tif (_properties.includes(p))\r\n\t\t\t\t\tthis[p] = obj[i];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// DOM loaded\r\n\tthis.init = function() {\r\n\t\tvar tpl = this.pagerTemplate.replace(/\\{prev\\}/i, ew.language.phrase(\"Prev\")).replace(/\\{next\\}/i, ew.language.phrase(\"Next\"));\r\n\t\tif (this.isTab) {\r\n\t\t\tif (this.showPagerTop)\r\n\t\t\t\tthis.$pages.closest(\".tabbable, .ew-nav-tabs\").before(tpl);\r\n\t\t\tif (this.showPagerBottom)\r\n\t\t\t\tthis.$pages.closest(\".tabbable, .ew-nav-tabs\").after(tpl);\r\n\t\t\tthis.$form.find(\".ew-prev\").click(function(e) {\r\n\t\t\t\tself.$pages.off(\"show.bs.tab\", _show).filter(\".active\").parent()\r\n\t\t\t\t\t.prev(\":has([data-toggle=tab]:not(.ew-hidden):not(.ew-disabled))\")\r\n\t\t\t\t\t.find(\"[data-toggle=tab]\").toggleClass(\"disabled d-none\", false).click();\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t\tthis.$form.find(\".ew-next\").click(function(e) {\r\n\t\t\t\tself.$pages.off(\"show.bs.tab\", _show).filter(\".active\").parent()\r\n\t\t\t\t\t.next(\":has([data-toggle=tab]:not(.ew-hidden):not(.ew-disabled))\")\r\n\t\t\t\t\t.find(\"[data-toggle=tab]\").toggleClass(\"disabled d-none\", false).click();\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t\tif (this.hideTabs)\r\n\t\t\t\tthis.$form.find(\".ew-multi-page > .tabbable > .nav-tabs, .ew-multi-page > .ew-nav-tabs > .nav-tabs\").hide();\r\n\t\t} else if (this.isCollapse) {\r\n\t\t\tif (this.showPagerTop)\r\n\t\t\t\tthis.$collapses.closest(\".ew-accordion\").before(tpl);\r\n\t\t\tif (this.showPagerBottom)\r\n\t\t\t\tthis.$collapses.closest(\".ew-accordion\").after(tpl);\r\n\t\t\tthis.$form.find(\".ew-prev\").click(function(e) {\r\n\t\t\t\tself.$pages.closest(\".card\").filter(\":has(.collapse.show)\")\r\n\t\t\t\t\t.prev(\":has([data-toggle=collapse]:not(.ew-hidden):not(.ew-disabled))\")\r\n\t\t\t\t\t.toggleClass(\"disabled d-none\", false)\r\n\t\t\t\t\t.find(\"[data-toggle=collapse]\").click();\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t\tthis.$form.find(\".ew-next\").click(function(e) {\r\n\t\t\t\tself.$pages.closest(\".card\").filter(\":has(.collapse.show)\")\r\n\t\t\t\t\t.next(\":has([data-toggle=collapse]:not(.ew-hidden):not(.ew-disabled))\")\r\n\t\t\t\t\t.toggleClass(\"disabled d-none\", false)\r\n\t\t\t\t\t.find(\"[data-toggle=collapse]\").click();\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.pageShow();\r\n\t}\r\n\r\n\t// Page show\r\n\tthis.pageShow = function() {\r\n\t\tif (this.isTab) {\r\n\t\t\tif (this.lockTabs)\r\n\t\t\t\tthis.$pages.on(\"show.bs.tab\", _show);\r\n\t\t\tthis.$pages.each(function() {\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tif (self.hideInactivePages)\r\n\t\t\t\t\t$this.toggleClass(\"d-none\", !$this.hasClass(\"active\"));\r\n\t\t\t\tif (self.lockTabs)\r\n\t\t\t\t\t$this.toggleClass(\"disabled\", !$this.hasClass(\"active\"));\r\n\t\t\t});\r\n\t\t} else if (this.isCollapse) {\r\n\t\t\tthis.$pages.closest(\".card\").each(function() {\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tif (self.hideInactivePages)\r\n\t\t\t\t\t$this.toggleClass(\"d-none\", !$this.find(\".collapse.show\")[0]);\r\n\t\t\t});\r\n\t\t}\r\n\t\tvar disabled = this.lastPageSubmit && this.pageIndex != this.maxPageIndex;\r\n\t\tvar $btn = this.$form.closest(\".content, .modal-content\").find(\"#btn-action, button.ew-submit\").prop(\"disabled\", disabled).toggle(!this.hideDisabledButton || !disabled);\r\n\t\t$(\".ew-captcha\").toggle($btn.is(\":visible:not(:disabled)\")); // Re-captcha uses class \"disabled\", not \"disabled\" property.\r\n\t\tdisabled = this.pageIndex <= this.minPageIndex;\r\n\t\tthis.$form.find(\".ew-prev\").toggleClass(\"disabled\", disabled);\r\n\t\tdisabled = this.pageIndex >= this.maxPageIndex;\r\n\t\tthis.$form.find(\".ew-next\").toggleClass(\"disabled\", disabled);\r\n\t}\r\n\r\n\t// Go to page by index\r\n\tthis.gotoPage = function(i) {\r\n\t\tif (i <= 0 || i < this.minPageIndex || i > this.maxPageIndex)\r\n\t\t\treturn;\r\n\t\tif (this.pageIndex != i) {\r\n\t\t\tvar $page = this.$pages.eq(i - 1);\r\n\t\t\tif (this.isTab) {\r\n\t\t\t\tif ($page.is(\":not(.d-none):not(.disabled)\"))\r\n\t\t\t\t\t$page.click();\r\n\t\t\t\telse\r\n\t\t\t\t\t$page.parent().next(\":has([data-toggle=tab]):not(.d-none):not(.disabled)\")\r\n\t\t\t\t\t\t.find(\"[data-toggle=tab]\").toggleClass(\"disabled\", false).click();\r\n\t\t\t} else if (this.isCollapse) {\r\n\t\t\t\tvar $p = $page.closest(\".card\");\r\n\t\t\t\tif ($p.is(\":not(.d-none)\"))\r\n\t\t\t\t\t$page.click();\r\n\t\t\t\telse\r\n\t\t\t\t\t$p.next(\":has([data-toggle=collapse]):not(.d-none)\").find(\"[data-toggle=collapse]\").click();\r\n\t\t\t}\r\n\t\t\tthis.pageIndex = i;\r\n\t\t}\r\n\t}\r\n\r\n\tthis.gotoPageByIndex = this.gotoPage;\r\n\r\n\t// Go to page by element\r\n\tthis.gotoPageByElement = function(el) {\r\n\t\tthis.gotoPage(parseInt($(el).data(\"page\"), 10) || -1);\r\n\t}\r\n\r\n\t// Go to page by element's id or name or data-field attribute\r\n\tthis.gotoPageByElementId = function(id) {\r\n\t\tvar $el = this.$form.find(\"[data-page]\").filter(\"[id='\" + id + \"'],[name='\" + id + \"'],[data-field='\" + id + \"']\");\r\n\t\tthis.gotoPageByElement($el);\r\n\t}\r\n\r\n\t// Toggle page\r\n\tthis.togglePage = function(i, show) {\r\n\t\tif (this.isTab) {\r\n\t\t\tthis.$pages.eq(i - 1).toggleClass(\"d-none\", !show);\r\n\t\t} else if (this.isCollapse) {\r\n\t\t\tthis.$pages.eq(i - 1).closest(\".card\").toggle(\"d-none\", !show);\r\n\t\t}\r\n\t}\r\n\r\n\t// Render\r\n\tthis.render = function() {\r\n\t\tthis.$form = $(\"#\" + formid);\r\n\t\tthis.pageIndexes = this.$form.find(\"[data-page]\").map(function() {\r\n\t\t\tvar index = parseInt($(this).data(\"page\"), 10);\r\n\t\t\treturn (index > 0) ? index : null;\r\n\t\t}).get();\r\n\t\tthis.pageIndexes.sort(function(a, b) {\r\n\t\t\treturn a - b;\r\n\t\t});\r\n\t\tthis.minPageIndex = this.pageIndexes[0];\r\n\t\tthis.maxPageIndex = this.pageIndexes[this.pageIndexes.length - 1];\r\n\t\tvar $tabs = this.$form.find(\"[data-toggle=tab]\");\r\n\t\tif ($tabs[0]) {\r\n\t\t\tthis.$pages = $tabs;\r\n\t\t\tthis.isTab = true;\r\n\t\t\t$tabs.on(\"shown.bs.tab\", function(e) {\r\n\t\t\t\tself.pageIndex = $tabs.index(e.target) + 1;\r\n\t\t\t\tself.pageShow();\r\n\t\t\t\t$($(this).attr(\"href\")).find(\".ew-google-map\").each(function() {\r\n\t\t\t\t\tvar m = ew.googleMaps[this.id];\r\n\t\t\t\t\tif (m && m[\"map\"]) {\r\n\t\t\t\t\t\tgoogle.maps.event.trigger(m[\"map\"], \"resize\");\r\n\t\t\t\t\t\tm[\"map\"].setCenter(m[\"latlng\"]);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.pageIndex = $tabs.index($tabs.parent(\".active\")) + 1;\r\n\t\t} else {\r\n\t\t\tthis.$collapses = this.$form.find(\"[data-toggle=collapse]\");\r\n\t\t\tif (this.$collapses[0]) {\r\n\t\t\t\tthis.$pages = this.$collapses;\r\n\t\t\t\tthis.isCollapse = true;\r\n\t\t\t\tvar $bodies = this.$collapses.closest(\".card-header\").next();\r\n\t\t\t\t$bodies.on(\"shown.bs.collapse\", function(e) {\r\n\t\t\t\t\tself.pageIndex = $bodies.index(e.target) + 1;\r\n\t\t\t\t\tself.pageShow();\r\n\t\t\t\t\t$(this).find(\".ew-google-map\").each(function() {\r\n\t\t\t\t\t\tvar m = ew.googleMaps[this.id];\r\n\t\t\t\t\t\tif (m && m[\"map\"]) {\r\n\t\t\t\t\t\t\tgoogle.maps.event.trigger(m[\"map\"], \"resize\");\r\n\t\t\t\t\t\t\tm[\"map\"].setCenter(m[\"latlng\"]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tthis.pageIndex = $bodies.index($bodies.hasClass(\"show\")) + 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\t$(function() {\r\n\t\t\tself.init();\r\n\t\t});\r\n\t}\r\n}","import $ from 'jquery';\r\n\r\n// Extend jQuery\r\n$.extend({\r\n\tisBoolean: function(o) {\r\n\t\treturn typeof o === 'boolean';\r\n\t},\r\n\tisNull: function(o) {\r\n\t\treturn o === null;\r\n\t},\r\n\tisNumber: function(o) {\r\n\t\treturn typeof o === 'number' && isFinite(o);\r\n\t},\r\n\tisObject: function(o) {\r\n\t\treturn (o && (typeof o === 'object' || this.isFunction(o))) || false;\r\n\t},\r\n\tisString: function(o) {\r\n\t\treturn typeof o === 'string';\r\n\t},\r\n\tisUndefined: function(o) {\r\n\t\treturn typeof o === 'undefined';\r\n\t},\r\n\tisValue: function(o) {\r\n\t\treturn (this.isObject(o) || this.isString(o) || this.isNumber(o) || this.isBoolean(o));\r\n\t},\r\n\tisDate: function(o) {\r\n\t\treturn this.type(o) === 'date' && o.toString() !== 'Invalid Date' && !isNaN(o);\r\n\t},\r\n\tlater: function(when, o, fn, data, periodic) {\r\n\t\twhen = when || 0;\r\n\t\to = o || {};\r\n\t\tvar m = fn, d = data, f, r;\r\n\t\tif (this.isString(fn))\r\n\t\t\tm = o[fn];\r\n\t\tif (!m)\r\n\t\t\treturn;\r\n\t\tif (!this.isUndefined(data) && !this.isArray(d))\r\n\t\t\td = [data];\r\n\t\tf = function() {\r\n\t\t\tm.apply(o, d || []);\r\n\t\t};\r\n\t\tr = (periodic) ? setInterval(f, when) : setTimeout(f, when);\r\n\t\treturn {\r\n\t\t\tinterval: periodic,\r\n\t\t\tcancel: function() {\r\n\t\t\t\tif (this.interval) {\r\n\t\t\t\t\tclearInterval(r);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tclearTimeout(r);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n});","import $ from 'jquery';\r\n\r\n/**\r\n * jQuery.fields() plugin\r\n *\r\n * @param {string|undefined} fldvar - Field variable name or undefined\r\n *  If field variable name, returns jQuery object of the specified field element(s).\r\n *  If unspecified, returns object of jQuery objects of all fields.\r\n * @returns jQuery object\r\n */\r\n$.fn.fields = function(fldvar) { // Note: fldvar has NO \"x_\" prefix\r\n    var rec = {},\r\n        id = this.attr(\"id\"),\r\n        obj = this[0],\r\n        m = id.match(/^[xy](\\d*)_/),\r\n        f, tbl, infix;\r\n    if (m) { // \"this\" is input element\r\n        f = ew.getForm(obj); // form\r\n        tbl = this.data(\"table\"); // table var\r\n        infix = m[1]; // row index\r\n    } else if (obj && obj.htmlForm) { // \"this\" is form\r\n        f = obj.$element; // form\r\n        tbl = obj.id.replace(new RegExp(\"^f|\" + obj.pageId + \"$\", \"g\"), \"\"); // table var\r\n        infix = $(obj.htmlForm).data(\"rowindex\"); // row index\r\n    }\r\n    var selector = \"[data-table\" + (tbl ? \"=\" + tbl : \"\") + \"][data-field\" + (fldvar ? \"=x_\" + fldvar : \"\") + \"]\";\r\n    if ($.isValue(infix))\r\n        selector += \"[name^=x\" + infix + \"_]\";\r\n    if (f && selector) {\r\n        $(f).find(selector).each(function() {\r\n            var key = this.getAttribute(\"data-field\").substr(2), name = this.getAttribute(\"name\");\r\n            key = (/^y_/.test(name)) ? \"y_\" + key : key; // Use \"y_fldvar\" as key for 2nd search input\r\n            rec[key] = (rec[key]) ? rec[key].add(this) : $(this); // Create jQuery object for each field\r\n        });\r\n    }\r\n    return (fldvar) ? rec[fldvar] : rec;\r\n};\r\n$.fn.extend({\r\n    // Get jQuery object of the row (<div> or <tr>)\r\n    row: function() {\r\n        var $row = this.closest(\"#r_\" + this.data(\"field\").substr(2));\r\n        if (!$row[0])\r\n            $row = this.closest(\".ew-table > tbody > tr\"); // Grid page\r\n        return $row;\r\n    },\r\n    // Show/Hide field\r\n    visible: function(v) {\r\n        var $el = this.closest(\"#r_\" + this.data(\"field\").substr(2)); // Find the row\r\n        if (!$el[0]) // If not found, find the <span>\r\n            $el = this.closest(\"[id^=el]\");\r\n        if (typeof(v) != \"undefined\") {\r\n            $el.toggle(v);\r\n            return this;\r\n        } else {\r\n            return $el.is(\":visible\");\r\n        }\r\n    },\r\n    // Get/Set field \"readonly\" attribute\r\n    // Note: This attribute is ignored if the value of the type attribute is hidden, range, color, checkbox, radio, file, or a button type\r\n    readonly: function(v) {\r\n        if (typeof(v) != \"undefined\") {\r\n            this.prop(\"readOnly\", v);\r\n            return this;\r\n        } else {\r\n            return this.prop(\"readOnly\");\r\n        }\r\n    },\r\n    // Get/Set field \"disabled\" attribute\r\n    // Note: A disabled control's value isn't submitted with the form\r\n    disabled: function(v) {\r\n        if (typeof(v) != \"undefined\") {\r\n            this.prop(\"disabled\", v);\r\n            return this;\r\n        } else {\r\n            return this.prop(\"disabled\");\r\n        }\r\n    },\r\n    // Get/Set field value(s)\r\n    // Note: Return array if select-multiple\r\n    value: function(v) {\r\n        var type = this.attr(\"type\");\r\n        if (typeof(v) != \"undefined\") {\r\n            if (!Array.isArray(v))\r\n                v = [v];\r\n            var type = this.attr(\"type\");\r\n            var el = (type == \"radio\" || type == \"checkbox\") ? this.get() : this[0];\r\n            if (ew.isHiddenTextArea(this))\r\n                this.val(v).data(\"editor\").save();\r\n            else\r\n                ew.selectOption(el, v);\r\n            return this;\r\n        } else {\r\n            if (type == \"checkbox\") {\r\n                var val = ew.getOptionValues(this.get());\r\n                return (this.length == 1) ? val.join() : val;\r\n            } else if (type == \"radio\") {\r\n                return ew.getOptionValues(this.get()).join();\r\n            } else if (ew.isHiddenTextArea(this)) {\r\n                this.data(\"editor\").save();\r\n                return this.val();\r\n            } else {\r\n                return this.val();\r\n            }\r\n        }\r\n    },\r\n    // Get field value as number\r\n    toNumber: function() {\r\n        return ew.parseNumber(this.value());\r\n    },\r\n    // Get field value as moment object\r\n    toDate: function() {\r\n        return ew.parseDate(this.value(), this.data(\"format\"));\r\n    },\r\n    // Get field value as native Date object\r\n    toJsDate: function() {\r\n        return ew.parseDate(this.value(), this.data(\"format\")).toDate();\r\n    }\r\n});","import $ from 'jquery';\r\n\r\n// Init Treeview later\r\n$(window).off(\"load.lte.treeview\");\r\n\r\n// Treeview\r\nvar Treeview = adminlte.Treeview;\r\nTreeview.prototype._toggle = Treeview.prototype.toggle;\r\nTreeview.prototype.toggle = function toggle(event) {\r\n\tvar $relativeTarget = $(event.currentTarget), treeviewMenu = $relativeTarget.next(),\r\n\t\thref = $relativeTarget.attr(\"href\"), $text = $(event.target).closest(\".menu-item-text\");\r\n\tif (!treeviewMenu.is(\".nav-treeview\") || $text[0] && href && href != \"#\" && href != \"javascript:void(0);\") // Menu text with href\r\n\t\treturn;\r\n\tthis._toggle(event);\r\n};\r\n\r\n// Dropdown menu parent item with href // Override AdminLTE\r\n$(\"ul.dropdown-menu [data-toggle=dropdown]\").on(\"click\", function(e) {\r\n\tvar href = $(this).attr(\"href\");\r\n\tif (href && href != \"#\" && e.target.nodeName == \"SPAN\")\r\n\t\twindow.location = href;\r\n});"]}